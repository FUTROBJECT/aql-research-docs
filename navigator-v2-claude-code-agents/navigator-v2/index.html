<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Governance Navigator v2 â€” Student Services</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,400;1,600&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* ============================================================
   CSS CUSTOM PROPERTIES
   ============================================================ */
:root {
  --ink: #151515; --ink-soft: #3A3A3A; --ink-muted: #6B6B6B;
  --mid: #A0A0A0; --border: #D4D4D4;
  --surface: #F5F5F3; --warm-white: #FAFAF8; --white: #FFFFFF;
  --signal: #0891B2; --signal-dark: #0E7490; --signal-deep: #155E75;
  --signal-light: #E0F7FA; --signal-10: rgba(8,145,178,0.10);
  --accent: #D97706; --accent-light: #FEF3C7;
  --dark: #0C0C0C; --dark-surface: #1A1A1A; --dark-border: #2A2A2A; --dark-muted: #888888;
  --live: #16A34A; --caution: #EAB308; --critical: #DC2626;
  --p1: #0066cc; --p2: #28a745; --p3: #6f42c1; --p4: #fd7e14;
  --p5: #dc3545; --p6: #17a2b8; --p7: #e83e8c; --p8: #6610f2; --p9: #795548;
  --risk-high: #c00; --risk-high-bg: #f8d7da;
  --risk-medium: #856404; --risk-medium-bg: #fff3cd;
  --risk-lower: #28a745; --risk-lower-bg: #d4edda;
  --display: 'Plus Jakarta Sans', sans-serif;
  --body: 'Inter', sans-serif;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html { font-size: 62.5%; scroll-behavior: smooth; }

body {
  font-family: var(--body); font-size: 1.6rem; line-height: 1.5;
  color: var(--ink); background: var(--white); -webkit-font-smoothing: antialiased;
}

/* ============================================================
   NAV
   ============================================================ */
.nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 100;
  background: rgba(12,12,12,0.95); backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--dark-border);
  padding: 0 6rem; display: flex; align-items: center;
  justify-content: space-between; height: 6rem;
}
.nav-logo {
  font-family: var(--display); font-size: 1.6rem; font-weight: 800;
  color: var(--white); letter-spacing: -0.01em;
  display: flex; align-items: center; gap: 1rem; cursor: pointer;
}
.nav-logo svg { color: var(--white); }
.nav-right { display: flex; align-items: center; gap: 2.4rem; }
.nav-link {
  font-family: var(--display); font-size: 1.3rem; font-weight: 600;
  color: var(--dark-muted); cursor: pointer; text-decoration: none;
  transition: color 0.15s; background: none; border: none;
}
.nav-link:hover { color: var(--white); }
.ca-toggle {
  display: flex; align-items: center; gap: 0.6rem;
  font-family: var(--display); font-size: 1.1rem; font-weight: 600;
  color: var(--dark-muted); cursor: pointer;
}
.ca-toggle input { accent-color: var(--signal); cursor: pointer; }

/* ============================================================
   VIEW SYSTEM
   ============================================================ */
.view { display: none; min-height: 100vh; padding-top: 6rem; }
.view.active { display: block; animation: fadeIn 0.4s ease; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* ============================================================
   SECTION SYSTEM
   ============================================================ */
.section { width: 100%; padding: 10rem 6rem; position: relative; overflow: hidden; }
.section-dark { background: var(--dark); color: var(--white); }
.section-surface { background: var(--surface); }
.section-inner { max-width: 120rem; margin: 0 auto; }

/* ============================================================
   TYPOGRAPHY
   ============================================================ */
.display-xl { font-family: var(--display); font-size: 7.2rem; font-weight: 800; line-height: 1.0; letter-spacing: -0.03em; }
.display-lg { font-family: var(--display); font-size: 4.8rem; font-weight: 700; line-height: 1.1; letter-spacing: -0.025em; }
.display-md { font-family: var(--display); font-size: 3.2rem; font-weight: 700; line-height: 1.15; letter-spacing: -0.02em; }
.display-sm { font-family: var(--display); font-size: 2.4rem; font-weight: 700; line-height: 1.2; letter-spacing: -0.01em; }
.display-xs { font-family: var(--display); font-size: 1.8rem; font-weight: 700; line-height: 1.3; }
.label { font-family: var(--display); font-size: 1.2rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.14em; }
.body-lg { font-family: var(--body); font-size: 1.8rem; line-height: 1.6; }

/* ============================================================
   BUTTONS
   ============================================================ */
.btn {
  font-family: var(--display); font-weight: 600; font-size: 1.4rem; line-height: 2rem;
  padding: 1.2rem 3.2rem; border: 2px solid transparent; cursor: pointer;
  transition: all 0.2s; display: inline-flex; align-items: center; gap: 0.8rem;
  text-decoration: none; border-radius: 0;
}
.btn-primary { background: var(--signal); color: var(--white); border-color: var(--signal); }
.btn-primary:hover { background: var(--signal-dark); border-color: var(--signal-dark); }
.btn-dark { background: var(--ink); color: var(--white); border-color: var(--ink); }
.btn-dark:hover { background: var(--ink-soft); }
.btn-outline { background: transparent; color: var(--ink); border-color: var(--ink); }
.btn-outline:hover { background: var(--ink); color: var(--white); }
.btn-outline-light { background: transparent; color: var(--white); border-color: rgba(255,255,255,0.4); }
.btn-outline-light:hover { border-color: var(--white); background: rgba(255,255,255,0.1); }
.btn-danger { background: transparent; color: var(--critical); border-color: var(--critical); }
.btn-danger:hover { background: var(--critical); color: var(--white); }
.btn-lg { padding: 1.6rem 4rem; font-size: 1.6rem; }
.btn-sm { padding: 0.8rem 2rem; font-size: 1.2rem; }
.btn-text {
  background: none; border: none; color: var(--signal); padding: 0;
  font-family: var(--display); font-weight: 600; font-size: 1.4rem;
  cursor: pointer; text-decoration: underline; text-underline-offset: 3px;
}
.btn-text:hover { color: var(--signal-dark); }
.btn:disabled { opacity: 0.4; cursor: not-allowed; }

/* ============================================================
   STAT STRIP
   ============================================================ */
.stat-strip { display: grid; grid-template-columns: repeat(5, 1fr); gap: 2px; }
.stat-item { padding: 4rem 3.2rem; background: var(--dark-surface); }
.stat-value {
  font-family: var(--display); font-size: 4.8rem; font-weight: 800;
  letter-spacing: -0.02em; line-height: 1; color: var(--signal);
}
.stat-label {
  font-family: var(--display); font-size: 1.2rem; font-weight: 600;
  text-transform: uppercase; letter-spacing: 0.1em; color: var(--dark-muted); margin-top: 0.8rem;
}

/* ============================================================
   CARDS
   ============================================================ */
.card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(30rem, 1fr)); gap: 2px; }
.card {
  padding: 3.2rem; background: var(--white); border: 2px solid var(--border);
  cursor: pointer; transition: all 0.15s; position: relative;
}
.card:hover { border-color: var(--signal); background: var(--signal-10); }
.card-selected { border-color: var(--signal); background: var(--signal-10); }
.card-title { font-family: var(--display); font-size: 1.8rem; font-weight: 700; margin-bottom: 0.8rem; }
.card-desc { font-size: 1.4rem; color: var(--ink-muted); line-height: 1.5; }

.arch-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; }
.arch-card {
  padding: 3.2rem; background: var(--dark-surface); cursor: pointer;
  transition: background 0.2s; border: 2px solid transparent;
}
.arch-card:hover { background: #222; border-color: var(--signal); }
.arch-card.selected { border-color: var(--signal); background: rgba(8,145,178,0.15); }
.arch-card-name { font-family: var(--display); font-size: 2rem; font-weight: 700; color: var(--white); margin-bottom: 0.4rem; }
.arch-card-tagline { font-family: var(--display); font-size: 1.4rem; font-weight: 600; color: var(--signal); margin-bottom: 1.2rem; }
.arch-card-desc { font-size: 1.4rem; color: var(--dark-muted); line-height: 1.5; }
.arch-card-list { list-style: none; margin-top: 1.2rem; }
.arch-card-list li { font-size: 1.3rem; color: var(--dark-muted); padding: 0.3rem 0; padding-left: 1.2rem; position: relative; }
.arch-card-list li::before { content: '\2022'; position: absolute; left: 0; color: var(--signal); }

/* ============================================================
   RISK TIER BADGES
   ============================================================ */
.tier-badge {
  font-family: var(--display); font-size: 1.1rem; font-weight: 700;
  padding: 0.4rem 1rem; letter-spacing: 0.06em; display: inline-block;
  text-transform: uppercase;
}
.tier-high { background: var(--risk-high-bg); color: var(--risk-high); }
.tier-medium { background: var(--risk-medium-bg); color: var(--risk-medium); }
.tier-lower { background: var(--risk-lower-bg); color: var(--risk-lower); }

.pillar-badge {
  font-family: var(--display); font-size: 1rem; font-weight: 700;
  padding: 0.2rem 0.6rem; color: var(--white); display: inline-block; margin-right: 0.4rem;
}

/* ============================================================
   ASSESSMENT INTERFACE
   ============================================================ */
.assess-container {
  min-height: calc(100vh - 6rem); display: flex; flex-direction: column;
  align-items: center; justify-content: flex-start; padding: 6rem;
  background: var(--white);
}
.assess-inner { max-width: 72rem; width: 100%; }
.assess-progress { margin-bottom: 3.2rem; }
.assess-progress-header {
  display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.2rem;
}
.assess-progress-bar { height: 4px; background: var(--surface); width: 100%; }
.assess-progress-fill { height: 100%; background: var(--signal); transition: width 0.4s ease; }
.assess-nav { display: flex; justify-content: space-between; align-items: center; margin-top: 4.8rem; }

.assess-option {
  padding: 1.8rem 2.4rem; border: 2px solid var(--border); background: var(--white);
  font-family: var(--display); font-size: 1.5rem; font-weight: 600; color: var(--ink-soft);
  cursor: pointer; transition: all 0.15s; text-align: left;
  display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;
}
.assess-option:hover { border-color: var(--signal); background: var(--signal-10); }
.assess-option.selected { border-color: var(--signal); background: var(--signal-10); color: var(--signal-dark); }
.assess-option.selected::after { content: '\2713'; color: var(--signal); font-weight: 800; }

/* Score buttons */
.score-options { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.6rem; margin: 3.2rem 0; }
.score-btn {
  padding: 2.4rem; border: 2px solid var(--border); background: var(--white);
  cursor: pointer; transition: all 0.15s; text-align: left;
}
.score-btn:hover { border-color: var(--signal); }
.score-btn.selected { border-color: var(--signal); background: var(--signal-10); }
.score-btn-num {
  font-family: var(--display); font-size: 3.2rem; font-weight: 800; margin-bottom: 0.8rem;
}
.score-btn-text { font-size: 1.3rem; color: var(--ink-muted); line-height: 1.5; }

/* ============================================================
   QUESTION TABLE
   ============================================================ */
.q-table { margin: 2.4rem 0; }
.q-row {
  padding: 2rem 0; border-bottom: 1px solid var(--border);
  display: grid; grid-template-columns: 4rem 1fr; gap: 1.6rem;
}
.q-num { font-family: var(--display); font-size: 1.4rem; font-weight: 700; color: var(--signal); }
.q-text { font-size: 1.5rem; font-weight: 600; margin-bottom: 0.6rem; }
.q-guidance { font-size: 1.3rem; color: var(--ink-muted); line-height: 1.5; }

/* ============================================================
   ALERTS & BANNERS
   ============================================================ */
.alert {
  padding: 2.4rem; margin: 2rem 0; border-left: 4px solid;
}
.alert-go { border-color: var(--live); background: #f0fdf4; }
.alert-pause { border-color: var(--caution); background: #fffbeb; }
.alert-nogo { border-color: var(--critical); background: #fef2f2; }
.alert-title {
  font-family: var(--display); font-size: 1.6rem; font-weight: 700; margin-bottom: 0.8rem;
}
.alert-go .alert-title { color: var(--live); }
.alert-pause .alert-title { color: var(--caution); }
.alert-nogo .alert-title { color: var(--critical); }

.nogo-banner {
  padding: 2.4rem 3.2rem; background: #fef2f2; border: 2px solid var(--critical);
  margin-bottom: 2rem;
}
.nogo-banner-title {
  font-family: var(--display); font-size: 1.6rem; font-weight: 700;
  color: var(--critical); margin-bottom: 0.8rem;
}

/* ============================================================
   PROFILE / SUMMARY
   ============================================================ */
.profile-hero { padding: 10rem 6rem 6rem; background: var(--dark); color: var(--white); }
.profile-hero-inner { max-width: 120rem; margin: 0 auto; }

.pillar-row {
  display: grid; grid-template-columns: 6px 1fr; margin-bottom: 2px;
  background: var(--white); transition: background 0.15s;
}
.pillar-row:hover { background: var(--surface); }
.pillar-bar { width: 6px; }
.pillar-info {
  padding: 2rem 3.2rem; display: grid;
  grid-template-columns: 3rem 1fr 6rem 8rem; gap: 2rem; align-items: center;
}
.pillar-id { font-family: var(--display); font-size: 1.4rem; font-weight: 700; color: var(--ink-muted); }
.pillar-name-cell { }
.pillar-name { font-family: var(--display); font-size: 1.5rem; font-weight: 700; }
.pillar-principle { font-size: 1.2rem; color: var(--ink-muted); font-style: italic; margin-top: 0.2rem; }
.pillar-score {
  font-family: var(--display); font-size: 2.4rem; font-weight: 800; text-align: center;
}
.pillar-status { font-family: var(--display); font-size: 1.1rem; font-weight: 600; text-align: right; }
.humans-badge {
  font-family: var(--display); font-size: 1rem; font-weight: 700; padding: 0.2rem 0.5rem;
  background: var(--signal-10); color: var(--signal-dark); margin-left: 0.8rem;
}

.pattern-card {
  padding: 2.4rem; background: var(--surface); margin-bottom: 1.2rem; border-left: 4px solid var(--signal);
}
.pattern-title { font-family: var(--display); font-size: 1.5rem; font-weight: 700; margin-bottom: 0.6rem; }
.pattern-desc { font-size: 1.4rem; color: var(--ink-soft); line-height: 1.5; margin-bottom: 0.6rem; }
.pattern-action { font-size: 1.4rem; font-weight: 600; color: var(--signal-dark); }

/* ============================================================
   ROADMAP
   ============================================================ */
.roadmap-section { margin-bottom: 4.8rem; }
.roadmap-section-title {
  font-family: var(--display); font-size: 2rem; font-weight: 700;
  margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid var(--border);
}
.roadmap-list { list-style: none; }
.roadmap-list li {
  padding: 1.2rem 0; padding-left: 2.4rem; position: relative;
  font-size: 1.5rem; border-bottom: 1px solid var(--surface);
}
.roadmap-list li::before {
  content: ''; position: absolute; left: 0; top: 1.8rem;
  width: 1rem; height: 1rem; border: 2px solid var(--signal); background: var(--white);
}
.raci-table { width: 100%; border-collapse: collapse; font-size: 1.3rem; margin: 2rem 0; }
.raci-table th {
  font-family: var(--display); font-weight: 700; text-transform: uppercase;
  letter-spacing: 0.08em; font-size: 1.1rem; padding: 1.2rem 1.6rem;
  background: var(--surface); text-align: left; border-bottom: 2px solid var(--border);
}
.raci-table td { padding: 1.2rem 1.6rem; border-bottom: 1px solid var(--border); }

/* ============================================================
   NO-GO CHECKLIST
   ============================================================ */
.nogo-item {
  padding: 2rem 2.4rem; margin-bottom: 1.2rem; background: var(--white);
  border: 2px solid var(--border); transition: all 0.15s;
}
.nogo-item.flagged { border-color: var(--critical); background: #fef2f2; }
.nogo-item.clear { border-color: var(--live); background: #f0fdf4; }
.nogo-statement { font-family: var(--display); font-size: 1.5rem; font-weight: 700; margin-bottom: 0.8rem; }
.nogo-why { font-size: 1.3rem; color: var(--ink-muted); line-height: 1.5; margin-bottom: 1.2rem; }
.nogo-options { display: flex; gap: 1rem; }
.nogo-opt {
  padding: 0.8rem 2rem; border: 2px solid var(--border); background: var(--white);
  font-family: var(--display); font-size: 1.3rem; font-weight: 600; cursor: pointer;
  transition: all 0.15s;
}
.nogo-opt:hover { border-color: var(--signal); }
.nogo-opt.selected-yes { border-color: var(--live); background: #f0fdf4; color: var(--live); }
.nogo-opt.selected-no { border-color: var(--critical); background: #fef2f2; color: var(--critical); }

/* ============================================================
   HOW IT WORKS STEPS
   ============================================================ */
.steps-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 2px; margin-top: 4rem; }
.step-card { padding: 3.2rem 2.4rem; background: var(--white); }
.step-num {
  font-family: var(--display); font-size: 4rem; font-weight: 800;
  color: var(--signal); line-height: 1; margin-bottom: 1.2rem;
}
.step-label { font-family: var(--display); font-size: 1.6rem; font-weight: 700; margin-bottom: 0.8rem; }
.step-desc { font-size: 1.3rem; color: var(--ink-muted); line-height: 1.5; }

/* ============================================================
   ABOUT
   ============================================================ */
.about-section { margin-bottom: 4.8rem; }
.about-section-title {
  font-family: var(--display); font-size: 2.4rem; font-weight: 700;
  margin-bottom: 2rem;
}
.source-list { list-style: none; }
.source-list li {
  padding: 0.8rem 0; padding-left: 1.6rem; position: relative;
  font-size: 1.4rem; color: var(--ink-soft);
}
.source-list li::before { content: '\2022'; position: absolute; left: 0; color: var(--signal); }

/* ============================================================
   DEPENDENCY PROFILE
   ============================================================ */
.dep-badge {
  font-family: var(--display); font-size: 1.1rem; font-weight: 700;
  padding: 0.4rem 1rem; letter-spacing: 0.06em; display: inline-block;
  text-transform: uppercase;
}
.dep-low { background: var(--risk-lower-bg); color: var(--risk-lower); }
.dep-medium { background: var(--risk-medium-bg); color: var(--risk-medium); }
.dep-high { background: var(--risk-high-bg); color: var(--risk-high); }

.dep-question-card {
  padding: 2.4rem; margin-bottom: 2rem; background: var(--white);
  border: 2px solid var(--border); transition: all 0.15s;
}
.dep-question-card.answered { border-color: var(--signal); }
.dep-q-label {
  font-family: var(--display); font-size: 1.2rem; font-weight: 700;
  color: var(--signal); text-transform: uppercase; letter-spacing: 0.08em;
  margin-bottom: 0.6rem;
}
.dep-q-text {
  font-family: var(--display); font-size: 1.8rem; font-weight: 700;
  margin-bottom: 1.6rem; line-height: 1.3;
}
.dep-option {
  padding: 1.6rem; border: 2px solid var(--border); background: var(--white);
  cursor: pointer; transition: all 0.15s; margin-bottom: 0.8rem;
}
.dep-option:hover { border-color: var(--signal); background: var(--signal-10); }
.dep-option.selected { border-color: var(--signal); background: var(--signal-10); }
.dep-option-header {
  display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.6rem;
}
.dep-option-label { font-family: var(--display); font-size: 1.5rem; font-weight: 600; }
.dep-option-score {
  font-family: var(--display); font-size: 1.3rem; font-weight: 700;
  color: var(--ink-muted); background: var(--surface); padding: 0.2rem 0.8rem;
}
.dep-option-desc { font-size: 1.3rem; color: var(--ink-soft); line-height: 1.5; }
.dep-option-guidance {
  font-size: 1.2rem; color: var(--ink-muted); line-height: 1.5;
  margin-top: 0.8rem; padding-top: 0.8rem; border-top: 1px solid var(--surface);
  font-style: italic;
}
.dep-running-score {
  font-family: var(--display); font-size: 1.4rem; font-weight: 600;
  color: var(--signal); padding: 1.2rem 0; text-align: right;
}
.dep-result {
  padding: 3.2rem; margin-top: 2.4rem; border: 2px solid; text-align: center;
}
.dep-result-low { border-color: var(--live); background: #f0fdf4; }
.dep-result-medium { border-color: var(--caution); background: #fffbeb; }
.dep-result-high { border-color: var(--critical); background: #fef2f2; }

.dep-gov-section {
  padding: 2.4rem; margin-bottom: 1.2rem; border-left: 4px solid var(--accent);
  background: var(--accent-light);
}

/* ============================================================
   LOADING
   ============================================================ */
.loading-container {
  min-height: calc(100vh - 6rem); display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  background: var(--dark); color: var(--white); gap: 3.2rem;
}
.loading-spinner {
  width: 4.8rem; height: 4.8rem; border: 3px solid var(--dark-border);
  border-top-color: var(--signal); border-radius: 50%;
  animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ============================================================
   NOTES INPUT
   ============================================================ */
.notes-input {
  width: 100%; padding: 1.2rem; border: 1px solid var(--border);
  font-family: var(--body); font-size: 1.4rem; resize: vertical;
  min-height: 6rem; margin-top: 1.6rem;
}
.notes-input:focus { outline: none; border-color: var(--signal); }

/* ============================================================
   PRINT
   ============================================================ */
@media print {
  .nav, .btn, .assess-nav, .nav-right, .no-print { display: none !important; }
  .view { display: none !important; padding-top: 0; }
  .view.print-target { display: block !important; }
  .section { padding: 2rem; }
  .profile-hero { padding: 2rem; }
  body { font-size: 10pt; }
  .display-xl { font-size: 2.4rem; }
  .display-lg { font-size: 2rem; }
  .display-md { font-size: 1.8rem; }
}

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media (max-width: 768px) {
  .nav { padding: 0 2.4rem; }
  .section { padding: 6rem 2.4rem; }
  .display-xl { font-size: 4.2rem; }
  .display-lg { font-size: 3.2rem; }
  .display-md { font-size: 2.4rem; }
  .stat-strip { grid-template-columns: repeat(3, 1fr); }
  .stat-strip .stat-item:nth-child(4),
  .stat-strip .stat-item:nth-child(5) { display: none; }
  .arch-grid { grid-template-columns: 1fr; }
  .card-grid { grid-template-columns: 1fr; }
  .steps-grid { grid-template-columns: 1fr; }
  .assess-container { padding: 4rem 2.4rem; }
  .score-options { grid-template-columns: 1fr; }
  .pillar-info { grid-template-columns: 3rem 1fr 4rem; }
  .pillar-status { display: none; }
  .profile-hero { padding: 8rem 2.4rem 4rem; }
  .raci-table { font-size: 1.1rem; }
  .raci-table th, .raci-table td { padding: 0.8rem; }
}

/* ============================================================
   ROUTING QUESTIONNAIRE (Step 0)
   ============================================================ */
.routing-option {
  padding: 1.8rem 2.4rem; border: 2px solid var(--border); background: var(--white);
  font-family: var(--display); font-size: 1.5rem; font-weight: 600; color: var(--ink-soft);
  cursor: pointer; transition: all 0.15s; text-align: left;
  display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;
}
.routing-option:hover { border-color: var(--signal); background: var(--signal-10); }
.routing-option.selected { border-color: var(--signal); background: var(--signal-10); color: var(--signal-dark); }
.routing-option.selected::after { content: '\2713'; color: var(--signal); font-weight: 800; }
.routing-option.disabled {
  opacity: 0.4; cursor: not-allowed; pointer-events: none;
  border-color: var(--border); background: var(--surface);
}
.routing-multi-hint {
  font-family: var(--display); font-size: 1.2rem; font-weight: 600;
  color: var(--signal); margin-bottom: 1.6rem;
}

/* Routing Results */
.routing-result-card {
  padding: 3.2rem; border: 2px solid var(--border); background: var(--white);
  margin-bottom: 2rem; transition: border-color 0.15s;
}
.routing-result-card:hover { border-color: var(--signal); }
.routing-result-rank {
  font-family: var(--display); font-size: 1.2rem; font-weight: 700;
  text-transform: uppercase; letter-spacing: 0.12em; color: var(--signal);
  margin-bottom: 0.8rem;
}
.routing-result-name {
  font-family: var(--display); font-size: 2rem; font-weight: 700;
  color: var(--ink); margin-bottom: 0.4rem;
}
.routing-result-oneliner {
  font-size: 1.4rem; color: var(--ink-muted); margin-bottom: 1.6rem;
}
.routing-why-fits {
  font-size: 1.4rem; color: var(--ink-soft); line-height: 1.6;
  padding: 1.6rem; background: var(--signal-10); border-left: 3px solid var(--signal);
  margin-bottom: 1.6rem;
}
.routing-result-meta {
  display: flex; gap: 1.2rem; align-items: center; flex-wrap: wrap; margin-bottom: 1.6rem;
}

/* Consider Later section */
.routing-consider-later .routing-result-card {
  opacity: 0.7; border-color: var(--surface);
}
.routing-consider-later .routing-result-rank { color: var(--ink-muted); }
.routing-consider-later .routing-why-fits {
  background: var(--surface); border-left-color: var(--mid);
}

/* Data Readiness indicators */
.data-readiness {
  display: inline-flex; align-items: center; gap: 0.4rem;
  font-family: var(--display); font-size: 1.1rem; font-weight: 700;
  padding: 0.3rem 1rem; letter-spacing: 0.06em; text-transform: uppercase;
}
.data-readiness::before {
  content: ''; width: 0.8rem; height: 0.8rem; border-radius: 50%;
}
.data-readiness-green { color: var(--live); }
.data-readiness-green::before { background: var(--live); }
.data-readiness-yellow { color: var(--risk-medium); }
.data-readiness-yellow::before { background: var(--caution); }
.data-readiness-red { color: var(--critical); }
.data-readiness-red::before { background: var(--critical); }

/* Routing Institutional Profile */
.routing-profile {
  background: var(--dark); color: var(--white); padding: 3.2rem;
  margin-top: 3.2rem;
}
.routing-profile-title {
  font-family: var(--display); font-size: 1.8rem; font-weight: 700;
  margin-bottom: 2rem;
}
.routing-profile-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(20rem, 1fr)); gap: 2rem;
}
.routing-profile-item {
  padding: 1.6rem; background: var(--dark-surface); border: 1px solid var(--dark-border);
}
.routing-profile-label {
  font-family: var(--display); font-size: 1.1rem; font-weight: 700;
  text-transform: uppercase; letter-spacing: 0.1em; color: var(--dark-muted);
  margin-bottom: 0.6rem;
}
.routing-profile-value {
  font-family: var(--display); font-size: 1.6rem; font-weight: 700;
}

/* ============================================================
   UTILITY
   ============================================================ */
.mt-1 { margin-top: 0.8rem; } .mt-2 { margin-top: 1.6rem; } .mt-3 { margin-top: 2.4rem; } .mt-4 { margin-top: 3.2rem; }
.mb-1 { margin-bottom: 0.8rem; } .mb-2 { margin-bottom: 1.6rem; } .mb-3 { margin-bottom: 2.4rem; }
.text-muted { color: var(--ink-muted); } .text-signal { color: var(--signal); }
.text-center { text-align: center; }
</style>
</head>
<body>

<!-- ============================================================
     NAV
     ============================================================ -->
<nav class="nav" id="main-nav">
  <div class="nav-logo" onclick="navigate('landing')">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 172.97 142.95" style="width: 28px; height: auto;">
      <defs><style>.cls-1{font-family:Switzer-SemiboldItalic,Switzer,Arial,sans-serif;font-size:130.25px;font-style:italic;font-weight:600;fill:currentColor;}.cls-2{letter-spacing:-.02em;}.cls-3{letter-spacing:-.04em;}</style></defs>
      <text class="cls-1" transform="translate(0 112.21)"><tspan class="cls-3" x="0" y="0">F</tspan><tspan class="cls-2" x="70.47" y="0">O</tspan></text>
    </svg>
    Navigator
  </div>
  <div class="nav-right">
    <button class="nav-link" onclick="navigate('about')">About</button>
    <label class="ca-toggle" title="Show CCCCO HUMANS Framework mapping">
      <input type="checkbox" id="ca-toggle" onchange="toggleCalifornia(this.checked)"> CA
    </label>
    <button class="btn btn-primary btn-sm" onclick="startRouting()">Get Started</button>
  </div>
</nav>

<!-- ============================================================
     VIEW: LANDING
     ============================================================ -->
<div class="view active" id="view-landing">
  <div class="section section-dark" style="padding: 16rem 6rem 10rem;">
    <div class="section-inner">
      <div class="label" style="color: var(--signal); margin-bottom: 2.4rem;">224+ Scanned. 14 Deeply Analyzed. Built for Community Colleges.</div>
      <div class="display-xl" style="max-width: 80rem; margin-bottom: 3.2rem;" id="hero-headline"></div>
      <div class="body-lg" style="color: var(--dark-muted); max-width: 52rem; margin-bottom: 4.8rem;" id="hero-subhead"></div>
      <div style="display: flex; gap: 1.6rem; align-items: center; flex-wrap: wrap;">
        <button class="btn btn-primary btn-lg" onclick="startRouting()" id="cta-routing">Help Me Choose</button>
        <button class="btn btn-outline-light btn-lg" onclick="navigate('use-case')" id="cta-full"></button>
        <button class="btn btn-outline-light btn-lg" onclick="navigate('archetype')" id="cta-quick"></button>
      </div>
    </div>
  </div>

  <!-- STAT STRIP -->
  <div class="stat-strip" id="stat-strip"></div>

  <!-- HOW IT WORKS -->
  <div class="section section-surface">
    <div class="section-inner">
      <div class="label" style="color: var(--signal); margin-bottom: 1.6rem;">The Process</div>
      <div class="display-md" id="how-headline"></div>
      <div class="steps-grid" id="steps-grid"></div>
    </div>
  </div>

  <!-- ARCHETYPE QUICK-START -->
  <div class="section section-dark">
    <div class="section-inner" style="margin-bottom: 4rem;">
      <div class="label" style="color: var(--signal); margin-bottom: 1.6rem;">Know Your Institution?</div>
      <div class="display-md" style="margin-bottom: 1.6rem;">Start with your archetype.</div>
      <div style="color: var(--dark-muted); max-width: 56rem; margin-bottom: 4rem;">Select the profile that sounds most like your college. This pre-configures the assessment for your institutional context.</div>
    </div>
    <div class="arch-grid" id="landing-archetypes"></div>
  </div>

  <!-- CREDIBILITY -->
  <div class="section" style="text-align: center;">
    <div class="section-inner" style="max-width: 72rem;">
      <div class="display-lg" style="margin-bottom: 3.2rem;">The first AI governance tool that meets colleges where they are.</div>
      <div class="body-lg" style="color: var(--ink-muted); max-width: 56rem; margin: 0 auto;" id="credibility-text"></div>
    </div>
  </div>
</div>

<!-- ============================================================
     VIEW: ROUTING QUESTIONNAIRE (Step 0)
     ============================================================ -->
<div class="view" id="view-routing">
  <div class="assess-container">
    <div class="assess-inner">
      <div class="assess-progress">
        <div class="assess-progress-header">
          <span class="label" style="color: var(--ink-muted);" id="routing-step"></span>
          <span class="label" style="color: var(--signal);" id="routing-pct"></span>
        </div>
        <div class="assess-progress-bar"><div class="assess-progress-fill" id="routing-fill"></div></div>
      </div>
      <div id="routing-content"></div>
      <div class="assess-nav">
        <button class="btn btn-outline" id="routing-back" onclick="routingBack()">Back</button>
        <button class="btn btn-primary btn-lg" id="routing-next" onclick="routingNext()" disabled>Next</button>
      </div>
    </div>
  </div>
</div>

<!-- ============================================================
     VIEW: ROUTING RESULTS
     ============================================================ -->
<div class="view" id="view-routing-results">
  <div class="assess-container" style="justify-content: flex-start; padding-top: 8rem;">
    <div class="assess-inner" style="max-width: 80rem;">
      <div id="routing-results-content"></div>
    </div>
  </div>
</div>

<!-- ============================================================
     VIEW: ARCHETYPE SELECTOR
     ============================================================ -->
<div class="view" id="view-archetype">
  <div class="assess-container">
    <div class="assess-inner">
      <div class="label" style="color: var(--signal); margin-bottom: 1.6rem;">Quick Path</div>
      <div class="display-md" style="margin-bottom: 1.2rem;">Which sounds like your institution?</div>
      <div style="color: var(--ink-muted); margin-bottom: 4rem;">This pre-configures the assessment for your context. You can change it later.</div>
      <div id="archetype-cards"></div>
      <div class="assess-nav">
        <button class="btn btn-outline" onclick="navigate('landing')">Back</button>
        <button class="btn btn-primary btn-lg" id="arch-next-btn" onclick="selectArchetypeAndContinue()" disabled>Continue to Use Cases</button>
      </div>
    </div>
  </div>
</div>

<!-- ============================================================
     VIEW: USE CASE SELECTOR
     ============================================================ -->
<div class="view" id="view-use-case">
  <div class="assess-container" style="justify-content: flex-start; padding-top: 10rem;">
    <div class="assess-inner" style="max-width: 96rem;">
      <div class="label" style="color: var(--signal); margin-bottom: 1.6rem;">Step 1: Identify</div>
      <div class="display-md" style="margin-bottom: 1.2rem;">What Student Services AI use case are you considering?</div>
      <div style="color: var(--ink-muted); margin-bottom: 4rem;">Select one. Each has tailored screening questions and governance requirements.</div>
      <div class="card-grid" id="use-case-cards"></div>
      <div class="assess-nav" style="margin-top: 3.2rem;">
        <button class="btn btn-outline" onclick="navigate(state.entryPath === 'quick' ? 'archetype' : state.entryPath === 'routing' ? 'routing-results' : 'landing')">Back</button>
        <button class="btn btn-primary btn-lg" id="uc-next-btn" onclick="selectUseCaseAndContinue()" disabled>Continue to Screening</button>
      </div>
    </div>
  </div>
</div>

<!-- ============================================================
     VIEW: SCREENING
     ============================================================ -->
<div class="view" id="view-screening">
  <div class="assess-container">
    <div class="assess-inner">
      <div class="assess-progress">
        <div class="assess-progress-header">
          <span class="label" style="color: var(--ink-muted);" id="screen-step"></span>
          <span class="label" style="color: var(--signal);" id="screen-pct"></span>
        </div>
        <div class="assess-progress-bar"><div class="assess-progress-fill" id="screen-fill"></div></div>
      </div>
      <div id="screening-content"></div>
      <div class="assess-nav">
        <button class="btn btn-outline" id="screen-back" onclick="screenBack()">Back</button>
        <button class="btn btn-primary btn-lg" id="screen-next" onclick="screenNext()">Next</button>
      </div>
    </div>
  </div>
</div>

<!-- ============================================================
     VIEW: SCREENING RESULT
     ============================================================ -->
<div class="view" id="view-screen-result">
  <div class="assess-container">
    <div class="assess-inner">
      <div id="screen-result-content"></div>
    </div>
  </div>
</div>

<!-- ============================================================
     VIEW: DEPENDENCY PROFILE (View 3b)
     ============================================================ -->
<div class="view" id="view-dependency">
  <div class="assess-container" style="justify-content: flex-start; padding-top: 8rem;">
    <div class="assess-inner" style="max-width: 80rem;">
      <div class="assess-progress">
        <div class="assess-progress-header">
          <span class="label" style="color: var(--ink-muted);">Understanding Dependency</span>
          <span class="label" style="color: var(--signal);" id="dep-running"></span>
        </div>
        <div class="assess-progress-bar"><div class="assess-progress-fill" id="dep-fill" style="width: 0%;"></div></div>
      </div>
      <div id="dependency-content"></div>
      <div class="assess-nav" style="margin-top: 3.2rem;">
        <button class="btn btn-outline" onclick="navigate('screen-result')">Back</button>
        <button class="btn btn-primary btn-lg" id="dep-next" onclick="proceedFromDependency()" disabled>Continue to Risk Tier</button>
      </div>
    </div>
  </div>
</div>

<!-- ============================================================
     VIEW: RISK TIER
     ============================================================ -->
<div class="view" id="view-risk-tier">
  <div class="assess-container">
    <div class="assess-inner">
      <div class="label" style="color: var(--signal); margin-bottom: 1.6rem;">Risk Classification</div>
      <div class="display-md" style="margin-bottom: 1.2rem;" id="risk-tier-title"></div>
      <div style="color: var(--ink-muted); margin-bottom: 3.2rem;" id="risk-tier-desc"></div>
      <div id="risk-tier-cards"></div>
      <div style="margin-top: 2.4rem; display: none;" id="override-reason-box">
        <label style="font-family: var(--display); font-size: 1.3rem; font-weight: 600;">Override reason (required):</label>
        <textarea class="notes-input" id="override-reason" placeholder="Explain why you're changing the risk tier..." style="margin-top: 0.8rem;"></textarea>
      </div>
      <div class="assess-nav">
        <button class="btn btn-outline" onclick="navigate('dependency')">Back</button>
        <button class="btn btn-primary btn-lg" onclick="confirmRiskTier()">Continue to Scoring</button>
      </div>
    </div>
  </div>
</div>

<!-- ============================================================
     VIEW: PILLAR SCORING
     ============================================================ -->
<div class="view" id="view-scoring">
  <div class="assess-container" style="justify-content: flex-start; padding-top: 8rem;">
    <div class="assess-inner" style="max-width: 80rem;">
      <div class="assess-progress">
        <div class="assess-progress-header">
          <span class="label" style="color: var(--ink-muted);" id="score-step"></span>
          <span class="label" style="color: var(--signal);" id="score-pct"></span>
        </div>
        <div class="assess-progress-bar"><div class="assess-progress-fill" id="score-fill"></div></div>
      </div>
      <div id="scoring-content"></div>
      <div class="assess-nav">
        <button class="btn btn-outline" id="score-back" onclick="scoreBack()">Back</button>
        <span></span>
        <button class="btn btn-primary btn-lg" id="score-next" onclick="scoreNext()">Next Pillar</button>
      </div>
    </div>
  </div>
</div>

<!-- ============================================================
     VIEW: NO-GO CHECKLIST
     ============================================================ -->
<div class="view" id="view-nogo">
  <div class="assess-container" style="justify-content: flex-start; padding-top: 8rem;">
    <div class="assess-inner" style="max-width: 80rem;">
      <div class="label" style="color: var(--critical); margin-bottom: 1.6rem;">Step 2b: Check the Lines</div>
      <div class="display-md" style="margin-bottom: 1.2rem;">Eight hard stops.</div>
      <div style="color: var(--ink-muted); margin-bottom: 3.2rem;">These are the lines. Everything else, we can work with. Answer each one honestly.</div>
      <div id="nogo-checklist"></div>
      <div class="assess-nav" style="margin-top: 3.2rem;">
        <button class="btn btn-outline" onclick="goBackToLastPillar()">Back to Scoring</button>
        <button class="btn btn-primary btn-lg" id="nogo-next" onclick="finishNoGo()">View Governance Profile</button>
      </div>
    </div>
  </div>
</div>

<!-- ============================================================
     VIEW: GOVERNANCE PROFILE
     ============================================================ -->
<div class="view" id="view-profile">
  <div id="profile-content"></div>
</div>

<!-- ============================================================
     VIEW: ROADMAP
     ============================================================ -->
<div class="view" id="view-roadmap">
  <div id="roadmap-content"></div>
</div>

<!-- ============================================================
     VIEW: ABOUT
     ============================================================ -->
<div class="view" id="view-about">
  <div class="section section-dark" style="padding: 14rem 6rem 6rem;">
    <div class="section-inner">
      <div class="label" style="color: var(--signal); margin-bottom: 2.4rem;">About This Tool</div>
      <div class="display-lg">AI Governance Navigator</div>
      <div class="body-lg" style="color: var(--dark-muted); max-width: 56rem; margin-top: 2rem;">A governance tool built for the institutions that need it most.</div>
    </div>
  </div>
  <div class="section">
    <div class="section-inner" style="max-width: 80rem;" id="about-content"></div>
  </div>
</div>

<!-- ============================================================
     VIEW: LOADING
     ============================================================ -->
<div class="view" id="view-loading">
  <div class="loading-container">
    <div class="loading-spinner"></div>
    <div class="display-sm" style="text-align: center;">Building your governance profile</div>
    <div style="color: var(--dark-muted); font-size: 1.4rem;">Analyzing your scores against nine governance pillars&hellip;</div>
  </div>
</div>


<!-- ============================================================
     JAVASCRIPT
     ============================================================ -->
<script>
/* ============================================================
   STATE
   ============================================================ */
var state = {
  entryPath: 'full',
  archetype: null,
  useCase: null,
  screeningAnswers: {},
  screeningResult: null,
  screeningFlags: [],
  currentScreenQ: 0,
  dependencyProfile: {
    answers: { D1: null, D2: null, D3: null, D4: null },
    totalScore: null,
    profile: null
  },
  riskTier: null,
  riskTierOverride: false,
  riskTierOverrideReason: '',
  currentPillar: 0,
  pillarScores: {},
  pillarNotes: {},
  noGoAnswers: {},
  noGoFlags: [],
  toolName: '',
  isCalifornia: false,
  institutionName: '',
  assessmentDate: new Date().toISOString().split('T')[0],
  routingAnswers: { q1: [], q2: null, q3: null, q4: null, q5: [], q6: null, q7: null, q8: null },
  routingResults: null,
  currentRoutingQ: 0
};

/* ============================================================
   CONTENT DATA (inlined from navigator-v2-content.json)
   ============================================================ */
var CONTENT = null;

/* Inline the full content JSON as fallback */
var INLINE_CONTENT = {"meta":{"version":"2.0","scope":"Student Services","last_updated":"2026-02-21"},"landing":{"hero_headline":"Navigate AI governance.\nBuilt for Student Services.","hero_subhead":"The first AI governance tool designed for community colleges. Answer a few questions about the AI tool you're considering \u2014 in a few minutes, you'll have a governance roadmap tailored to your institution.","cta_routing":"Help Me Choose","cta_full_path":"I Know What I Need","cta_quick_path":"I Know My Institution","how_it_works":{"headline":"How It Works","steps":[{"number":1,"label":"Tell Us About Your College","description":"Answer 8 questions about your institution. We\u0027ll recommend 2\u20133 use cases ranked by fit for your context."},{"number":2,"label":"Screen Your Use Case","description":"A few screening questions check whether the basics are in place. Get a GO, PAUSE, or NO-GO recommendation."},{"number":3,"label":"Evaluate Governance","description":"Score your tool against nine governance pillars and eight hard-stop no-go criteria."},{"number":4,"label":"Get Your Profile","description":"Your governance profile shows score patterns, risk flags, and what they mean for your institution."},{"number":5,"label":"Get Your Roadmap","description":"A step-by-step governance plan \u2014 pre-deployment requirements, who\u0027s involved, what to measure, when to review."}]},"stat_strip":[{"number":"224+","label":"Frameworks Scanned"},{"number":"14","label":"Deeply Analyzed"},{"number":"10","label":"Student Services Use Cases"},{"number":"9","label":"Governance Pillars"},{"number":"3","label":"Implementation Paths"}],"credibility_statement":"We scanned 224+ AI governance frameworks so you don\u0027t have to. 14 made the cut for deep analysis. Every recommendation traces back to specific provisions, cross-referenced and tested for community college feasibility. Designed to complement the CCCCO HUMANS Framework. Scoped exclusively to Student Services."},"use_cases":[{"id":"SS-01","name":"AI Advising / Guided Pathways Assistant","one_liner":"AI that recommends courses, pathways, or programs to students.","description":"Tools like EAB Navigate, Civitas, or institutional guided pathways assistants that recommend academic plans, flag pathway misalignment, or suggest course sequences. These directly influence student trajectory.","default_risk_tier":3,"key_pillars":["P1","P2","P3","P5"],"equity_flag":"Recommendations affect student trajectory. Errors compound for first-gen and Pell-eligible students. Pathway bias across career clusters.","screening_questions":[{"question":"Does this tool make or influence decisions about which courses, pathways, or programs a student should pursue?","options":[{"label":"Yes \u2014 it recommends or auto-assigns pathways","value":"consequential","logic":"go"},{"label":"No \u2014 it provides general information only","value":"informational","logic":"go"}],"go_nogo_logic":"Yes confirms High risk tier"},{"question":"Has your institution identified a specific student journey friction point this tool addresses?","options":[{"label":"Yes, with institutional data","value":"data_backed","logic":"go"},{"label":"Yes, anecdotally","value":"anecdotal","logic":"go"},{"label":"No","value":"none","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE (no evidence of need)"},{"question":"Will a human counselor review AI pathway recommendations before they reach students?","options":[{"label":"Always","value":"always","logic":"go"},{"label":"Sometimes","value":"sometimes","logic":"pause"},{"label":"Never","value":"never","logic":"nogo"}],"go_nogo_logic":"Never \u2192 NO-GO"},{"question":"Has the vendor provided disaggregated accuracy data across student demographics (Pell, first-gen, multilingual)?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"Partial","value":"partial","logic":"pause"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE (equity risk unassessed)"},{"question":"Does the tool cover your full program catalog including CTE pathways, or is it optimized for transfer?","options":[{"label":"Full catalog","value":"full","logic":"go"},{"label":"Transfer-focused","value":"transfer","logic":"pause"},{"label":"Unknown","value":"unknown","logic":"pause"}],"go_nogo_logic":"Transfer-focused or Unknown \u2192 PAUSE"}],"governance_requirements_summary":"All 9 pillars scored. Human-in-the-loop required. Appeals process required. Bias audit before deployment and annually. Any pillar scoring 1 = documented mitigation or no-go."},{"id":"SS-02","name":"Early Alert / Student Risk System","one_liner":"AI that flags students as 'at risk' and triggers interventions.","description":"Systems like Starfish, EAB Navigate risk models, or institutional early alert tools that profile student risk and auto-trigger counselor outreach, hold alerts, or intervention workflows.","default_risk_tier":3,"key_pillars":["P2","P3","P5","P7"],"equity_flag":"Risk profiling creates surveillance dynamic. Disparate impact on students of color. Stigma from false positives.","screening_questions":[{"question":"Does this system flag individual students as 'at risk' and trigger interventions?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"go"}],"go_nogo_logic":"Yes confirms High risk tier"},{"question":"Can students see their own risk profile and contest it?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"pause"},{"label":"Unknown","value":"unknown","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE (transparency gap)"},{"question":"Has a differential impact analysis been done for false positive rates across demographics?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"Planned","value":"planned","logic":"pause"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE (15\u201330% false positive rates disproportionately flag ESL and disability populations)"},{"question":"Is there a defined escalation path when the system flags a student? Who contacts them? How?","options":[{"label":"Defined","value":"defined","logic":"go"},{"label":"Informal","value":"informal","logic":"pause"},{"label":"None","value":"none","logic":"nogo"}],"go_nogo_logic":"None \u2192 NO-GO"},{"question":"Does your institution have the counseling capacity to follow up on system-generated alerts?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"Strained","value":"strained","logic":"pause"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE (tool without capacity creates false accountability)"}],"governance_requirements_summary":"All 9 pillars scored. Disaggregated false-positive analysis required. Student notification and contestability mandatory."},{"id":"SS-03","name":"Financial Aid Triage & FAFSA Support","one_liner":"AI that assists with financial aid decisions or FAFSA guidance.","description":"Tools that triage financial aid applications, auto-verify eligibility, assist students with FAFSA completion, or prioritize aid distribution. Touches students' most sensitive financial data.","default_risk_tier":3,"key_pillars":["P3","P5","P6"],"equity_flag":"Automated decisions on access to resources. Errors disproportionately affect low-income students. Undocumented student data sensitivity.","screening_questions":[{"question":"Does this tool make decisions that affect whether a student receives financial aid?","options":[{"label":"Yes \u2014 it makes automated decisions","value":"automated","logic":"nogo"},{"label":"It recommends; humans decide","value":"recommends","logic":"go"},{"label":"No \u2014 information and guidance only","value":"info_only","logic":"go"}],"go_nogo_logic":"Automated decisions \u2192 NO-GO without human-in-the-loop"},{"question":"Does the tool access sensitive financial data (FAFSA, tax information, income verification)?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"go"}],"go_nogo_logic":"Yes confirms High risk, mandatory P6 emphasis"},{"question":"Is there a FERPA-compliant data sharing agreement with the vendor?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"In progress","value":"in_progress","logic":"pause"},{"label":"No","value":"no","logic":"nogo"}],"go_nogo_logic":"No \u2192 NO-GO"},{"question":"Can the tool handle the complexity of California financial aid (Cal Grant, AB 540, BOG waivers)?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"Partially","value":"partial","logic":"pause"},{"label":"No","value":"no","logic":"pause"},{"label":"Not applicable (non-California)","value":"na","logic":"go"}],"go_nogo_logic":"Partially or No (for CA colleges) \u2192 PAUSE"},{"question":"If a student is incorrectly denied or delayed aid due to the system, is there a clear appeal process?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"nogo"}],"go_nogo_logic":"No \u2192 NO-GO"}],"governance_requirements_summary":"All 9 pillars scored. No automated denial without human review. FERPA + state data privacy compliance."},{"id":"SS-04","name":"Student-Facing Chatbot / Digital Front Door","one_liner":"AI chatbot that answers student questions about the college.","description":"Chatbots, virtual assistants, or digital front doors that handle student inquiries \u2014 admissions, registration, hours, campus resources. The first AI interaction many students will have with your institution.","default_risk_tier":1,"key_pillars":["P1","P7","P8"],"equity_flag":"Multilingual coverage gaps. Accessibility barriers. Students may not know they're interacting with AI.","screening_questions":[{"question":"Does this chatbot provide general information only, or does it access individual student records?","options":[{"label":"General information only","value":"general","logic":"go"},{"label":"Accesses student records","value":"records","logic":"go"}],"go_nogo_logic":"Accesses records \u2192 upgrade to Tier 2"},{"question":"Is there a clear escalation path to a human when the chatbot can't answer?","options":[{"label":"Yes, prominent","value":"prominent","logic":"go"},{"label":"Buried in menus","value":"buried","logic":"pause"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE"},{"question":"In how many languages does the chatbot operate?","options":[{"label":"1 (English only)","value":"english_only","logic":"pause"},{"label":"2\u20133","value":"few","logic":"go"},{"label":"4+","value":"many","logic":"go"}],"go_nogo_logic":"English only \u2192 PAUSE (equity gap for CC populations)"},{"question":"Does the chatbot clearly identify itself as AI to the student?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"nogo"},{"label":"Unclear","value":"unclear","logic":"pause"}],"go_nogo_logic":"No \u2192 NO-GO (transparency requirement)"}],"governance_requirements_summary":"Score P1, P2, P6, P7, P8 minimum. Others recommended. Escalation to human required."},{"id":"SS-05","name":"AI Course Tutoring Assistant","one_liner":"AI tutor that helps students learn course material.","description":"Tools like Nectir, Khan Academy AI, or course-embedded tutoring assistants that interact directly with students during learning. The critical question: does the tutor build capability or create dependency?","default_risk_tier":2,"key_pillars":["P1","P4","P5"],"equity_flag":"Hallucination risk. Socratic vs. answer mode affects learning. Faculty configuration critical. Accessibility.","screening_questions":[{"question":"Can faculty configure the tutor's behavior (Socratic mode, answer restrictions, knowledge scope) per course?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"Limited","value":"limited","logic":"pause"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE (faculty agency gap)"},{"question":"What happens when the tutor doesn't know the answer?","options":[{"label":"Acknowledges limitation","value":"acknowledges","logic":"go"},{"label":"Hallucinates a plausible answer","value":"hallucinates","logic":"pause"},{"label":"Unknown","value":"unknown","logic":"pause"}],"go_nogo_logic":"Hallucinates \u2192 PAUSE (harm risk)"},{"question":"Does the tool help students build capability, or does it just deliver answers?","options":[{"label":"Skill-building design","value":"skill_building","logic":"go"},{"label":"Answer delivery","value":"answer_delivery","logic":"pause"},{"label":"Mixed","value":"mixed","logic":"go"}],"go_nogo_logic":"Answer delivery \u2192 PAUSE (capability dependency risk)"},{"question":"Is the tutor accessible to students with disabilities (screen reader, keyboard navigation)?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"Partial","value":"partial","logic":"pause"},{"label":"No","value":"no","logic":"pause"},{"label":"Unknown","value":"unknown","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE"},{"question":"Does the vendor use student interaction data to train their AI models?","options":[{"label":"No (contractual commitment)","value":"no_contractual","logic":"go"},{"label":"Yes","value":"yes","logic":"nogo"},{"label":"Unknown","value":"unknown","logic":"pause"}],"go_nogo_logic":"Yes \u2192 NO-GO (Students are not training data)"}],"governance_requirements_summary":"All 9 pillars scored. P2 and P6 must score \u2265 2. Faculty configuration and override required."},{"id":"SS-06","name":"Multilingual Support / Translation Services","one_liner":"AI that translates institutional materials or student communications.","description":"Translation tools for student communications, website content, or real-time multilingual support. Quality varies dramatically by language \u2014 what works for Spanish may fail for Hmong or Tagalog.","default_risk_tier":2,"key_pillars":["P2","P7"],"equity_flag":"Quality varies by language. Cultural appropriateness. May create false confidence in accuracy.","screening_questions":[{"question":"Is this tool translating general institutional materials, or student-specific communications?","options":[{"label":"General materials","value":"general","logic":"go"},{"label":"Student-specific communications","value":"student_specific","logic":"go"}],"go_nogo_logic":"Student-specific \u2192 upgrade to Tier 2 or 3 depending on content"},{"question":"Has the translation quality been validated by native speakers for your top 5 student languages?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"Partially","value":"partial","logic":"pause"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE"},{"question":"Does the tool handle culturally sensitive content appropriately (not just literal translation)?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"Unknown","value":"unknown","logic":"pause"}],"go_nogo_logic":"Unknown \u2192 PAUSE"},{"question":"Is there a human review process for high-stakes translated content (financial aid, academic standing)?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"nogo"}],"go_nogo_logic":"No for high-stakes \u2192 NO-GO"}],"governance_requirements_summary":"All 9 pillars scored. P2 and P6 must score \u2265 2."},{"id":"SS-07","name":"Basic Needs Support & Resource Navigation","one_liner":"AI that connects students to food, housing, and emergency resources.","description":"Tools that help students navigate basic needs support \u2014 food pantries, emergency housing, mental health, childcare, transportation. Touches the most sensitive personal data students share.","default_risk_tier":1,"key_pillars":["P6","P7"],"equity_flag":"Sensitive data (food insecurity, housing, immigration status). Stigma risk. Privacy paramount.","screening_questions":[{"question":"Does the tool collect data about students' basic needs (food insecurity, housing, immigration status)?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"go"}],"go_nogo_logic":"Yes \u2192 P6 emphasis regardless of tier"},{"question":"Is this data shared with any external parties (other agencies, vendors)?","options":[{"label":"No","value":"no","logic":"go"},{"label":"Yes, with student consent","value":"with_consent","logic":"go"},{"label":"Yes, without explicit consent","value":"without_consent","logic":"nogo"}],"go_nogo_logic":"Without consent \u2192 NO-GO"},{"question":"Can students access resources without disclosing personal hardship details to the AI?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE (stigma risk)"},{"question":"Does the tool connect to local resources that are actually available at your institution?","options":[{"label":"Yes, locally configured","value":"local","logic":"go"},{"label":"Generic national database","value":"generic","logic":"pause"}],"go_nogo_logic":"Generic \u2192 PAUSE (referrals to non-existent services harm trust)"}],"governance_requirements_summary":"Score P1, P2, P6, P7, P8 minimum. Data sensitivity demands P6 emphasis regardless of tier."},{"id":"SS-08","name":"Career Services AI","one_liner":"AI that helps students with resumes, interview prep, or career exploration.","description":"Resume builders, interview practice tools, career path explorers, or job matching systems. Lower risk when focused on job readiness skills; higher risk when recommending career pathways.","default_risk_tier":1,"key_pillars":["P1","P2"],"equity_flag":"Pathway bias across career clusters. Equity across CTE and transfer. Accessibility.","screening_questions":[{"question":"Does the tool recommend career pathways, or help with job readiness skills (resume, interview)?","options":[{"label":"Pathway recommendations","value":"pathways","logic":"go"},{"label":"Job readiness skills","value":"readiness","logic":"go"},{"label":"Both","value":"both","logic":"go"}],"go_nogo_logic":"Pathway recommendations \u2192 consider upgrading to Tier 2"},{"question":"Does the tool serve CTE pathways and trade careers as well as transfer/professional careers?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"Mostly professional/transfer","value":"professional","logic":"pause"},{"label":"Unknown","value":"unknown","logic":"pause"}],"go_nogo_logic":"Mostly professional \u2192 PAUSE (equity across pathways)"},{"question":"Does the tool steer students toward specific employers or programs?","options":[{"label":"No","value":"no","logic":"go"},{"label":"Yes, disclosed","value":"yes_disclosed","logic":"go"},{"label":"Yes, undisclosed","value":"yes_undisclosed","logic":"nogo"}],"go_nogo_logic":"Undisclosed \u2192 NO-GO (hidden commercial interests)"},{"question":"Is the resume/interview content culturally responsive?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"Generic","value":"generic","logic":"pause"},{"label":"Unknown","value":"unknown","logic":"pause"}],"go_nogo_logic":"Generic or Unknown \u2192 PAUSE"}],"governance_requirements_summary":"Score P1, P2, P6, P7, P8 minimum."},{"id":"SS-09","name":"Student Journey Mapping / Friction Detection","one_liner":"AI that analyzes student pathways to find where students get stuck.","description":"Analytics tools that map student journeys, identify friction points (excess units, bottleneck courses, drop-off patterns), and surface intervention opportunities. Powerful for institutional improvement \u2014 but individual tracking raises surveillance concerns.","default_risk_tier":2,"key_pillars":["P5","P6","P7"],"equity_flag":"PII. Aggregation vs. individual tracking. Who has access to journey data. Surveillance risk.","screening_questions":[{"question":"Does this tool track individual students or analyze aggregate patterns?","options":[{"label":"Individual tracking","value":"individual","logic":"go"},{"label":"Aggregate only","value":"aggregate","logic":"go"},{"label":"Both","value":"both","logic":"go"}],"go_nogo_logic":"Individual \u2192 confirms Tier 2; both \u2192 consider Tier 3"},{"question":"Who has access to the journey data?","options":[{"label":"Counselors only","value":"counselors","logic":"go"},{"label":"Administrators","value":"admins","logic":"go"},{"label":"Faculty","value":"faculty","logic":"go"},{"label":"Vendors","value":"vendors","logic":"pause"}],"go_nogo_logic":"Vendors \u2192 PAUSE (data governance concern)"},{"question":"Can students see their own journey data and understand how it's being used?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE"},{"question":"Are the analytics used to make decisions about individual students (intervention, advising)?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"go"}],"go_nogo_logic":"Yes \u2192 upgrade to Tier 3"},{"question":"Does the institution have clear data retention policies for journey data?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE"}],"governance_requirements_summary":"All 9 pillars scored. P2 and P6 must score \u2265 2."},{"id":"SS-10","name":"Registration & Enrollment Support","one_liner":"AI that assists with course registration, waitlists, or enrollment processes.","description":"Tools that support registration workflows \u2014 course recommendations, waitlist management, enrollment nudges, or schedule optimization. When AI errors affect whether a student can register, the stakes rise quickly.","default_risk_tier":2,"key_pillars":["P1","P3","P5"],"equity_flag":"Automated enrollment decisions affect access. Waitlist prioritization. Equity across program availability.","screening_questions":[{"question":"Does this tool make decisions about course enrollment, waitlist priority, or registration access?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"It recommends; humans decide","value":"recommends","logic":"go"},{"label":"Information only","value":"info_only","logic":"go"}],"go_nogo_logic":"Yes \u2192 upgrade to Tier 3"},{"question":"Could AI errors result in a student being enrolled in the wrong course or missing a registration window?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"Low likelihood","value":"low","logic":"go"},{"label":"No","value":"no","logic":"go"}],"go_nogo_logic":"Yes \u2192 confirms Tier 2+"},{"question":"Is there a human override when the system encounters edge cases (prerequisite exceptions, special admits)?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE"},{"question":"Does the tool work for all registration scenarios (late registration, concurrent enrollment, non-credit)?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"Most","value":"most","logic":"go"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE"}],"governance_requirements_summary":"All 9 pillars scored. P2 and P6 must score \u2265 2."},{"id":"SS-XX","name":"Custom / Other","one_liner":"A Student Services AI use case not listed above.","description":"Describe your use case and assign a risk tier. The Navigator will walk you through the same governance evaluation using a generic screening set.","default_risk_tier":null,"key_pillars":[],"equity_flag":"User describes equity considerations for their custom use case.","screening_questions":[{"question":"Does this tool make or influence decisions that affect student access, standing, or progress?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"go"}],"go_nogo_logic":"Yes \u2192 High risk tier indicator"},{"question":"Does this tool access individual student records or sensitive data?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"go"}],"go_nogo_logic":"Yes \u2192 P6 emphasis"},{"question":"Is there a clear educational purpose tied to student outcomes?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE"},{"question":"Will a human review AI outputs before they reach students?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE for high-risk use cases"},{"question":"Has the vendor provided information about how the tool performs across diverse student populations?","options":[{"label":"Yes","value":"yes","logic":"go"},{"label":"No","value":"no","logic":"pause"}],"go_nogo_logic":"No \u2192 PAUSE"}],"governance_requirements_summary":"Based on assigned tier. Tier 1: score 5 mandatory pillars. Tier 2: all 9 pillars, P2 and P6 \u2265 2. Tier 3: all 9 pillars, full governance."}],"archetypes":[{"id":"lightweight","name":"Lightweight","tagline":"Start small. Start now.","characteristics":["Small or rural institution","Limited IT staff \u2014 1-2 people wearing many hats","Under 5,000 students","No formal AI governance yet","High reliance on external support and shared resources"],"starting_recommendation":"Start with one Tier 1 or Tier 2 use case. Use the templates directly \u2014 no customization needed. Quarterly review cycle. Focus scoring on 5 mandatory lower-risk pillars.","you_might_be_this_if":["You don't have a dedicated IT director","This is your first AI tool evaluation","You need minimum viable governance, not a comprehensive program","Your team has big ambitions and a small budget"]},{"id":"building","name":"Building","tagline":"Structure enables innovation.","characteristics":["Mid-size institution with some analytics/data capability","IT director and institutional research capacity","AI committee or task force forming","Evaluating medium- or high-risk tools","Emerging AI interest across departments"],"starting_recommendation":"2\u20133 use cases across risk tiers. Cross-functional AI working group meets quarterly. Begin disaggregated tracking. All 9 pillars active, full scoring rubrics.","you_might_be_this_if":["AI is happening at your institution but governance hasn't caught up","You have some governance but it's informal or inconsistent","Faculty are interested but need guardrails and training","You're ready for comprehensive evaluation with guidance"]},{"id":"scaling","name":"Scaling","tagline":"Govern the portfolio, not just the tool.","characteristics":["Large institution with dedicated technical staff","Data warehouse, analytics team, or innovation office","Multiple AI tools already deployed","Mature governance needing portfolio-level analysis","Standing committee with reporting structure"],"starting_recommendation":"Portfolio approach across risk tiers. Formal AI governance with project owners. Bias audits for Tier 3 use cases. Annual review mode as primary entry point. Comparative scoring and export for governance committee.","you_might_be_this_if":["You have multiple AI tools deployed across Student Services","You need annual review and portfolio-level coordination","You're ready for cross-tool data governance analysis","You want to contribute to system-level best practices"]}],"screening":{"intro_text":"A few quick questions about this use case. We're checking whether the basics are in place \u2014 not auditing you. Your answers help us tailor the evaluation ahead.","go_message":"This use case looks viable for evaluation. No red flags in your screening answers. Let's move to the full governance assessment.","pause_message":"We flagged some concerns \u2014 not deal-breakers, but things to address. You can proceed to the full evaluation (concerns carry forward), or select a different use case to start with.","nogo_message":"This use case hit a hard stop. The condition below must be resolved before this tool should be deployed. This isn't a permanent no \u2014 it's a 'not yet.' Here's what needs to change."},"pillars":[{"id":"P1","name":"Purpose & Educational Legitimacy","color":"#0066cc","principle_statement":"Every AI deployment must serve a genuine educational purpose and protect the meaning of credentials.","hook":"If it doesn't serve students, it doesn't belong here.","criteria_mapping":"All four ethical criteria (operational pillar)","humans_mapping":"Not directly mapped (AQL-original)","questions":[{"id":"1.1","text":"What specific student outcome or educational purpose does this tool serve? Can you name it?","what_youre_looking_for":"A concrete answer tied to learning, completion, transfer, or career readiness \u2014 not 'operational efficiency' or 'innovation.' If the team can't articulate the educational purpose in one sentence, the tool doesn't have one.","source_note":"IEAIED Req. 1, ATD Action Area 1, SACSCOC/C-RAC, Advance CTE (Perkins V)"},{"id":"1.2","text":"Does this tool align with the institution's mission and strategic plan?","what_youre_looking_for":"Connection to stated institutional priorities. Not a solution looking for a problem. Maps to existing student success initiatives.","source_note":"IEAIED Req. 1, ATD Action Area 1"},{"id":"1.3","text":"Where on the student journey does this solve a problem? (enrollment, persistence, completion, transfer, career placement)","what_youre_looking_for":"Clear placement on the guided pathway. The tool addresses a known friction point, not a hypothetical one. Evidence that the problem exists at your institution.","source_note":"ATD Action Area 1, SACSCOC/C-RAC"},{"id":"1.4","text":"Does the tool protect credential integrity? Could AI-generated outputs substitute for competency demonstration?","what_youre_looking_for":"For tutoring/learning tools: students still demonstrate mastery. For advising: recommendations support informed student choice, not automated credential assembly. For CTE: licensure competency requirements preserved.","source_note":"SACSCOC/C-RAC, Advance CTE (Perkins V)"},{"id":"1.5","text":"Has an industry advisory committee or CTE program review validated this tool's relevance? (for CTE-adjacent use cases)","what_youre_looking_for":"Employer and industry input on whether the tool builds workforce-relevant skills. Alignment with career cluster competencies.","source_note":"Advance CTE (Perkins V)"}],"scoring":{"3":"Clear educational purpose tied to student outcomes. Aligned with institutional mission. Mapped to specific student journey stage. Credential integrity preserved. Industry validation where relevant.","2":"Educational purpose stated but not evidence-backed. General alignment with mission. Journey placement reasonable but not validated locally. Credential impact not fully assessed.","1":"No clear educational purpose \u2014 tool is efficiency-driven or vendor-pushed. No connection to institutional priorities. Credential integrity risk unaddressed."}},{"id":"P2","name":"Equity & Differential Impact","color":"#28a745","principle_statement":"AI governance must center equity and account for differential impacts on diverse community college student populations.","hook":"If it doesn't work for all your students, it doesn't work.","criteria_mapping":"Criterion 1: Equitable Student Outcomes (primary)","humans_mapping":"U (Universal Support), A (Algorithmic Discrimination)","questions":[{"id":"2.1","text":"Has this tool been tested with student populations similar to yours? (Pell-eligible, first-gen, working adults, multilingual, students with disabilities)","what_youre_looking_for":"Vendor can name specific institutions, student demographics, and outcomes. Not just 'we serve higher ed.'","source_note":"Kapor Foundation, NAIC, OMB M-25-21"},{"id":"2.2","text":"Are error rates, recommendation accuracy, or response quality consistent across student demographics?","what_youre_looking_for":"Vendor provides disaggregated performance data. If they can't, that's a red flag \u2014 they haven't measured it.","source_note":"NAIC, OMB M-25-21"},{"id":"2.3","text":"Has a differential impact analysis been conducted? Who might be harmed by this tool's errors or limitations?","what_youre_looking_for":"Vendor or internal team has identified which populations face higher risk from tool errors. Not just 'it works for everyone.' Specific harm scenarios articulated.","source_note":"Kapor Foundation, OMB M-25-21"},{"id":"2.4","text":"Does the tool work effectively for multilingual students? In what languages? Is it real-time or pre-translated?","what_youre_looking_for":"Actual language coverage and quality, not just 'we support translation.' Test with your student language mix.","source_note":"ASCCC"},{"id":"2.5","text":"Does the tool meet accessibility standards? (WCAG 2.1 AA, screen reader compatibility, keyboard navigation)","what_youre_looking_for":"Documented accessibility compliance. VPAT or equivalent. Tested with assistive technology users.","source_note":"NAIC"},{"id":"2.6","text":"What is the cost model for students? Are there paywalls, premium tiers, or features that require devices/bandwidth some students lack?","what_youre_looking_for":"No paywall barriers. Works on mobile. Low bandwidth mode. No premium tier that creates a two-track system.","source_note":"Kapor Foundation"},{"id":"2.7","text":"Does the tool serve all career pathways equitably, or is it optimized for specific programs?","what_youre_looking_for":"CTE pathways covered, not just transfer/STEM. If advising-focused, it should know your full program catalog.","source_note":"Advance CTE (Perkins V)"}],"scoring":{"3":"Disaggregated performance data for CC-like populations. Differential impact analysis conducted. Tested with multilingual, first-gen, Pell-eligible students. Accessible. No cost barriers. All pathways covered.","2":"Equity acknowledged as priority but data limited. Willing to conduct bias audit post-deployment. Accessibility documented. Cost model reasonable.","1":"No disaggregated data. No differential impact analysis. Equity not addressed in product design. Accessibility unclear. Cost barriers exist."}},{"id":"P3","name":"Human Authority & Decision Accountability","color":"#6f42c1","principle_statement":"Humans \u2014 not algorithms \u2014 make consequential decisions about students. Formal governance structures ensure authority, documentation, and accountability.","hook":"Who is accountable when the AI is wrong?","criteria_mapping":"Criterion 3: Ethics & Safety Foundation (primary)","humans_mapping":"H (Human-Centered)","questions":[{"id":"3.1","text":"Does this tool make decisions that affect student access, standing, or progress \u2014 or does it recommend to a human who decides?","what_youre_looking_for":"Clear distinction between AI-as-recommendation and AI-as-decision. If the tool auto-acts (flags a student, changes a pathway, sends an alert), that's a consequential decision even if a human could theoretically override.","source_note":"OMB M-25-21, Singapore Agentic AI, GAO"},{"id":"3.2","text":"Can staff override, modify, or reject AI recommendations before they reach students?","what_youre_looking_for":"Override built into workflow, not buried in admin settings. Staff see the AI recommendation and can approve, edit, or reject before action.","source_note":"OMB M-25-21, SACSCOC/C-RAC"},{"id":"3.3","text":"For high-risk use cases: is there a defined escalation path when AI output is uncertain, contradictory, or flagged?","what_youre_looking_for":"Defined thresholds. When confidence is low or the case is edge, the system routes to a human, not a default action.","source_note":"Singapore Agentic AI Framework"},{"id":"3.4","text":"Does the tool create a decision audit trail? Can the institution document who approved what AI-influenced decision?","what_youre_looking_for":"Logged decisions with timestamps, the AI recommendation, and the human action taken.","source_note":"GAO, OMB M-25-21"},{"id":"3.5","text":"Who is accountable when the AI is wrong? Is that defined in the contract?","what_youre_looking_for":"Clear liability allocation. Not 'institution assumes all risk' buried in Terms of Service.","source_note":"GAO, NIST AI 600-1"}],"scoring":{"3":"AI recommends; humans decide. Override built into workflow. Escalation paths defined. Full audit trail. Liability allocated in contract.","2":"AI acts with human review possible but not required. Override exists but isn't default. Some audit logging. Liability partially addressed.","1":"AI makes consequential decisions autonomously. Override technically possible but impractical. No audit trail. Vendor disclaims all liability."}},{"id":"P4","name":"Student & Faculty Agency","color":"#fd7e14","principle_statement":"Students and faculty are empowered participants in AI governance, not subjects of it.","hook":"Your students are adults. Your faculty run the classroom. Respect both.","criteria_mapping":"Criterion 3: Ethics & Safety Foundation","humans_mapping":"H (Human-Centered), U (Universal Support)","questions":[{"id":"4.1","text":"Does the tool help students learn to navigate AI, or does it just deliver AI-generated answers?","what_youre_looking_for":"Skill-building design: Socratic mode, guided problem-solving. Student learns the process, not just the result.","source_note":"Oregon State Bloom's Taxonomy, UNESCO Competency Frameworks"},{"id":"4.2","text":"Can students opt out of AI interaction and access a human alternative without penalty or delay?","what_youre_looking_for":"Real opt-out, not a buried setting. Human alternative is accessible, not a worse experience.","source_note":"IEAIED Req. 5"},{"id":"4.3","text":"Does the tool give students visibility into and control over their own data and AI profile?","what_youre_looking_for":"Students can see what the system 'thinks' about them and contest it.","source_note":"IEAIED Req. 5, ASCCC"},{"id":"4.4","text":"Does the tool recognize prior AI experience that adult learners bring from their workplaces?","what_youre_looking_for":"Acknowledges that a 35-year-old returning student may use AI at work daily. Respects adult learner autonomy.","source_note":"ATD Action Areas 4-5"},{"id":"4.5","text":"Can faculty configure, restrict, or turn off AI features for their courses and advisees?","what_youre_looking_for":"Granular faculty control. Not admin-only settings. Faculty set AI behavior per course or section.","source_note":"ASCCC (Title 5 '10+1')"},{"id":"4.6","text":"Does the vendor provide training that is accessible to adjunct/part-time faculty? (async, under 30 minutes, no cost)","what_youre_looking_for":"Training included in contract. Async options that fit adjunct schedules. Compensated governance participation addressed.","source_note":"ASCCC, ATD"},{"id":"4.7","text":"Does the tool evaluate, score, or surveil faculty performance?","what_youre_looking_for":"Faculty are users and configurers, not subjects.","source_note":"ASCCC (Title 5 '10+1')"},{"id":"4.8","text":"Does the tool's deployment plan respect the collegial consultation process and shared governance?","what_youre_looking_for":"Academic senate consulted before institution-wide deployment. Not a top-down IT rollout.","source_note":"ASCCC (Title 5 '10+1')"}],"scoring":{"3":"Skill-building design for students. Real opt-out with human alternative. Adult learner autonomy respected. Granular faculty configuration. Adjunct-accessible training included. No faculty surveillance. Shared governance respected.","2":"Some skill-building features. Opt-out exists. Faculty configuration available. Training provided but not adjunct-optimized.","1":"Pure output delivery. No meaningful opt-out. Admin-only configuration. No adjunct provisions. Faculty performance tracked. Top-down deployment assumed."}},{"id":"P5","name":"Risk Proportionality & Harm Mitigation","color":"#dc3545","principle_statement":"Governance intensity matches risk level. Low-impact AI gets lightweight review; high-impact AI gets full governance \u2014 with harm mitigation built into every deployment.","hook":"What's the worst that happens to a student if this tool fails?","criteria_mapping":"All four ethical criteria (operational pillar)","humans_mapping":"S (Safety & Security)","questions":[{"id":"5.1","text":"Has the tool been classified by risk tier (high / medium / lower)? Does governance intensity match?","what_youre_looking_for":"Risk tier is documented and agreed upon. High-risk tools get full governance; lower-risk tools get lightweight review.","source_note":"Singapore Agentic AI Framework, NIST AI 600-1"},{"id":"5.2","text":"What are the autonomy limits? Is this tool informational, recommendatory, or consequential?","what_youre_looking_for":"Informational = lowest governance. Recommendatory = moderate (human reviews). Consequential = highest (human must approve).","source_note":"Singapore Agentic AI Framework"},{"id":"5.3","text":"If this is an agentic AI system, what bounds are placed on its autonomy?","what_youre_looking_for":"Whitelisted actions only. Logging of all tool usage. Anomaly detection. No unbounded autonomous action.","source_note":"Singapore Agentic AI Framework, NIST AI 600-1"},{"id":"5.4","text":"What is the harm scenario? If this tool fails, what is the worst realistic outcome for a student?","what_youre_looking_for":"Team has articulated the worst case and mitigation is planned.","source_note":"HEAT-AI, GAO"},{"id":"5.5","text":"Are staff trained on automation bias?","what_youre_looking_for":"Plan for maintaining critical review even when the tool performs well.","source_note":"OMB M-25-21"},{"id":"5.6","text":"Is there a process for emerging technology review?","what_youre_looking_for":"Vendor updates trigger risk reassessment. New capabilities don't auto-deploy.","source_note":"NIST AI 600-1"}],"scoring":{"3":"Risk tier documented. Autonomy limits defined. Agentic bounds in place. Harm scenarios articulated with mitigation plans. Automation bias training planned. Emerging tech review process exists.","2":"Risk tier acknowledged. Some autonomy limits. Harm scenarios partially explored. Training planned. No formal emerging tech review.","1":"No risk classification. No autonomy limits. Harm scenarios not considered. No automation bias awareness. Vendor features auto-deploy without review."}},{"id":"P6","name":"Data Stewardship & System Integrity","color":"#17a2b8","principle_statement":"Student data is a public trust. AI systems must meet data stewardship standards that protect privacy, ensure integrity, and maintain institutional control.","hook":"Your data, your rules. Not the vendor's.","criteria_mapping":"Criterion 2: Quality Data, Governed Responsibly (primary)","humans_mapping":"M (Managed Privacy)","questions":[{"id":"6.1","text":"What student data does this tool collect, access, or generate? Provide a complete data inventory.","what_youre_looking_for":"Specific data fields, not categories.","source_note":"IEEE P7004, NIST 600-1"},{"id":"6.2","text":"Is any student data used to train or improve the vendor's AI models?","what_youre_looking_for":"Explicit contractual commitment: no training on student data without consent.","source_note":"NAIC, GAO Principle 2"},{"id":"6.3","text":"What happens to student data when the contract ends?","what_youre_looking_for":"Defined deletion timeline. Data export in standard format. No vendor retention.","source_note":"Alabama Template, NIST 600-1"},{"id":"6.4","text":"Is the tool FERPA compliant? Does the vendor sign a FERPA-compliant data sharing agreement?","what_youre_looking_for":"Written FERPA compliance. Vendor defined as 'school official' with legitimate educational interest.","source_note":"NAIC, GAO Principle 2"},{"id":"6.5","text":"What is the data provenance for the AI's training data?","what_youre_looking_for":"Vendor describes training data sources. No scraping of student data without consent.","source_note":"IEEE P7004"},{"id":"6.6","text":"How does the tool handle data quality issues? (incomplete records, outdated SIS data, transfer students)","what_youre_looking_for":"Graceful handling of messy real-world CC data. Flags low-confidence recommendations.","source_note":"NIST 600-1"},{"id":"6.7","text":"Does the tool integrate with existing institutional systems through secure, documented protocols?","what_youre_looking_for":"Standard integration methods (API, LTI, SAML/SSO). No shadow data stores. Aligned with CCCCO DGAW standards.","source_note":"NIST 600-1, CCCCO DGAW"},{"id":"6.8","text":"Does the institution retain the right to audit the vendor's data practices?","what_youre_looking_for":"Contractual audit rights not blocked by IP claims.","source_note":"GAO Principle 2, Alabama Template"}],"scoring":{"3":"Complete data inventory. No training on student data (contractual). Defined deletion/portability. FERPA agreement signed. Provenance documented. Secure integration. Audit rights in contract.","2":"Data inventory on request. Training opt-out available. FERPA compliant. Some provenance. Integration functional. Audit possible but not contractual.","1":"Data practices vague. Student data may train models. No clear deletion terms. FERPA undocumented. No audit rights. Integration undocumented or insecure."}},{"id":"P7","name":"Transparency & Contestability","color":"#e83e8c","principle_statement":"Students and faculty have the right to know when AI influences decisions that affect them \u2014 and the right to contest those decisions through meaningful processes.","hook":"Decisions without recourse are not governance.","criteria_mapping":"Criterion 3: Ethics & Safety Foundation","humans_mapping":"N (Notice & Explanation)","questions":[{"id":"7.1","text":"Is it clear to students when they are interacting with AI vs. a human?","what_youre_looking_for":"Visible, plain-language disclosure at point of interaction.","source_note":"NAIC, IEAIED Req. 7-8"},{"id":"7.2","text":"Can students understand why the AI gave a particular recommendation?","what_youre_looking_for":"Explainability at student-appropriate level.","source_note":"NAIC, NIST 600-1"},{"id":"7.3","text":"Does the vendor disclose what data the AI uses to generate recommendations?","what_youre_looking_for":"Student can see what data informed the AI output.","source_note":"CHAI (Model Cards)"},{"id":"7.4","text":"Does the system support an appeals/contestability process?","what_youre_looking_for":"Right to human review of any AI-influenced consequential decision. Clear escalation pathway.","source_note":"OMB M-25-21, ASCCC"},{"id":"7.5","text":"Is there documentation of how the AI model works accessible to non-technical staff?","what_youre_looking_for":"Advisors and student services staff can explain the tool to students.","source_note":"IEAIED Req. 7-8"},{"id":"7.6","text":"Does the vendor provide a 'model card' or equivalent?","what_youre_looking_for":"Standardized reporting on capability, limitations, and known biases.","source_note":"CHAI (Model Cards)"},{"id":"7.7","text":"Does the institution publicly disclose which AI systems are in use for Student Services?","what_youre_looking_for":"Public-facing list of AI tools in student-facing processes.","source_note":"ASCCC, OMB M-25-21"}],"scoring":{"3":"Clear disclosure. Explainable recommendations. Data sources visible. Meaningful contestability. Plain-language documentation. Model card published. Public AI inventory.","2":"Disclosure present but not prominent. Some explainability. Appeals through existing processes. Documentation technical. Model card on request.","1":"No disclosure. AI operates invisibly. No explainability. No appeals pathway. No documentation. No model card. No public disclosure."}},{"id":"P8","name":"Vendor Accountability & Institutional Sovereignty","color":"#6610f2","principle_statement":"Community colleges are buyers, not builders, of AI. Vendor relationships must protect institutional sovereignty, ensure accountability, and leverage collective bargaining power.","hook":"You're signing the contract. Make sure it protects your students, not just the vendor.","criteria_mapping":"All four ethical criteria (operational pillar)","humans_mapping":"S (Safety & Security)","questions":[{"id":"8.1","text":"Does the contract include performance benchmarks and remedies for non-performance?","what_youre_looking_for":"Defined SLAs. Remedies for non-performance.","source_note":"NAIC, GAO"},{"id":"8.2","text":"What is the exit strategy? Can the institution leave without losing data or paying punitive fees?","what_youre_looking_for":"Data portability. Transition support. No lock-in.","source_note":"NAIC, NIST 600-1"},{"id":"8.3","text":"Can the institution conduct or require independent bias audits?","what_youre_looking_for":"Vendor supports third-party audits. Doesn't block with IP claims.","source_note":"GAO, IEAIED"},{"id":"8.4","text":"How does the vendor handle model updates? Advance notice and testing ability?","what_youre_looking_for":"Update notification. Staging environment. No silent model changes.","source_note":"NIST 600-1, SREB"},{"id":"8.5","text":"Is this tool available through FoundationCCC/CollegeBuys or other consortium contracts?","what_youre_looking_for":"Collective bargaining power leveraged.","source_note":"NACUBO/E&I Cooperative"},{"id":"8.6","text":"Does the vendor have an incident response process?","what_youre_looking_for":"Defined timeline. Root cause analysis. Corrective action plan.","source_note":"NIST 600-1, SREB"},{"id":"8.7","text":"What does total cost of ownership look like over 3 years?","what_youre_looking_for":"Transparent pricing. No hidden fees.","source_note":"NACUBO/E&I Cooperative"}],"scoring":{"3":"Performance SLAs with remedies. Clean exit. Independent audits supported. Advance update notification. Consortium terms leveraged. Incident response defined. Transparent cost.","2":"Some performance terms. Exit possible. Audits on request. Updates communicated. Incident reporting exists.","1":"No performance guarantees. Punitive exit terms. Audits blocked. Silent updates. No incident process. Hidden costs."}},{"id":"P9","name":"Institutional Capacity & Continuous Governance","color":"#795548","principle_statement":"Governance must be achievable at every institutional scale. Tiered implementation ensures resource-constrained colleges can begin with minimum viable governance and grow over time.","hook":"Don't add tools to an ungoverned environment. Build the floor first.","criteria_mapping":"Criterion 4: Thoughtful, Multi-Year Approach (primary)","humans_mapping":"Not directly mapped (AQL-original \u2014 identified gap in HUMANS)","questions":[{"id":"9.1","text":"Does the institution have a governance structure that can oversee this tool?","what_youre_looking_for":"Someone is named, a review cycle exists, a process for decisions. Minimum viable governance.","source_note":"SACSCOC/C-RAC, EDUCAUSE"},{"id":"9.2","text":"Will this tool be included in the institution's annual AI inventory?","what_youre_looking_for":"Inventory maintained with risk tiers and scorecard results.","source_note":"CHAI, WCET"},{"id":"9.3","text":"Is there a plan to rescore this tool on a regular cycle?","what_youre_looking_for":"Annual for high-risk. Every two years for medium/lower. Trigger-based for changes.","source_note":"OMB M-25-21"},{"id":"9.4","text":"Does the tool generate reporting that supports accreditation documentation?","what_youre_looking_for":"Usage data, outcome data, and governance documentation exportable.","source_note":"SACSCOC/C-RAC"},{"id":"9.5","text":"Does the institution have the staff capacity to implement and sustain this tool?","what_youre_looking_for":"Implementation plan matches real institutional resources.","source_note":"Local Government AI Handbook"},{"id":"9.6","text":"Are there shared resources from consortia, the Chancellor's Office, or peer institutions?","what_youre_looking_for":"Not reinventing governance alone.","source_note":"ATD, EDUCAUSE"}],"scoring":{"3":"Governance structure in place. AI inventory maintained. Regular rescore cycle. Accreditation-ready reporting. Capacity assessed honestly. Shared resources leveraged.","2":"Some governance exists. Inventory planned. Rescoring acknowledged but not scheduled.","1":"No governance structure. No inventory. No review cycle. No accreditation planning. Operating in isolation."}}],"nogo_criteria":[{"id":"NG-01","statement":"No clear educational purpose.","pillar":"P1","why":"If you can't articulate the educational purpose, don't buy it. AI in Student Services is justified by student outcomes, not operational efficiency.","what_to_do":"Before proceeding, the team must articulate one sentence: 'This tool serves [specific student outcome] by [specific mechanism].' If no one can write that sentence, the tool doesn't have an educational purpose.","detection":"P1 score = 1, OR screening question indicates no educational purpose"},{"id":"NG-02","statement":"Students are not training data.","pillar":"P6","why":"Vendors that train their models on your students' data are extracting value from the most vulnerable populations in higher education. This is non-negotiable.","what_to_do":"Require contractual prohibition on training with student data. The contract must explicitly state: vendor will not use student data to train, fine-tune, or improve AI models. If the vendor won't agree, walk away.","detection":"Explicit yes/no question in no-go checklist"},{"id":"NG-03","statement":"No human override for consequential decisions.","pillar":"P3","why":"When AI makes decisions about financial aid, enrollment, or academic standing without human review, students lose recourse. This violates OMB requirements for high-impact AI and accreditation expectations.","what_to_do":"Build human override into the workflow \u2014 not as an admin setting, but as a required step. For high-risk tools, define who reviews, when, and document the decision. Every consequential AI decision needs a named human accountable for the outcome.","detection":"P3 score = 1 AND risk tier = High"},{"id":"NG-04","statement":"Vendor blocks independent bias audits.","pillar":"P8","why":"Independent verification is the only way to verify AI is not biased. Vendors who block audits behind IP claims are choosing their intellectual property over your students' civil rights.","what_to_do":"Require contractual right to conduct or commission independent bias audits. If the vendor blocks with IP claims, trade secret arguments, or NDA restrictions on audit findings \u2014 that tells you what you need to know.","detection":"Explicit yes/no question in no-go checklist"},{"id":"NG-05","statement":"No FERPA-compliant data sharing agreement.","pillar":"P6","why":"This is a legal requirement, not a best practice. Student data shared without a FERPA-compliant agreement exposes the institution to federal compliance risk and violates students' privacy rights.","what_to_do":"Do not deploy until a FERPA-compliant data sharing agreement is signed. The vendor must be designated as a 'school official' with legitimate educational interest. If the vendor doesn't understand why this matters, they're not ready for higher education.","detection":"Explicit yes/no question in no-go checklist"},{"id":"NG-06","statement":"No student disclosure of AI use.","pillar":"P7","why":"Students have a right to know when AI influences decisions that affect them. Period. Invisible AI is unaccountable AI.","what_to_do":"Implement plain-language AI disclosure at the point of interaction. Not buried in a terms-of-service page. Not a campus-wide announcement. At the moment AI is part of the student's experience, they know it.","detection":"P7 score = 1 OR explicit no-go question"},{"id":"NG-07","statement":"Decisions without recourse are not governance.","pillar":"P7","why":"If a student cannot contest an AI-influenced decision about their enrollment, financial aid, or academic standing, you don't have governance \u2014 you have automation.","what_to_do":"Establish a contestability process students can actually use. Not a form that goes nowhere. A defined process: who reviews, what timeline, what outcome. Publish it. If the system doesn't support appeals, build the process around the system.","detection":"P7 score = 1 OR explicit no-go question"},{"id":"NG-08","statement":"Vendor lock-in undermines institutional sovereignty.","pillar":"P8","why":"If you can't leave without losing your students' data or paying punitive switching costs, you've given away your sovereignty. You're not governing AI \u2014 the vendor is governing you.","what_to_do":"Before signing, negotiate: data portability in standard format, defined deletion timeline, no punitive termination fees, transition support. Check FoundationCCC/CollegeBuys for consortium contracts with better terms. If the vendor won't negotiate exit terms, that's your answer.","detection":"Explicit yes/no question in no-go checklist"}],"scoring_interpretation":{"overall_patterns":[{"pattern":"Any pillar = 1 on a High-Risk tool","interpretation":"A score of 1 on any pillar for a high-risk tool means a critical governance gap exists. For P2, P3, or P5, this is effectively a no-go unless mitigations are substantial and documented.","action":"Do not deploy without a documented mitigation plan approved by the governance committee."},{"pattern":"P1 = 1","interpretation":"The team cannot articulate a clear educational purpose for this tool. It may be efficiency-driven or vendor-pushed rather than student-centered.","action":"No-go. If you can't articulate the educational purpose, don't buy it."},{"pattern":"Multiple pillars = 2","interpretation":"The tool meets the basics but has gaps the institution will need to compensate for. Common pattern for newer vendors or tools not designed specifically for community colleges.","action":"Proceed with conditions. Document what the institution will do to compensate for vendor gaps."},{"pattern":"All pillars \u2265 2","interpretation":"Solid baseline. The tool and the institution's governance are aligned well enough to move forward with standard oversight.","action":"Proceed with standard governance. Include in annual AI inventory. Monitor per risk tier schedule."},{"pattern":"Strong P6 & P8, weak P4 & P7","interpretation":"Vendor is technically sound \u2014 good data practices, solid contracts \u2014 but the product wasn't designed with students as participants. The back end is strong; the front end is missing the student voice.","action":"Institution must build the student-facing layer: disclosure, contestability, opt-out, faculty configuration. These can't be outsourced to the vendor."},{"pattern":"Strong P4 & P7, weak P6","interpretation":"Vendor markets well \u2014 student-friendly interface, good transparency features \u2014 but hasn't done the data governance work. Attractive front end, uncertain foundation.","action":"Investigate data practices deeply before proceeding. Request full data inventory, training data provenance, and FERPA documentation."},{"pattern":"P9 = 1","interpretation":"This isn't about the vendor or the tool \u2014 it's about institutional readiness. No governance structure, no inventory, no review cycle. Adding a tool to this environment adds risk without accountability.","action":"Build governance capacity first. Designate a person, create an AI inventory, establish a review cycle. Then evaluate tools."}],"tier_benchmarks":{"lightweight":{"minimum_viable":"5 mandatory pillars scored. No no-go criteria triggered. P1 \u2265 2.","good":"5 mandatory pillars all \u2265 2. Recommended pillars reviewed even if not scored.","strong":"All pillars scored \u2265 2 including recommended ones."},"building":{"minimum_viable":"All 9 pillars scored. P2 and P6 \u2265 2. No no-go criteria triggered.","good":"All pillars \u2265 2. Governance committee has reviewed assessment.","strong":"Most pillars at 3. Documented mitigation plans for any pillar at 2."},"scaling":{"minimum_viable":"All 9 pillars scored. No pillar at 1. P2 and P6 \u2265 2. No no-go criteria triggered.","good":"Most pillars at 3. Portfolio-level analysis complete. Annual review cycle active.","strong":"All pillars at 3. Cross-tool governance coordinated. Contributing to system-level best practices."}}},"roadmap_content":{"intro_text":"Your governance roadmap is built from four inputs: your institutional archetype, the use case you selected, the risk tier, and your pillar scores. Every section below is tailored to your specific situation. This is your starting point \u2014 not a compliance checklist.","executive_summary_template":"This assessment evaluated [TOOL_NAME] ([USE_CASE]) at [INSTITUTION_NAME] on [DATE]. The tool was classified as Risk Tier [TIER] and evaluated by a [ARCHETYPE] institution. Total governance score: [SCORE]/[POSSIBLE] across [SCORED_COUNT] pillars. [NO_GO_COUNT] no-go criteria triggered. Recommendation: [RECOMMENDATION].","before_deployment":{"tier_1":["Designate a person responsible for this tool (can be added to existing role)","Complete the basic vendor evaluation checklist","Add tool to AI inventory (or create inventory starting with this tool)","Post student-facing AI disclosure notice","Confirm tool does not use student data for model training"],"tier_2":["All Tier 1 requirements, plus:","Score all 9 pillars (P2 and P6 must score \u2265 2)","Confirm faculty can configure/override AI features","Establish escalation path for AI errors","Plan adjunct faculty orientation (\u2264 30 minutes)"],"tier_3":["All Tier 1 and Tier 2 requirements, plus:","Full governance committee review and approval","Bias audit completed before deployment","Human-in-the-loop workflow documented and tested","Appeals/contestability process established and published","Staff training on automation bias","Student notification and opt-out mechanisms in place"]},"raci_sketches":{"lightweight":{"description":"Minimum viable roles. One person can wear multiple hats.","roles":[{"role":"Tool oversight","responsible":"Designated staff member","accountable":"IT Director or VPSS","consulted":"Academic Senate rep","informed":"Faculty using tool"},{"role":"Student disclosure","responsible":"Student Services lead","accountable":"VPSS","consulted":"Equity officer","informed":"Students"},{"role":"Vendor relationship","responsible":"IT or procurement","accountable":"CIO/designee","consulted":"\u2014","informed":"Governance body"}]},"building":{"description":"Cross-functional structure with named project owners.","roles":[{"role":"Governance review","responsible":"AI working group chair","accountable":"VPSS or CIO","consulted":"Academic Senate, equity officer","informed":"Board"},{"role":"Tool oversight","responsible":"Project owner (named)","accountable":"AI working group","consulted":"Faculty reps, IT, IR","informed":"Affected departments"},{"role":"Student disclosure","responsible":"Student Services lead","accountable":"VPSS","consulted":"Student government","informed":"Students"},{"role":"Faculty onboarding","responsible":"Faculty development lead","accountable":"Academic Senate rep","consulted":"Vendor, IT","informed":"All affected faculty"},{"role":"Data governance","responsible":"IR/Data officer","accountable":"CIO","consulted":"Legal, DGAW (CA)","informed":"Vendor"},{"role":"Equity monitoring","responsible":"IR/Equity officer","accountable":"AI working group","consulted":"Faculty, student reps","informed":"Board"}]},"scaling":{"description":"Standing committee with portfolio-level oversight and system coordination.","roles":[{"role":"Portfolio governance","responsible":"AI governance committee (standing)","accountable":"VP Academic Affairs + VPSS","consulted":"All VPs, Senate, CIO","informed":"Board, system office"},{"role":"Human oversight","responsible":"Dedicated oversight lead","accountable":"VPSS","consulted":"Counseling dept, faculty","informed":"Students"},{"role":"Bias audit","responsible":"External auditor (contracted)","accountable":"AI committee","consulted":"Vendor, IR, equity","informed":"Board, public (published)"},{"role":"Student voice","responsible":"Student advisory panel","accountable":"Student government","consulted":"Dean of Students","informed":"All students"},{"role":"Cross-tool coordination","responsible":"CIO/Data officer","accountable":"AI committee","consulted":"All tool project owners","informed":"IT staff"},{"role":"System coordination","responsible":"Designated liaison","accountable":"VP or designee","consulted":"CCCCO, consortia","informed":"AI committee"}]}},"ninety_day_metrics":{"tier_1":["Usage data: how many students interacted, frequency, drop-off points","Student satisfaction: brief survey at 30 and 90 days","Escalation tracking: how many queries escalated to human, resolution rate","Accessibility: any reported access barriers"],"tier_2":["All Tier 1 metrics, plus:","Disaggregated usage by student demographics (Pell, first-gen, multilingual)","Faculty configuration uptake: how many faculty customized settings","Override rate: how often staff override AI recommendations","Error rate tracking with demographic breakdowns"],"tier_3":["All Tier 2 metrics, plus:","Appeal/contestability: number of student appeals, resolution time, outcomes","Human override quality: sample review of overridden decisions","Bias audit findings: initial audit results with action plan","Automation bias indicators: staff override rate trends (declining = potential concern)","Student opt-out rate: how many students choose human alternative"]},"review_cadence":{"tier_1":"Every 2 years (or trigger-based: vendor changes, incidents, new capabilities)","tier_2":"Annual with quarterly check-ins","tier_3":"Annual comprehensive review with quarterly monitoring and monthly governance meetings"},"escalation_triggers":["Student complaint volume exceeds baseline","Tool accuracy falls below vendor SLA","Vendor changes data practices or adds features without notice","Disaggregated outcomes show differential impact","Override rate > 30% (suggests AI quality issues)","Faculty report tool is burdensome rather than helpful","Student appeal volume exceeds established threshold","Bias audit reveals systematic disparate impact","Human override rate drops below 5% (possible automation bias)","Vendor acquired or changes ownership"],"decision_rules":{"pause_when":["3+ student complaints about accuracy or accessibility in a 30-day period","P2 (Equity) or P6 (Data) conditions deteriorate post-deployment","Committee identifies unresolved equity concern","Vendor misses SLA","Bias audit findings require remediation","Portfolio analysis reveals tool conflict or data governance gap across systems"],"investigate_when":["Vendor announces model update or new capability","Differential outcomes emerge across student demographics","Override rate drops significantly","New demographic data reveals previously undetected disparity","Cross-tool patterns emerge (students flagged by multiple AI systems)"],"stop_when":["Any no-go criterion becomes true post-deployment","Bias audit reveals unremediated discriminatory impact","Vendor fails to maintain contractual commitments","Accreditation concern raised","System-level policy change conflicts with deployment"]},"pillar_specific_actions":{"P1_low":"Before deploying, articulate the specific educational purpose in one sentence tied to a student outcome. If you cannot, this tool does not belong in Student Services. Document the student journey friction point it addresses with institutional data.","P2_low":"Before deploying, conduct a disaggregated impact analysis across Pell, first-gen, undocumented, and multilingual populations. Request vendor performance data broken down by demographics. If vendor cannot provide it, plan a post-deployment bias audit within the first semester.","P3_low":"Before deploying, build human override into the workflow \u2014 not as an admin setting, but as a required step before AI recommendations reach students. For high-risk tools: define who reviews, when, and document the decision. Require a named human accountable for every AI-influenced consequential decision.","P4_low":"Before deploying, ensure faculty can configure AI features per course. Plan a 30-minute adjunct orientation. Confirm students can opt out and access a human alternative without penalty. If the tool surveys or tracks faculty behavior, negotiate removal of those features.","P5_low":"Before deploying, articulate the worst-case harm scenario for a student. Define autonomy limits (informational / recommendatory / consequential). Plan automation bias training for all staff who use the tool. Set up a horizon-scanning process so vendor updates trigger governance review.","P6_low":"Before deploying, get the vendor to sign a FERPA-compliant data sharing agreement. Require contractual prohibition on training with student data. Document the complete data inventory (every field collected). Define data deletion timeline for contract end. Secure audit rights in the contract.","P7_low":"Before deploying, implement student-facing AI disclosure at the point of interaction. Build a contestability process students can actually use. Publish a plain-language description of the tool. Add this tool to the institution's public AI inventory.","P8_low":"Before deploying, negotiate: performance SLAs with remedies, data portability on exit, advance notice of model updates, incident reporting timeline. Check FoundationCCC/CollegeBuys for existing contracts. If the vendor blocks audits or imposes punitive exit terms, consider alternatives.","P9_low":"Before deploying this tool, build minimum viable governance: designate a person responsible, create an AI inventory, establish a review cycle. If the institution doesn't have governance capacity, build it first \u2014 don't add tools to an ungoverned environment."},"toolkit_references":{"tier_1":["AI Inventory Template","AI Tool Evaluation Checklist","Student AI Rights Notice"],"tier_2":["All Tier 1 templates, plus:","Faculty AI Training Outline (with 30-min adjunct orientation)","Vendor Contract AI Addendum","High-Impact AI Assessment Protocol (adapted for medium risk)"],"tier_3":["All Tier 2 templates, plus:","AI Governance Committee Charter","AI Incident Response Protocol","Annual AI Governance Report","Student AI Documentation Form","Student Capability Assessment Protocol"]},"humans_alignment":{"H":"Human-Centered: Maps to P3 (Human Authority) and P4 (Student & Faculty Agency). Ensures humans maintain authority over AI-influenced decisions and that students and faculty are empowered participants.","U":"Universal Support: Maps to P2 (Equity) and P4 (Agency). AI tools must serve all student populations equitably and build capability rather than dependency.","M":"Managed Privacy: Maps to P6 (Data Stewardship). Student data is a public trust. FERPA compliance, no training on student data, institutional audit rights.","A":"Algorithmic Discrimination: Maps to P2 (Equity). Disaggregated impact analysis, bias audits, differential performance monitoring across demographics.","N":"Notice & Explanation: Maps to P7 (Transparency & Contestability). Students know when AI is used, understand why recommendations are made, and can contest decisions.","S":"Safety & Security: Maps to P5 (Risk Proportionality) and P8 (Vendor Accountability). Governance intensity matches risk. Vendors meet security, incident response, and accountability standards."},"humans_gap_note":"The CCCCO HUMANS framework does not address institutional capacity building (Criterion 4 / P9). The Navigator fills this gap. Non-California colleges skip HUMANS mapping and still have a complete framework.","next_steps_checklist_template":"Based on your assessment, here are your immediate next steps:\n\n\u2610 Address any no-go conditions before proceeding\n\u2610 Complete pre-deployment governance requirements for your risk tier\n\u2610 Assign roles per the RACI structure\n\u2610 Set up 90-day measurement baseline\n\u2610 Schedule first review per your cadence\n\u2610 Download relevant templates from the Governance Toolkit\n\u2610 Share this assessment with your governance body\n\nYour roadmap, scores, and profile are saved in your browser. Come back anytime to update or start a new assessment."},"annual_review":{"headline":"Annual Review: Is This Tool Still Working for Your Students?","description":"Once deployed, rescore each tool on a regular cycle: annually for high-risk, every two years for medium/lower. Trigger-based rescoring for vendor changes, incidents, or new capabilities. The annual review checks whether the tool is still serving its purpose \u2014 and whether anything has changed that shifts the governance calculus.","checklist_items":[{"area":"Educational outcomes","pillar":"P1","questions":"Is the tool still serving its stated educational purpose? Has the student outcome improved? Still aligned with institutional priorities?"},{"area":"Equity outcomes","pillar":"P2","questions":"Usage rates and outcomes equitable across student cohorts? Demographic-disaggregated review conducted? Any cohort underserved or disproportionately flagged?"},{"area":"Decision quality","pillar":"P3","questions":"Override rate? Staff using overrides frequently? Any decision accountability failures?"},{"area":"Student/faculty experience","pillar":"P4","questions":"Student satisfaction, confusion, avoidance, trust? Faculty finding tool helpful or burdensome? Adjunct access working?"},{"area":"Risk reassessment","pillar":"P5","questions":"Vendor added new capabilities or agentic features? Risk tier update needed? Near-miss incidents?"},{"area":"Data practices","pillar":"P6","questions":"Changes to vendor data practices? Data quality issues? Privacy audit results?"},{"area":"Incidents & appeals","pillar":"P7","questions":"AI failures, errors, complaints? Resolution quality? Complaint/appeal volume? Contestability process breakdowns?"},{"area":"Vendor performance","pillar":"P8","questions":"SLAs being met? Vendor acquired or ownership changed? Cost tracking to projection? Exit still feasible?"},{"area":"Governance health","pillar":"P9","questions":"Governance structure still functioning? AI inventory current? Shared resources leveraged? Ready for next tier of maturity?"}]},"about":{"framework_description":"The AI Governance Navigator is built on a three-layer framework architecture designed specifically for community colleges:\n\nLayer 1: Four Ethical Criteria \u2014 portable principles that apply to any community college system. AI implementation is ethical when it produces equitable student outcomes, governs data responsibly, maintains an ethics and safety foundation, and takes a thoughtful multi-year approach.\n\nLayer 2: Nine Operational Pillars \u2014 the evaluation structure. Each pillar has questions, scoring rubrics, and remediation actions. Portable across any CC system.\n\nLayer 3: CCCCO HUMANS Framework \u2014 California's binding framework for all 116 community colleges. The Navigator maps pillars to HUMANS letters. Non-California colleges skip this layer and still have a complete framework.","research_base":"We scanned 224+ AI governance frameworks across 12 global domains \u2014 from the African Union\u2019s Continental AI Strategy to Singapore\u2019s Agentic AI Addendum. 62 made the first cut. 14 got deeply analyzed for community college applicability. Every recommendation traces back to specific provisions in those 14, cross-referenced and tested for CC feasibility.\n\nOf those 224+ frameworks, only 2 directly address community colleges \u2014 despite CCs serving nearly half of all US undergraduates, disproportionately serving historically marginalized populations, and operating as the primary workforce training pipeline.\n\nThe Navigator addresses 6 governance gaps with zero coverage from any framework globally, including adjunct faculty realities (70%+ of CC faculty), adult learner contexts (average CC student age 28+), Student Services-specific use cases, and institutional capacity building for resource-constrained colleges. 42 novel provisions were developed to fill gaps no existing framework addresses.","source_citations":["CCCCO AI Mobilization Framework (HUMANS)","ASCCC Equity-Centered AI Policy","OMB M-25-21 (Federal AI Governance)","Singapore Agentic AI Framework","NIST AI 600-1","Kapor Foundation Justice Lens","NAIC AI Governance Standards","IEEE P7004","GAO AI Accountability Framework","SACSCOC/C-RAC Accreditation Standards","ATD Achieving the Dream Action Areas","IEAIED (International Educational AI Ethical Design)","CHAI Model Cards","HEAT-AI Framework","SREB AI Governance","Alabama AI Template","Local Government AI Handbook","Advance CTE / Perkins V","UNESCO AI Competency Frameworks","Oregon State Bloom's Taxonomy for AI","WCET AI Governance","EDUCAUSE AI Resources","NACUBO/E&I Cooperative Procurement"],"built_by":"AQL Labs / FutureObjects Research, commissioned by College Futures Foundation.","footer_text":"Generated by the AI Governance Navigator \u2014 AQL Labs / FutureObjects Research / College Futures Foundation"},"dependency_profile":{"section_intro":"These four questions help you understand whether this tool builds capability or creates dependency. There are no wrong answers \u2014 but there are answers you should know before you deploy.","questions":[{"id":"D1","label":"Disappearance Test","question":"What happens if this tool disappears tomorrow?","options":[{"score":1,"label":"Convenience lost","description":"Students and staff lose a convenience but can still complete the task.","what_youre_looking_for":"The task can be done without the tool. The tool speeds it up, reduces friction, or improves quality \u2014 but the underlying capability remains. Example: a chatbot that answers FAQs; staff can answer the same questions."},{"score":2,"label":"Significant disruption","description":"Students and staff would struggle significantly and need time to rebuild.","what_youre_looking_for":"Some processes have been restructured around the tool. Removing it would require rebuilding workflows, retraining staff, or manually replicating what the tool automated. Doable, but disruptive. Example: an early alert system that replaced manual advisor check-ins."},{"score":3,"label":"Unable to perform","description":"Students and staff would be unable to perform the task at all.","what_youre_looking_for":"The tool is the process. Without it, the institution lacks the knowledge, staff, or infrastructure to perform the function. Some tools become essential infrastructure. That's not wrong \u2014 but you should know it before you commit."}]},{"id":"D2","label":"Capability Trajectory","question":"After a year of use, will users be better at this task without the tool, about the same, or less capable?","options":[{"score":1,"label":"Better \u2014 capability building","description":"The tool teaches the process or builds transferable skills.","what_youre_looking_for":"Socratic tutoring that builds problem-solving skills. Guided pathways assistant that teaches students to read degree audits. The tool is a scaffold, not a crutch."},{"score":2,"label":"About the same \u2014 neutral","description":"The tool handles a task without changing underlying ability.","what_youre_looking_for":"Translation service that handles communications without teaching staff the language. Neither builds nor erodes capability. The tool does its job; users do theirs."},{"score":3,"label":"Less capable \u2014 erosion risk","description":"The tool replaces practice or judgment that would otherwise develop.","what_youre_looking_for":"Advisors who stop learning degree requirements because the system handles it. Students who can't navigate FAFSA because the tool always did it for them. Capability erosion is a real risk with tools that do the thinking. It doesn't mean don't use it \u2014 it means track it."}]},{"id":"D3","label":"Navigate-With vs. Navigate-For","question":"Does the tool show users how to navigate this process, or does it navigate for them?","options":[{"score":1,"label":"Shows how \u2014 navigate-with","description":"Walks through steps, builds ability to do it independently.","what_youre_looking_for":"Tool explains why a course is recommended, walks through degree requirements, teaches the student to evaluate options. Transparency by design. The user learns the process, not just the result."},{"score":2,"label":"Mix \u2014 configurable","description":"Some features explain, some execute, or it depends on configuration.","what_youre_looking_for":"Tool has both guided mode and auto-pilot mode. Faculty or admin can configure which mode is default. Some interactions explain, others just execute. The key question: which mode is actually deployed?"},{"score":3,"label":"Navigates for them","description":"Users input need, tool produces outcome directly.","what_youre_looking_for":"Student enters 'I need financial aid help' and receives a completed application plan. No visibility into the process, logic, or alternatives. Navigate-for tools are efficient. But they also mean users never learn the process. Name that trade-off."}]},{"id":"D4","label":"Exit Design","question":"Is there a point where users are expected to do this without the tool?","options":[{"score":1,"label":"Yes \u2014 independence designed","description":"Explicit milestone or transition where tool is removed or reduced.","what_youre_looking_for":"After two semesters, students are expected to navigate degree audits independently. Tool use decreases as student progresses. Deliberate fade. The tool is temporary by design."},{"score":2,"label":"Not explicitly \u2014 parallel systems","description":"Tool supplements rather than replaces existing process.","what_youre_looking_for":"Advisors still do manual advising; the tool is an additional resource. If the tool disappeared, the original process still exists. No formal exit plan, but also no full replacement."},{"score":3,"label":"No \u2014 permanent infrastructure","description":"The tool is the process now. No plan for users to perform without it.","what_youre_looking_for":"The institution eliminated the manual process when they deployed the tool. There is no 'without the tool' plan. Permanent infrastructure is a valid choice. Translation for a Mixtec speaker is permanent and appropriate. What matters is that the choice is conscious."}]}],"scoring":{"range":"4-12","calculation":"Sum of D1 + D2 + D3 + D4"},"profiles":{"low":{"label":"Low Dependency","badge_color":"green","score_range":"4-5","interpretation":"This tool builds or preserves capability. Standard governance applies.","what_this_means":"The tool augments human capacity without replacing it. Users can still do the work without it. Standard review cadence \u2014 no additional dependency governance requirements. At annual review, re-ask the capability trajectory question (D2). If the answer shifts toward 'less capable,' reassess."},"medium":{"label":"Medium Dependency","badge_color":"yellow","score_range":"6-8","interpretation":"This tool has mixed characteristics \u2014 some capability-building, some replacement. Your roadmap will include capability checks at key review points.","what_this_means":"Some processes may have been restructured around this tool. Removing it would be disruptive but not impossible. Your governance roadmap adds three requirements: verify the tool is deployed in its most capability-building mode, test whether users can still perform the task at 6 months, and maintain a documented non-AI alternative."},"high":{"label":"High Dependency","badge_color":"red","score_range":"9-12","interpretation":"This tool replaces capability. That's not a failure \u2014 but it is a consequential decision that requires specific protections. Your roadmap will include dependency governance requirements.","what_this_means":"The institution is making a consequential decision about how work gets done. Your governance roadmap adds four requirements: document the dependency decision and who made it, assess vendor lock-in and exit viability, conduct a 12-month sunset evaluation, and \u2014 for high-risk tools \u2014 track whether staff capability has declined. High dependency is a finding, not a failure. Some tools are permanent infrastructure and that's appropriate. What matters is that the choice is conscious."}},"governance_requirements":{"low":[],"medium":[{"id":"DEP-M1","requirement":"Configuration review","timing":"Before deployment and at 6-month mark","description":"Verify the tool is deployed in its most capability-building mode. If it has a Socratic/guided mode and an auto-pilot mode, document which is the default and why. Review configuration at the 6-month mark."},{"id":"DEP-M2","requirement":"6-month capability check","timing":"6 months post-deployment","description":"Can users still perform the core task with reduced AI support? Test this \u2014 don't assume. Reduce AI availability for a cohort or a period and observe. If users cannot perform, escalate to governance committee."},{"id":"DEP-M3","requirement":"Alternative maintenance","timing":"Ongoing, tested annually","description":"The non-AI process must remain documented and periodically tested. If the tool disappeared tomorrow, there is a written process that staff can follow. Test the process at least annually \u2014 a walkthrough, not just words on paper."}],"high":[{"id":"DEP-H1","requirement":"Dependency acknowledgment","timing":"Before deployment","description":"Document the decision to deploy a high-dependency tool. Record: who made the decision, the rationale, the alternatives considered, and why dependency is accepted. This becomes part of the governance record. This is not a gate \u2014 it is a mirror."},{"id":"DEP-H2","requirement":"Vendor lock-in assessment","timing":"Before deployment","description":"Evaluate data portability, exit costs, and what happens if the vendor disappears or is acquired. For high-dependency tools, vendor lock-in is institutional vulnerability. Document: Can student data be exported in a standard format? What is the exit timeline? What would replacement cost?"},{"id":"DEP-H3","requirement":"12-month sunset evaluation","timing":"12 months post-deployment","description":"Answer: Is the dependency justified by outcomes? Has the dependency widened or narrowed? Are there equity implications \u2014 do some student populations experience more dependency than others? Is the cost-benefit still favorable? Document findings and present to governance committee."},{"id":"DEP-H4","requirement":"Capability impact tracking","timing":"Ongoing from deployment","description":"For high-risk, high-dependency tools: measure whether staff/advisor capability has declined since deployment. Compare decision quality, advising accuracy, or process knowledge against pre-deployment baseline. If capability has declined significantly, governance committee must decide: accept the dependency, invest in capability rebuilding, or reconsider the tool.","conditional":"tier_3_only"}]},"interaction_with_risk_tiers":{"note":"Dependency is orthogonal to risk. A tool can be low-risk and high-dependency, or high-risk and low-dependency. The combination determines governance intensity.","maximum_combination":"Tier 3 (High Risk) + High Dependency = maximum governance. All high-dependency protections plus capability impact tracking.","examples":[{"use_case":"SS-04: FAQ Chatbot","risk_tier":"Tier 1","likely_dependency":"Low (4-5)","why":"Informational only. Staff can answer the same questions."},{"use_case":"SS-05: Nectir Tutoring (Socratic mode)","risk_tier":"Tier 2","likely_dependency":"Low (4-5)","why":"Builds student capability by design."},{"use_case":"SS-06: Translation Services","risk_tier":"Tier 2","likely_dependency":"High (9-12)","why":"Permanent infrastructure for Mixtec speakers. Valid and appropriate dependency."},{"use_case":"SS-01: AI Advising (auto-pathways)","risk_tier":"Tier 3","likely_dependency":"High (9-12)","why":"Consequential decisions + replaces advisor judgment over time."},{"use_case":"SS-02: Early Alert (with human follow-up)","risk_tier":"Tier 3","likely_dependency":"Medium (6-8)","why":"High-stakes flagging but counselors still do the advising."}]},"design_principles":["These are not gates. The four questions produce a profile, not a GO/NO-GO. Profiles incentivize awareness; gates incentivize dishonesty.","'Permanent infrastructure' is valid. A translation tool for a Mixtec speaker is permanent and appropriate. The framework requires the choice to be conscious, not the choice to be temporary.","'What you're looking for' text legitimizes every answer. No answer is punished. The user should never feel judged for selecting '3.'","Patterns emerge through use. After profiling 3-4 tools, leaders notice: 'all our AI tools are navigate-for, not navigate-with.' That observation is worth more than any individual score.","Dependency is not risk. A high-dependency, low-risk tool requires different governance than a high-risk, low-dependency tool. The framework treats these as independent dimensions that combine, not collapse."]}};

/* Load content - try fetch, fall back to inline */
function loadContent(cb) {
  CONTENT = INLINE_CONTENT;
  /* Try to fetch the full JSON */
  fetch('navigator-v2-content.json').then(function(r) {
    if (!r.ok) throw new Error('not found');
    return r.json();
  }).then(function(data) {
    CONTENT = data;
    if (cb) cb();
  }).catch(function() {
    if (cb) cb();
  });
}

/* ============================================================
   USE CASES DATA
   ============================================================ */
var USE_CASES = [
  {id:"SS-01",name:"AI Advising / Guided Pathways Assistant",one_liner:"AI that recommends courses, pathways, or programs to students.",default_risk_tier:3,key_pillars:["P1","P2","P3","P5"],equity_flag:"Recommendations affect student trajectory. Errors compound for first-gen and Pell-eligible students."},
  {id:"SS-02",name:"Early Alert / Student Risk System",one_liner:"AI that flags students as \u2018at risk\u2019 and triggers interventions.",default_risk_tier:3,key_pillars:["P2","P3","P5","P7"],equity_flag:"Risk profiling creates surveillance dynamic. Disparate impact on students of color."},
  {id:"SS-03",name:"Financial Aid Triage & FAFSA Support",one_liner:"AI that assists with financial aid decisions or FAFSA guidance.",default_risk_tier:3,key_pillars:["P3","P5","P6"],equity_flag:"Automated decisions on access to resources. Errors disproportionately affect low-income students."},
  {id:"SS-04",name:"Student-Facing Chatbot / Digital Front Door",one_liner:"AI chatbot that answers student questions about the college.",default_risk_tier:1,key_pillars:["P1","P7","P8"],equity_flag:"Multilingual coverage gaps. Accessibility barriers."},
  {id:"SS-05",name:"AI Course Tutoring Assistant",one_liner:"AI tutor that helps students learn course material.",default_risk_tier:2,key_pillars:["P1","P4","P5"],equity_flag:"Hallucination risk. Socratic vs. answer mode affects learning."},
  {id:"SS-06",name:"Multilingual Support / Translation Services",one_liner:"AI that translates institutional materials or student communications.",default_risk_tier:2,key_pillars:["P2","P7"],equity_flag:"Quality varies by language. Cultural appropriateness."},
  {id:"SS-07",name:"Basic Needs Support & Resource Navigation",one_liner:"AI that connects students to food, housing, and emergency resources.",default_risk_tier:1,key_pillars:["P6","P7"],equity_flag:"Sensitive data (food insecurity, housing, immigration status). Privacy paramount."},
  {id:"SS-08",name:"Career Services AI",one_liner:"AI that helps students with resumes, interview prep, or career exploration.",default_risk_tier:1,key_pillars:["P1","P2"],equity_flag:"Pathway bias across career clusters. Equity across CTE and transfer."},
  {id:"SS-09",name:"Student Journey Mapping / Friction Detection",one_liner:"AI that analyzes student pathways to find where students get stuck.",default_risk_tier:2,key_pillars:["P5","P6","P7"],equity_flag:"PII. Aggregation vs. individual tracking. Surveillance risk."},
  {id:"SS-10",name:"Registration & Enrollment Support",one_liner:"AI that assists with course registration, waitlists, or enrollment processes.",default_risk_tier:2,key_pillars:["P1","P3","P5"],equity_flag:"Automated enrollment decisions affect access. Waitlist prioritization."},
  {id:"SS-XX",name:"Custom / Other",one_liner:"A Student Services AI use case not listed above.",default_risk_tier:null,key_pillars:[],equity_flag:"User describes equity considerations."}
];

/* ============================================================
   ROUTING QUESTIONS DATA (Step 0)
   ============================================================ */
var ROUTING_QUESTIONS = [
  {
    id: 'q1',
    type: 'multi',
    maxSelections: 3,
    question: 'Where are students getting stuck?',
    subtitle: 'Pick up to three. This tells us where AI could have the biggest impact for your students.',
    options: [
      { id: 'advising', label: "Students can\u2019t get advising appointments when they need them", useCasePoints: { 'SS-01': 3 } },
      { id: 'offtrack', label: "Students are falling off track and we don\u2019t catch it early enough", useCasePoints: { 'SS-02': 3 } },
      { id: 'finaid', label: "Financial aid is confusing and students abandon applications", useCasePoints: { 'SS-03': 3 } },
      { id: 'afterhours', label: "Students can\u2019t get answers outside business hours", useCasePoints: { 'SS-04': 3 } },
      { id: 'tutoring', label: "Students need help in courses but tutoring isn\u2019t available or accessible", useCasePoints: { 'SS-05': 3 } },
      { id: 'language', label: "Language barriers prevent students from accessing services", useCasePoints: { 'SS-06': 3 } },
      { id: 'services', label: "Students don\u2019t know what support services exist or how to find them", useCasePoints: { 'SS-07': 3, 'SS-04': 3 } },
      { id: 'career', label: "Career planning feels disconnected from what students are studying", useCasePoints: { 'SS-08': 3 } }
    ]
  },
  {
    id: 'q2',
    type: 'single',
    question: 'How many students does your college serve?',
    subtitle: 'This helps us calibrate recommendations to your scale.',
    options: [
      { id: 'under5k', label: 'Under 5,000 (headcount)', effect: 'small' },
      { id: '5k-15k', label: '5,000 \u2013 15,000', effect: 'medium' },
      { id: '15k-30k', label: '15,000 \u2013 30,000', effect: 'large' },
      { id: 'over30k', label: 'Over 30,000', effect: 'xlarge' }
    ]
  },
  {
    id: 'q3',
    type: 'single',
    question: 'What does your data situation look like?',
    subtitle: "Be honest. This is the most common reason AI tools underperform \u2014 they need data you don\u2019t have or can\u2019t trust.",
    options: [
      { id: 'basic_sis', label: 'We have a functioning SIS and can pull clean enrollment and student demographic data', effect: 'basic' },
      { id: 'sis_plus', label: 'We have that, plus advising records, financial aid data, and some learning analytics', effect: 'good' },
      { id: 'rich_siloed', label: "We have rich data across multiple systems but they don\u2019t talk to each other well", effect: 'siloed' },
      { id: 'working_on_it', label: "We\u2019re still working on getting reliable data out of our core systems", effect: 'minimal' }
    ]
  },
  {
    id: 'q4',
    type: 'single',
    question: 'What\u2019s your staffing reality for Student Services technology?',
    subtitle: 'This determines how much governance infrastructure you can realistically maintain.',
    options: [
      { id: 'dedicated', label: 'We have dedicated IT staff who support Student Services tools', archetype: 'scaling' },
      { id: 'central_it', label: 'IT handles everything centrally; Student Services has no dedicated tech support', archetype: 'building' },
      { id: 'vendor_dep', label: 'We rely heavily on vendor support and system-level resources', archetype: 'lightweight' },
      { id: 'one_two', label: 'One or two people wear all the hats', archetype: 'lightweight' }
    ]
  },
  {
    id: 'q5',
    type: 'multi',
    maxSelections: 2,
    question: 'What are your biggest equity gaps right now?',
    subtitle: 'Pick up to two. This helps us recommend use cases that address your specific equity priorities.',
    options: [
      { id: 'completion_race', label: 'Completion rates differ significantly by race/ethnicity', useCasePoints: { 'SS-02': 2 } },
      { id: 'firstgen', label: 'First-generation students are less likely to persist', useCasePoints: { 'SS-01': 2, 'SS-07': 2 } },
      { id: 'working_access', label: "Students working full-time or with caregiving responsibilities can\u2019t access services during business hours", useCasePoints: { 'SS-04': 2, 'SS-06': 2 } },
      { id: 'multilingual', label: "Multilingual students don\u2019t receive adequate support in their language", useCasePoints: { 'SS-06': 2 } },
      { id: 'pell_completion', label: 'Pell-eligible students have lower completion rates', useCasePoints: { 'SS-03': 2, 'SS-02': 2 } },
      { id: 'disability', label: 'Students with disabilities face access barriers in current systems', useCasePoints: { 'SS-04': 2 } },
      { id: 'transfer_gaps', label: 'Transfer rates differ significantly across student populations', useCasePoints: { 'SS-01': 2, 'SS-10': 2 } }
    ]
  },
  {
    id: 'q6',
    type: 'single',
    question: 'Is AI already being used informally in Student Services at your college?',
    subtitle: "This tells us whether governance needs to catch up to reality or get ahead of it.",
    options: [
      { id: 'yes_already', label: "Yes \u2014 staff and/or students are already using AI tools (ChatGPT, Copilot, vendor-embedded AI) without formal governance", effect: 'high_urgency' },
      { id: 'somewhat', label: "Somewhat \u2014 a few people are experimenting but it\u2019s not widespread", effect: 'moderate_urgency' },
      { id: 'not_yet', label: "No \u2014 AI isn\u2019t really being used in Student Services yet", effect: 'low_urgency' },
      { id: 'dont_know', label: "We don\u2019t know \u2014 and that\u2019s part of the problem", effect: 'unknown_urgency' }
    ]
  },
  {
    id: 'q7',
    type: 'single',
    question: 'Does your college already have any AI governance in place?',
    subtitle: "Even informal structures count \u2014 an AI committee, a policy statement, a procurement checklist.",
    options: [
      { id: 'formal', label: 'We have a formal AI governance committee or policy', archetype: 'scaling' },
      { id: 'informal', label: "We have something informal \u2014 an ad hoc group, a dean who\u2019s paying attention, some guidelines", archetype: 'building' },
      { id: 'general_tech', label: "Nothing specific to AI, but we have general technology governance processes", archetype: 'building' },
      { id: 'nothing', label: 'No governance structure that addresses AI', archetype: 'lightweight' }
    ]
  },
  {
    id: 'q8',
    type: 'single',
    question: "What\u2019s driving this? Why are you looking at AI for Student Services now?",
    subtitle: 'Understanding your motivation helps us recommend a starting point that builds momentum.',
    options: [
      { id: 'leadership', label: 'Leadership is asking for an AI strategy and we need to show progress', effect: 'leadership' },
      { id: 'peer_tool', label: "We\u2019ve seen a specific tool or heard about a peer institution\u2019s success", effect: 'peer' },
      { id: 'student_demand', label: 'Student demand \u2014 students expect AI-enabled services', effect: 'student_demand' },
      { id: 'enrollment', label: 'Enrollment/retention pressure \u2014 we need to do more with less', effect: 'enrollment' },
      { id: 'equity_imp', label: "Equity imperative \u2014 current approaches aren\u2019t reaching all students", effect: 'equity' },
      { id: 'system_directive', label: 'System-level directive \u2014 CCCCO or district is requiring AI governance', effect: 'system' }
    ]
  }
];

/* Data readiness map: Q3 answer -> per-use-case readiness (green/yellow/red) */
var DATA_READINESS_MAP = {
  'basic_sis': {
    'SS-01': 'red', 'SS-02': 'red', 'SS-03': 'red',
    'SS-04': 'green', 'SS-05': 'yellow', 'SS-06': 'green',
    'SS-07': 'green', 'SS-08': 'green', 'SS-09': 'yellow', 'SS-10': 'yellow'
  },
  'sis_plus': {
    'SS-01': 'green', 'SS-02': 'green', 'SS-03': 'green',
    'SS-04': 'green', 'SS-05': 'green', 'SS-06': 'green',
    'SS-07': 'green', 'SS-08': 'green', 'SS-09': 'green', 'SS-10': 'green'
  },
  'rich_siloed': {
    'SS-01': 'yellow', 'SS-02': 'yellow', 'SS-03': 'yellow',
    'SS-04': 'green', 'SS-05': 'green', 'SS-06': 'green',
    'SS-07': 'green', 'SS-08': 'green', 'SS-09': 'yellow', 'SS-10': 'yellow'
  },
  'working_on_it': {
    'SS-01': 'red', 'SS-02': 'red', 'SS-03': 'red',
    'SS-04': 'green', 'SS-05': 'yellow', 'SS-06': 'green',
    'SS-07': 'green', 'SS-08': 'green', 'SS-09': 'red', 'SS-10': 'red'
  }
};

/* ============================================================
   PILLARS DATA (populated from content JSON at init)
   ============================================================ */
var PILLARS = [];
var NO_GO_CRITERIA = [];
var SCREENING_DATA = {};
var ARCHETYPES = [];
var SCORE_PATTERNS = [];

function populateDataFromContent() {
  if (!CONTENT) return;
  /* Pillars */
  if (CONTENT.pillars) {
    PILLARS = CONTENT.pillars;
  }
  /* No-go */
  if (CONTENT.nogo_criteria) {
    NO_GO_CRITERIA = CONTENT.nogo_criteria;
  }
  /* Screening questions per use case */
  if (CONTENT.use_cases) {
    CONTENT.use_cases.forEach(function(uc) {
      SCREENING_DATA[uc.id] = uc.screening_questions || [];
      /* Merge full data into USE_CASES */
      var existing = USE_CASES.find(function(u) { return u.id === uc.id; });
      if (existing) {
        existing.description = uc.description || existing.one_liner;
        existing.governance_req = uc.governance_requirements_summary || '';
      }
    });
  }
  /* Archetypes */
  if (CONTENT.archetypes) {
    ARCHETYPES = CONTENT.archetypes;
  }
  /* Score patterns */
  if (CONTENT.scoring_interpretation && CONTENT.scoring_interpretation.overall_patterns) {
    SCORE_PATTERNS = CONTENT.scoring_interpretation.overall_patterns;
  }
  /* Dependency profile data */
  if (CONTENT.dependency_profile) {
    DEP_DATA = CONTENT.dependency_profile;
  }
}

/* ============================================================
   RISK TIER HELPERS
   ============================================================ */
var RISK_TIERS = {
  3: { name: 'High', label: 'TIER 3', cls: 'tier-high', color: 'var(--risk-high)',
       desc: 'Affects enrollment, financial aid, academic standing. Automated or semi-automated decisions. Sensitive data.',
       governance: 'All 9 pillars mandatory. P2 and P6 must score \u2265 2. Full governance review required.' },
  2: { name: 'Medium', label: 'TIER 2', cls: 'tier-medium', color: 'var(--risk-medium)',
       desc: 'Touches advising or instructional core. Human reviews outputs. Accesses student records.',
       governance: 'All 9 pillars scored. P2 and P6 must score \u2265 2.' },
  1: { name: 'Low', label: 'TIER 1', cls: 'tier-lower', color: 'var(--risk-lower)',
       desc: 'Informational only. No decisions affecting access. No sensitive data.',
       governance: 'Score P1, P2, P6, P7, P8 minimum. Others recommended.' }
};

function getMandatoryPillars(tier) {
  if (tier === 3) return ['P1','P2','P3','P4','P5','P6','P7','P8','P9'];
  if (tier === 2) return ['P1','P2','P3','P4','P5','P6','P7','P8','P9'];
  return ['P1','P2','P6','P7','P8'];
}

function tierBadge(tier) {
  var t = RISK_TIERS[tier];
  if (!t) return '<span class="tier-badge tier-medium">UNASSIGNED</span>';
  return '<span class="tier-badge ' + t.cls + '">' + t.label + ' (' + t.name + ')</span>';
}

function pillarColor(id) {
  var p = PILLARS.find(function(p) { return p.id === id; });
  return p ? p.color : '#666';
}

/* ============================================================
   NAVIGATION
   ============================================================ */
function navigate(viewId) {
  var views = document.querySelectorAll('.view');
  views.forEach(function(v) { v.classList.remove('active'); });
  var target = document.getElementById('view-' + viewId);
  if (target) {
    target.classList.add('active');
    window.scrollTo(0, 0);
  }
  history.pushState({ view: viewId }, '', '#' + viewId);
  updateNav(viewId);
}

function updateNav(viewId) {
  /* no-op for now, could update nav state */
}

window.addEventListener('popstate', function(e) {
  if (e.state && e.state.view) {
    var views = document.querySelectorAll('.view');
    views.forEach(function(v) { v.classList.remove('active'); });
    var target = document.getElementById('view-' + e.state.view);
    if (target) target.classList.add('active');
  }
});

/* ============================================================
   RENDER: LANDING
   ============================================================ */
function renderLanding() {
  var L = CONTENT.landing;
  document.getElementById('hero-headline').innerHTML = L.hero_headline.replace(/\n/g, '<br>');
  document.getElementById('hero-subhead').textContent = L.hero_subhead;
  document.getElementById('cta-routing').textContent = L.cta_routing || 'Help Me Choose';
  document.getElementById('cta-full').textContent = L.cta_full_path;
  document.getElementById('cta-quick').textContent = L.cta_quick_path;
  document.getElementById('credibility-text').textContent = L.credibility_statement;
  document.getElementById('how-headline').textContent = L.how_it_works.headline;

  /* Stat strip */
  var ss = '';
  L.stat_strip.forEach(function(s) {
    ss += '<div class="stat-item"><div class="stat-value">' + s.number + '</div><div class="stat-label">' + s.label + '</div></div>';
  });
  document.getElementById('stat-strip').innerHTML = ss;

  /* Steps */
  var steps = '';
  L.how_it_works.steps.forEach(function(s) {
    steps += '<div class="step-card"><div class="step-num">' + s.number + '</div><div class="step-label">' + s.label + '</div><div class="step-desc">' + s.description + '</div></div>';
  });
  document.getElementById('steps-grid').innerHTML = steps;

  /* Landing archetypes */
  renderLandingArchetypes();
}

function renderLandingArchetypes() {
  var html = '';
  ARCHETYPES.forEach(function(a) {
    var chars = '';
    if (a.you_might_be_this_if) {
      chars = '<ul class="arch-card-list">';
      a.you_might_be_this_if.forEach(function(c) { chars += '<li>' + c + '</li>'; });
      chars += '</ul>';
    }
    html += '<div class="arch-card" onclick="quickStartArchetype(\'' + a.id + '\')">' +
      '<div class="arch-card-name">' + a.name + '</div>' +
      '<div class="arch-card-tagline">' + a.tagline + '</div>' +
      '<div class="arch-card-desc">' + a.starting_recommendation + '</div>' +
      chars + '</div>';
  });
  document.getElementById('landing-archetypes').innerHTML = html;
}

/* ============================================================
   RENDER: ARCHETYPE SELECTOR
   ============================================================ */
function renderArchetypeSelector() {
  var html = '<div style="display: flex; flex-direction: column; gap: 1.6rem;">';
  ARCHETYPES.forEach(function(a) {
    var chars = '';
    if (a.characteristics) {
      chars = '<ul class="arch-card-list" style="margin-top: 1.2rem;">';
      a.characteristics.forEach(function(c) { chars += '<li>' + c + '</li>'; });
      chars += '</ul>';
    }
    var sel = state.archetype === a.id ? ' selected' : '';
    html += '<div class="card' + sel + '" onclick="pickArchetype(\'' + a.id + '\')" style="background: var(--surface);">' +
      '<div class="card-title">' + a.name + ' <span style="color: var(--signal); font-size: 1.4rem;">' + a.tagline + '</span></div>' +
      '<div class="card-desc">' + a.starting_recommendation + '</div>' +
      chars + '</div>';
  });
  html += '</div>';
  document.getElementById('archetype-cards').innerHTML = html;
}

function pickArchetype(id) {
  state.archetype = id;
  state.entryPath = 'quick';
  renderArchetypeSelector();
  document.getElementById('arch-next-btn').disabled = false;
}

function selectArchetypeAndContinue() {
  if (!state.archetype) return;
  navigate('use-case');
}

function quickStartArchetype(id) {
  state.archetype = id;
  state.entryPath = 'quick';
  navigate('use-case');
}

/* ============================================================
   RENDER: USE CASE SELECTOR
   ============================================================ */
function renderUseCaseSelector() {
  var html = '';
  USE_CASES.forEach(function(uc) {
    var sel = state.useCase && state.useCase.id === uc.id ? ' card-selected' : '';
    var badges = '';
    if (uc.default_risk_tier) {
      badges += tierBadge(uc.default_risk_tier);
    }
    uc.key_pillars.forEach(function(p) {
      badges += ' <span class="pillar-badge" style="background:' + pillarColor(p) + ';">' + p + '</span>';
    });
    html += '<div class="card' + sel + '" onclick="pickUseCase(\'' + uc.id + '\')">' +
      '<div style="margin-bottom: 1.2rem;">' + badges + '</div>' +
      '<div class="card-title">' + uc.name + '</div>' +
      '<div class="card-desc">' + uc.one_liner + '</div>' +
      (uc.equity_flag ? '<div style="margin-top: 0.8rem; font-size: 1.2rem; color: var(--accent); font-weight: 600;">\u26A0 ' + uc.equity_flag + '</div>' : '') +
      '</div>';
  });
  document.getElementById('use-case-cards').innerHTML = html;
}

function pickUseCase(id) {
  var uc = USE_CASES.find(function(u) { return u.id === id; });
  if (!uc) return;
  state.useCase = uc;
  renderUseCaseSelector();
  document.getElementById('uc-next-btn').disabled = false;
}

function selectUseCaseAndContinue() {
  if (!state.useCase) return;
  state.riskTier = state.useCase.default_risk_tier || 2;
  state.screeningAnswers = {};
  state.currentScreenQ = 0;
  state.screeningResult = null;
  state.screeningFlags = [];
  renderScreening();
  navigate('screening');
}

/* ============================================================
   RENDER: SCREENING
   ============================================================ */
function renderScreening() {
  var questions = SCREENING_DATA[state.useCase.id] || [];
  if (questions.length === 0) {
    /* No screening questions, skip to result */
    computeScreeningResult();
    renderScreenResult();
    navigate('screen-result');
    return;
  }
  var q = questions[state.currentScreenQ];
  if (!q) return;

  var total = questions.length;
  var pct = Math.round(((state.currentScreenQ + 1) / total) * 100);
  document.getElementById('screen-step').textContent = 'Screening ' + (state.currentScreenQ + 1) + ' of ' + total;
  document.getElementById('screen-pct').textContent = pct + '%';
  document.getElementById('screen-fill').style.width = pct + '%';

  var html = '<div style="margin-bottom: 2rem;">' +
    '<span class="tier-badge ' + RISK_TIERS[state.riskTier].cls + '">' + state.useCase.id + '</span>' +
    ' <span style="font-family: var(--display); font-size: 1.4rem; font-weight: 600; color: var(--ink-muted);">' + state.useCase.name + '</span></div>';
  html += '<div class="display-sm" style="margin-bottom: 2.4rem;">' + q.question + '</div>';
  if (CONTENT.screening && state.currentScreenQ === 0) {
    html += '<div style="color: var(--ink-muted); font-size: 1.4rem; margin-bottom: 2rem;">' + CONTENT.screening.intro_text + '</div>';
  }

  q.options.forEach(function(opt) {
    var sel = state.screeningAnswers['q' + state.currentScreenQ] === opt.value ? ' selected' : '';
    html += '<div class="assess-option' + sel + '" onclick="pickScreenAnswer(\'' + opt.value + '\')">' + opt.label + '</div>';
  });

  document.getElementById('screening-content').innerHTML = html;
  document.getElementById('screen-back').style.visibility = 'visible';
  document.getElementById('screen-next').disabled = !state.screeningAnswers['q' + state.currentScreenQ];
  document.getElementById('screen-next').textContent = state.currentScreenQ === questions.length - 1 ? 'See Result' : 'Next';
}

function pickScreenAnswer(val) {
  state.screeningAnswers['q' + state.currentScreenQ] = val;
  renderScreening();
}

function screenBack() {
  if (state.currentScreenQ > 0) {
    state.currentScreenQ--;
    renderScreening();
  } else {
    /* First screening question â€” go back based on entry path */
    if (state.entryPath === 'routing') {
      navigate('routing-results');
    } else {
      navigate('use-case');
    }
  }
}

function screenNext() {
  var questions = SCREENING_DATA[state.useCase.id] || [];
  if (!state.screeningAnswers['q' + state.currentScreenQ]) return;

  if (state.currentScreenQ < questions.length - 1) {
    state.currentScreenQ++;
    renderScreening();
  } else {
    computeScreeningResult();
    renderScreenResult();
    navigate('screen-result');
  }
}

function computeScreeningResult() {
  var questions = SCREENING_DATA[state.useCase.id] || [];
  var nogoCount = 0;
  var pauseCount = 0;
  var flags = [];

  questions.forEach(function(q, i) {
    var answer = state.screeningAnswers['q' + i];
    if (!answer) return;
    var opt = q.options.find(function(o) { return o.value === answer; });
    if (opt) {
      if (opt.logic === 'nogo') {
        nogoCount++;
        flags.push({ type: 'nogo', question: q.question, answer: opt.label, reason: q.go_nogo_logic });
      } else if (opt.logic === 'pause') {
        pauseCount++;
        flags.push({ type: 'pause', question: q.question, answer: opt.label, reason: q.go_nogo_logic });
      }
    }
  });

  state.screeningFlags = flags;
  if (nogoCount > 0) {
    state.screeningResult = 'nogo';
  } else if (pauseCount >= 2) {
    state.screeningResult = 'pause';
  } else if (pauseCount === 1) {
    state.screeningResult = 'go';
  } else {
    state.screeningResult = 'go';
  }
}

function renderScreenResult() {
  var S = CONTENT.screening || {};
  var html = '';

  if (state.screeningResult === 'go') {
    html += '<div class="alert alert-go"><div class="alert-title">GO \u2014 Proceed to Evaluation</div>' +
      '<div>' + (S.go_message || 'This use case looks viable for evaluation.') + '</div></div>';
  } else if (state.screeningResult === 'pause') {
    html += '<div class="alert alert-pause"><div class="alert-title">PAUSE \u2014 Concerns Flagged</div>' +
      '<div>' + (S.pause_message || 'We flagged some concerns.') + '</div></div>';
  } else {
    html += '<div class="alert alert-nogo"><div class="alert-title">NO-GO \u2014 Hard Stop</div>' +
      '<div>' + (S.nogo_message || 'This use case hit a hard stop.') + '</div></div>';
  }

  if (state.screeningFlags.length > 0) {
    html += '<div style="margin-top: 2.4rem;">';
    html += '<div class="display-xs" style="margin-bottom: 1.6rem;">Flagged Concerns</div>';
    state.screeningFlags.forEach(function(f) {
      var cls = f.type === 'nogo' ? 'alert-nogo' : 'alert-pause';
      html += '<div class="alert ' + cls + '" style="margin: 0.8rem 0;">' +
        '<div style="font-weight: 600; margin-bottom: 0.4rem;">' + f.type.toUpperCase() + ': ' + f.question + '</div>' +
        '<div style="font-size: 1.3rem;">Your answer: ' + f.answer + '</div>' +
        '<div style="font-size: 1.3rem; color: var(--ink-muted);">' + f.reason + '</div></div>';
    });
    html += '</div>';
  }

  html += '<div style="margin-top: 3.2rem; display: flex; gap: 1.6rem; flex-wrap: wrap;">';
  if (state.screeningResult !== 'nogo') {
    html += '<button class="btn btn-primary btn-lg" onclick="proceedToRiskTier()">Continue to Risk Tier</button>';
  }
  html += '<button class="btn btn-outline" onclick="navigate(\'use-case\')">Choose Different Use Case</button>';
  if (state.screeningResult === 'nogo') {
    html += '<button class="btn btn-outline" onclick="proceedToRiskTier()">Continue Anyway (flags noted)</button>';
  }
  html += '</div>';

  document.getElementById('screen-result-content').innerHTML = html;
}

function proceedToRiskTier() {
  /* Route through dependency profile first */
  state.dependencyProfile = { answers: { D1: null, D2: null, D3: null, D4: null }, totalScore: null, profile: null };
  renderDependencyProfile();
  navigate('dependency');
}

/* ============================================================
   RENDER: DEPENDENCY PROFILE (View 3b)
   ============================================================ */
var DEP_DATA = null;

function loadDepData() {
  if (CONTENT && CONTENT.dependency_profile) {
    DEP_DATA = CONTENT.dependency_profile;
  }
}

function renderDependencyProfile() {
  if (!DEP_DATA) loadDepData();
  if (!DEP_DATA) return;

  var questions = DEP_DATA.questions || [];
  var answered = 0;
  var runningTotal = 0;
  questions.forEach(function(q) {
    var ans = state.dependencyProfile.answers[q.id];
    if (ans !== null) { answered++; runningTotal += ans; }
  });

  var pct = Math.round((answered / questions.length) * 100);
  document.getElementById('dep-fill').style.width = pct + '%';
  document.getElementById('dep-running').textContent = answered > 0 ? runningTotal + ' of 12' : '';

  var html = '';

  /* Header */
  html += '<div style="margin-bottom: 3.2rem;">';
  html += '<div class="display-md" style="margin-bottom: 1.2rem;">Does this tool build capability or create dependency?</div>';
  html += '<div style="font-size: 1.5rem; color: var(--ink-muted); line-height: 1.6;">' + DEP_DATA.section_intro + '</div>';
  html += '</div>';

  /* Questions */
  questions.forEach(function(q) {
    var currentAnswer = state.dependencyProfile.answers[q.id];
    var isAnswered = currentAnswer !== null;
    html += '<div class="dep-question-card' + (isAnswered ? ' answered' : '') + '">';
    html += '<div class="dep-q-label">' + q.id + ': ' + q.label + '</div>';
    html += '<div class="dep-q-text">' + q.question + '</div>';

    q.options.forEach(function(opt) {
      var sel = currentAnswer === opt.score ? ' selected' : '';
      html += '<div class="dep-option' + sel + '" onclick="pickDepAnswer(\'' + q.id + '\',' + opt.score + ')">';
      html += '<div class="dep-option-header">';
      html += '<div class="dep-option-label">' + opt.label + '</div>';
      html += '<div class="dep-option-score">' + opt.score + '</div>';
      html += '</div>';
      html += '<div class="dep-option-desc">' + opt.description + '</div>';
      html += '<div class="dep-option-guidance">' + opt.what_youre_looking_for + '</div>';
      html += '</div>';
    });

    html += '</div>';
  });

  /* Result (shown when all 4 answered) */
  if (answered === 4) {
    computeDependencyScore();
    var dp = state.dependencyProfile;
    var profileData = DEP_DATA.profiles[dp.profile];
    if (profileData) {
      var resultCls = dp.profile === 'low' ? 'dep-result-low' : dp.profile === 'medium' ? 'dep-result-medium' : 'dep-result-high';
      html += '<div class="dep-result ' + resultCls + '">';
      html += '<div class="dep-badge dep-' + dp.profile + '" style="font-size: 1.4rem; padding: 0.6rem 1.6rem; margin-bottom: 1.2rem;">' + profileData.label + '</div>';
      html += '<div style="font-family: var(--display); font-size: 3.2rem; font-weight: 800; margin-bottom: 0.8rem;">' + dp.totalScore + ' <span style="font-size: 1.6rem; font-weight: 600; color: var(--ink-muted);">of 12</span></div>';
      html += '<div style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1.2rem;">' + profileData.interpretation + '</div>';
      html += '<div style="font-size: 1.4rem; color: var(--ink-soft); line-height: 1.6; max-width: 56rem; margin: 0 auto;">' + profileData.what_this_means + '</div>';
      html += '</div>';
    }
  }

  document.getElementById('dependency-content').innerHTML = html;

  /* Enable next button only when all answered */
  document.getElementById('dep-next').disabled = answered < 4;
}

function pickDepAnswer(qId, score) {
  state.dependencyProfile.answers[qId] = score;
  renderDependencyProfile();
}

function computeDependencyScore() {
  var ans = state.dependencyProfile.answers;
  var total = 0;
  var allAnswered = true;
  ['D1','D2','D3','D4'].forEach(function(k) {
    if (ans[k] === null) { allAnswered = false; return; }
    total += ans[k];
  });
  if (!allAnswered) return;

  state.dependencyProfile.totalScore = total;
  if (total <= 5) state.dependencyProfile.profile = 'low';
  else if (total <= 8) state.dependencyProfile.profile = 'medium';
  else state.dependencyProfile.profile = 'high';
}

function proceedFromDependency() {
  computeDependencyScore();
  renderRiskTier();
  navigate('risk-tier');
}

function depBadge(profile) {
  if (!profile) return '';
  var labels = { low: 'Low Dependency', medium: 'Medium Dependency', high: 'High Dependency' };
  return '<span class="dep-badge dep-' + profile + '">' + (labels[profile] || profile) + '</span>';
}

function getDependencyGovernanceReqs() {
  if (!DEP_DATA || !DEP_DATA.governance_requirements) return [];
  var profile = state.dependencyProfile.profile;
  if (!profile || profile === 'low') return [];
  var reqs = DEP_DATA.governance_requirements[profile] || [];
  /* Filter conditional requirements */
  return reqs.filter(function(r) {
    if (r.conditional === 'tier_3_only' && state.riskTier !== 3) return false;
    return true;
  });
}

/* ============================================================
   RENDER: RISK TIER
   ============================================================ */
function renderRiskTier() {
  document.getElementById('risk-tier-title').textContent = state.useCase.name;
  document.getElementById('risk-tier-desc').textContent = 'Auto-assigned based on use case. You can override if your implementation differs from the default.';

  var html = '<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.6rem;">';
  [3, 2, 1].forEach(function(t) {
    var rt = RISK_TIERS[t];
    var sel = state.riskTier === t ? ' card-selected' : '';
    html += '<div class="card' + sel + '" onclick="pickRiskTier(' + t + ')" style="text-align: center;">' +
      '<div class="tier-badge ' + rt.cls + '" style="font-size: 1.4rem; padding: 0.6rem 1.6rem;">' + rt.label + '</div>' +
      '<div class="card-title" style="margin-top: 1.2rem;">' + rt.name + ' Risk</div>' +
      '<div class="card-desc">' + rt.desc + '</div>' +
      '<div style="margin-top: 1.2rem; font-size: 1.2rem; color: var(--signal); font-weight: 600;">' + rt.governance + '</div></div>';
  });
  html += '</div>';
  document.getElementById('risk-tier-cards').innerHTML = html;

  /* Show/hide override reason */
  var isOverride = state.riskTier !== state.useCase.default_risk_tier;
  document.getElementById('override-reason-box').style.display = isOverride ? 'block' : 'none';
}

function pickRiskTier(tier) {
  state.riskTier = tier;
  state.riskTierOverride = (tier !== state.useCase.default_risk_tier);
  renderRiskTier();
}

function confirmRiskTier() {
  if (state.riskTierOverride) {
    var reason = document.getElementById('override-reason').value.trim();
    if (state.riskTier < state.useCase.default_risk_tier && !reason) {
      alert('Please provide a reason for lowering the risk tier.');
      return;
    }
    state.riskTierOverrideReason = reason;
  }
  state.currentPillar = 0;
  state.pillarScores = {};
  state.pillarNotes = {};
  renderScoring();
  navigate('scoring');
}

/* ============================================================
   RENDER: PILLAR SCORING
   ============================================================ */
function getPillarOrder() {
  var mandatory = getMandatoryPillars(state.riskTier);
  return PILLARS.map(function(p) {
    return { pillar: p, mandatory: mandatory.indexOf(p.id) !== -1 };
  });
}

function renderScoring() {
  var order = getPillarOrder();
  if (state.currentPillar >= order.length) {
    renderNoGoChecklist();
    navigate('nogo');
    return;
  }

  var entry = order[state.currentPillar];
  var p = entry.pillar;
  var total = order.length;
  var pct = Math.round(((state.currentPillar + 1) / total) * 100);

  document.getElementById('score-step').textContent = 'Pillar ' + (state.currentPillar + 1) + ' of ' + total;
  document.getElementById('score-pct').textContent = pct + '%';
  document.getElementById('score-fill').style.width = pct + '%';

  var html = '';
  /* Pillar header */
  html += '<div style="border-left: 6px solid ' + p.color + '; padding-left: 2.4rem; margin-bottom: 3.2rem;">';
  html += '<div style="display: flex; align-items: center; gap: 1.2rem; flex-wrap: wrap;">';
  html += '<span class="label" style="color: ' + p.color + ';">' + p.id + '</span>';
  if (!entry.mandatory) html += '<span class="tier-badge" style="background: var(--surface); color: var(--ink-muted);">RECOMMENDED</span>';
  if (state.isCalifornia && p.humans_mapping) html += '<span class="humans-badge">' + p.humans_mapping + '</span>';
  html += '</div>';
  html += '<div class="display-sm" style="margin-top: 0.8rem;">' + p.name + '</div>';
  html += '<div style="font-style: italic; color: var(--ink-muted); margin-top: 0.4rem; font-size: 1.5rem;">' + p.principle_statement + '</div>';
  if (p.hook) html += '<div style="font-family: var(--display); font-weight: 700; color: ' + p.color + '; margin-top: 0.8rem; font-size: 1.6rem;">' + p.hook + '</div>';
  html += '</div>';

  /* Questions reference */
  if (p.questions && p.questions.length > 0) {
    html += '<div class="q-table">';
    p.questions.forEach(function(q) {
      html += '<div class="q-row">' +
        '<div class="q-num">' + q.id + '</div>' +
        '<div><div class="q-text">' + q.text + '</div>' +
        '<div class="q-guidance">' + q.what_youre_looking_for + '</div></div></div>';
    });
    html += '</div>';
  }

  /* Score selector */
  var currentScore = state.pillarScores[p.id] || null;
  html += '<div class="display-xs" style="margin-top: 3.2rem; margin-bottom: 0.8rem;">Score this pillar</div>';
  html += '<div style="font-size: 1.3rem; color: var(--ink-muted); margin-bottom: 1.6rem;">Read the questions above as a reference. Score the pillar as a whole based on these rubrics:</div>';
  html += '<div class="score-options">';
  [3, 2, 1].forEach(function(s) {
    var sel = currentScore === s ? ' selected' : '';
    var label = s === 3 ? 'Good' : s === 2 ? 'Partial' : 'Poor';
    var text = p.scoring ? p.scoring[String(s)] : '';
    html += '<div class="score-btn' + sel + '" onclick="pickScore(\'' + p.id + '\',' + s + ')" style="border-top: 4px solid ' + (s === 3 ? 'var(--live)' : s === 2 ? 'var(--caution)' : 'var(--critical)') + ';">' +
      '<div class="score-btn-num" style="color: ' + (s === 3 ? 'var(--live)' : s === 2 ? 'var(--caution)' : 'var(--critical)') + ';">' + s + '</div>' +
      '<div style="font-family: var(--display); font-weight: 700; margin-bottom: 0.4rem;">' + label + '</div>' +
      '<div class="score-btn-text">' + text + '</div></div>';
  });
  html += '</div>';

  /* Notes */
  var noteVal = state.pillarNotes[p.id] || '';
  html += '<textarea class="notes-input" placeholder="Optional notes for ' + p.id + '..." onchange="state.pillarNotes[\'' + p.id + '\']=this.value">' + noteVal + '</textarea>';

  /* Skip option for non-mandatory */
  if (!entry.mandatory) {
    html += '<div style="margin-top: 1.6rem; text-align: center;"><button class="btn-text" onclick="skipPillar(\'' + p.id + '\')">Skip this pillar (recommended only for Tier 1)</button></div>';
  }

  document.getElementById('scoring-content').innerHTML = html;

  /* Nav buttons */
  document.getElementById('score-back').style.visibility = state.currentPillar === 0 ? 'hidden' : 'visible';
  var isLast = state.currentPillar === order.length - 1;
  document.getElementById('score-next').textContent = isLast ? 'Continue to No-Go Check' : 'Next Pillar';
  document.getElementById('score-next').disabled = !currentScore && entry.mandatory;
}

function pickScore(pillarId, score) {
  state.pillarScores[pillarId] = score;
  renderScoring();

  /* Inline no-go check for P1=1 or P3=1 on high-risk */
  if (pillarId === 'P1' && score === 1) {
    setTimeout(function() { alert('No-Go Warning: P1 scored 1. If you can\'t articulate the educational purpose, this tool may not belong in Student Services.'); }, 300);
  }
  if (pillarId === 'P3' && score === 1 && state.riskTier === 3) {
    setTimeout(function() { alert('No-Go Warning: P3 scored 1 on a High-Risk tool. No human override for consequential decisions is a no-go condition.'); }, 300);
  }
}

function skipPillar(pillarId) {
  state.pillarScores[pillarId] = null;
  state.currentPillar++;
  renderScoring();
}

function scoreBack() {
  if (state.currentPillar > 0) {
    state.currentPillar--;
    renderScoring();
  } else {
    navigate('risk-tier');
  }
}

function scoreNext() {
  var order = getPillarOrder();
  var entry = order[state.currentPillar];
  if (entry.mandatory && !state.pillarScores[entry.pillar.id]) return;

  state.currentPillar++;
  if (state.currentPillar >= order.length) {
    renderNoGoChecklist();
    navigate('nogo');
  } else {
    renderScoring();
  }
}

function goBackToLastPillar() {
  state.currentPillar = getPillarOrder().length - 1;
  renderScoring();
  navigate('scoring');
}

/* ============================================================
   RENDER: NO-GO CHECKLIST
   ============================================================ */
function renderNoGoChecklist() {
  var html = '';
  NO_GO_CRITERIA.forEach(function(ng, i) {
    var answer = state.noGoAnswers[ng.id];
    var flagged = answer === 'no';
    var clear = answer === 'yes';
    var cls = flagged ? ' flagged' : clear ? ' clear' : '';

    html += '<div class="nogo-item' + cls + '">' +
      '<div class="nogo-statement">' + (i + 1) + '. ' + ng.statement + '</div>' +
      '<div class="nogo-why">' + ng.why + '</div>' +
      '<div class="nogo-options">' +
        '<div class="nogo-opt' + (clear ? ' selected-yes' : '') + '" onclick="pickNoGo(\'' + ng.id + '\',\'yes\')">Yes \u2014 condition met</div>' +
        '<div class="nogo-opt' + (flagged ? ' selected-no' : '') + '" onclick="pickNoGo(\'' + ng.id + '\',\'no\')">No \u2014 not met</div>' +
      '</div>';
    if (flagged) {
      html += '<div style="margin-top: 1.2rem; font-size: 1.3rem; color: var(--critical); font-weight: 600;">Action required: ' + ng.what_to_do + '</div>';
    }
    html += '</div>';
  });
  document.getElementById('nogo-checklist').innerHTML = html;

  /* Enable/disable next */
  var allAnswered = NO_GO_CRITERIA.every(function(ng) { return state.noGoAnswers[ng.id]; });
  document.getElementById('nogo-next').disabled = !allAnswered;
}

function pickNoGo(id, val) {
  state.noGoAnswers[id] = val;
  if (val === 'no') {
    if (state.noGoFlags.indexOf(id) === -1) state.noGoFlags.push(id);
  } else {
    state.noGoFlags = state.noGoFlags.filter(function(f) { return f !== id; });
  }
  renderNoGoChecklist();
}

function finishNoGo() {
  /* Also check score-derived no-gos */
  if (state.pillarScores.P1 === 1 && state.noGoFlags.indexOf('NG-01') === -1) {
    state.noGoFlags.push('NG-01');
  }
  if (state.pillarScores.P3 === 1 && state.riskTier === 3 && state.noGoFlags.indexOf('NG-03') === -1) {
    state.noGoFlags.push('NG-03');
  }
  if (state.pillarScores.P7 === 1) {
    if (state.noGoFlags.indexOf('NG-06') === -1) state.noGoFlags.push('NG-06');
    if (state.noGoFlags.indexOf('NG-07') === -1) state.noGoFlags.push('NG-07');
  }

  /* Show loading then profile */
  navigate('loading');
  setTimeout(function() {
    renderProfile();
    navigate('profile');
  }, 1500);
}

/* ============================================================
   RENDER: GOVERNANCE PROFILE (View 5)
   ============================================================ */
function renderProfile() {
  var html = '';

  /* Hero */
  html += '<div class="profile-hero"><div class="profile-hero-inner">';
  html += '<div class="label" style="color: var(--signal); margin-bottom: 2.4rem;">Governance Profile</div>';
  html += '<div class="display-lg" style="margin-bottom: 1.6rem;">' + (state.useCase ? state.useCase.name : 'Assessment') + '</div>';
  html += '<div style="display: flex; gap: 1.6rem; align-items: center; flex-wrap: wrap; margin-bottom: 2rem;">';
  html += tierBadge(state.riskTier);
  if (state.archetype) {
    var arch = ARCHETYPES.find(function(a) { return a.id === state.archetype; });
    if (arch) html += '<span style="font-family: var(--display); font-size: 1.3rem; font-weight: 600; color: var(--dark-muted);">' + arch.name + ' Institution</span>';
  }
  if (state.riskTierOverride) {
    html += '<span style="font-size: 1.2rem; color: var(--caution);">Risk tier overridden' + (state.riskTierOverrideReason ? ': ' + state.riskTierOverrideReason : '') + '</span>';
  }
  if (state.dependencyProfile.profile) {
    html += depBadge(state.dependencyProfile.profile);
  }
  html += '</div>';

  /* Score summary */
  var totalScore = 0;
  var scoredCount = 0;
  PILLARS.forEach(function(p) {
    if (state.pillarScores[p.id]) { totalScore += state.pillarScores[p.id]; scoredCount++; }
  });
  var maxScore = scoredCount * 3;
  html += '<div style="display: flex; gap: 4rem; margin-top: 2rem; flex-wrap: wrap;">';
  html += '<div><div style="font-family: var(--display); font-size: 4.8rem; font-weight: 800; color: var(--signal);">' + totalScore + '</div><div class="label" style="color: var(--dark-muted);">Total Score</div></div>';
  html += '<div><div style="font-family: var(--display); font-size: 4.8rem; font-weight: 800;">' + maxScore + '</div><div class="label" style="color: var(--dark-muted);">Possible</div></div>';
  if (state.dependencyProfile.totalScore !== null) {
    html += '<div><div style="font-family: var(--display); font-size: 4.8rem; font-weight: 800; color: var(--accent);">' + state.dependencyProfile.totalScore + '</div><div class="label" style="color: var(--dark-muted);">Dependency (of 12)</div></div>';
  }
  html += '<div><div style="font-family: var(--display); font-size: 4.8rem; font-weight: 800; color: ' + (state.noGoFlags.length > 0 ? 'var(--critical)' : 'var(--live)') + ';">' + state.noGoFlags.length + '</div><div class="label" style="color: var(--dark-muted);">No-Go Flags</div></div>';
  html += '</div>';
  html += '</div></div>';

  /* No-go banners */
  if (state.noGoFlags.length > 0) {
    html += '<div class="section" style="padding: 3.2rem 6rem; background: #fef2f2;"><div class="section-inner">';
    html += '<div class="display-xs" style="color: var(--critical); margin-bottom: 1.6rem;">\u26D4 No-Go Conditions Triggered</div>';
    state.noGoFlags.forEach(function(fid) {
      var ng = NO_GO_CRITERIA.find(function(n) { return n.id === fid; });
      if (ng) {
        html += '<div class="nogo-banner"><div class="nogo-banner-title">' + ng.statement + '</div>' +
          '<div style="font-size: 1.4rem; margin-bottom: 0.8rem;">' + ng.why + '</div>' +
          '<div style="font-size: 1.4rem; font-weight: 600; color: var(--ink);">Action: ' + ng.what_to_do + '</div></div>';
      }
    });
    html += '</div></div>';
  }

  /* Pillar score table */
  html += '<div class="section" style="padding: 4rem 6rem;"><div class="section-inner">';
  html += '<div class="display-sm" style="margin-bottom: 2.4rem;">Pillar Scores</div>';
  var mandatory = getMandatoryPillars(state.riskTier);

  PILLARS.forEach(function(p) {
    var score = state.pillarScores[p.id];
    var isMandatory = mandatory.indexOf(p.id) !== -1;
    var scoreText = score ? score : (isMandatory ? '\u2014' : 'N/A');
    var scoreColor = score === 3 ? 'var(--live)' : score === 2 ? 'var(--caution)' : score === 1 ? 'var(--critical)' : 'var(--mid)';
    var status = '';
    if (score === 1) status = '<span style="color: var(--critical);">REMEDIATION NEEDED</span>';
    else if (score === 2) status = '<span style="color: var(--caution);">PARTIAL</span>';
    else if (score === 3) status = '<span style="color: var(--live);">GOOD</span>';
    else status = '<span style="color: var(--mid);">NOT SCORED</span>';

    /* Min score warnings */
    if ((p.id === 'P2' || p.id === 'P6') && state.riskTier >= 2 && score && score < 2) {
      status += ' <span style="color: var(--critical); font-size: 1rem;">\u26A0 Below minimum</span>';
    }

    html += '<div class="pillar-row">';
    html += '<div class="pillar-bar" style="background: ' + p.color + ';"></div>';
    html += '<div class="pillar-info">';
    html += '<div class="pillar-id">' + p.id + '</div>';
    html += '<div class="pillar-name-cell"><div class="pillar-name">' + p.name;
    if (state.isCalifornia && p.humans_mapping) html += ' <span class="humans-badge">' + p.humans_mapping + '</span>';
    html += '</div><div class="pillar-principle">' + p.principle_statement + '</div></div>';
    html += '<div class="pillar-score" style="color: ' + scoreColor + ';">' + scoreText + '</div>';
    html += '<div class="pillar-status">' + status + '</div>';
    html += '</div></div>';
  });

  html += '</div></div>';

  /* Pattern interpretation */
  var patterns = analyzePatterns();
  if (patterns.length > 0) {
    html += '<div class="section section-surface" style="padding: 4rem 6rem;"><div class="section-inner">';
    html += '<div class="display-sm" style="margin-bottom: 2.4rem;">What Your Scores Mean</div>';
    patterns.forEach(function(pat) {
      html += '<div class="pattern-card">';
      html += '<div class="pattern-title">' + pat.pattern + '</div>';
      html += '<div class="pattern-desc">' + pat.interpretation + '</div>';
      html += '<div class="pattern-action">Action: ' + pat.action + '</div>';
      html += '</div>';
    });
    html += '</div></div>';
  }

  /* Dependency governance preview */
  var depReqs = getDependencyGovernanceReqs();
  if (depReqs.length > 0 && state.dependencyProfile.profile) {
    html += '<div class="section" style="padding: 4rem 6rem; background: var(--accent-light);"><div class="section-inner">';
    html += '<div style="display: flex; align-items: center; gap: 1.2rem; margin-bottom: 2rem;">';
    html += depBadge(state.dependencyProfile.profile);
    html += '<div class="display-sm">Dependency Governance Requirements</div>';
    html += '</div>';
    html += '<div style="font-size: 1.4rem; color: var(--ink-soft); margin-bottom: 2rem; line-height: 1.6;">';
    if (DEP_DATA && DEP_DATA.profiles && DEP_DATA.profiles[state.dependencyProfile.profile]) {
      html += DEP_DATA.profiles[state.dependencyProfile.profile].what_this_means;
    }
    html += '</div>';
    depReqs.forEach(function(r) {
      html += '<div class="dep-gov-section">';
      html += '<div style="font-family: var(--display); font-weight: 700; font-size: 1.5rem; margin-bottom: 0.4rem;">' + r.requirement + '</div>';
      html += '<div style="font-size: 1.2rem; color: var(--accent); font-weight: 600; margin-bottom: 0.6rem;">' + r.timing + '</div>';
      html += '<div style="font-size: 1.4rem; color: var(--ink-soft); line-height: 1.6;">' + r.description + '</div>';
      if (r.conditional) html += '<div style="font-size: 1.2rem; color: var(--critical); font-weight: 600; margin-top: 0.6rem;">Tier 3 (High Risk) only</div>';
      html += '</div>';
    });
    html += '</div></div>';
  }

  /* Action buttons */
  html += '<div class="section" style="padding: 4rem 6rem;"><div class="section-inner" style="display: flex; gap: 1.6rem; flex-wrap: wrap;">';
  html += '<button class="btn btn-primary btn-lg" onclick="generateRoadmap()">Generate Your Roadmap</button>';
  html += '<button class="btn btn-outline" onclick="saveAssessment()">Save Assessment</button>';
  html += '<button class="btn btn-outline" onclick="printView()">Print / Export</button>';
  html += '<button class="btn btn-outline" onclick="navigate(\'scoring\'); state.currentPillar = 0; renderScoring();">Edit Scores</button>';
  html += '</div></div>';

  document.getElementById('profile-content').innerHTML = html;
}

function analyzePatterns() {
  var matches = [];
  SCORE_PATTERNS.forEach(function(pat) {
    var matched = false;
    if (pat.pattern === 'P1 = 1' && state.pillarScores.P1 === 1) matched = true;
    if (pat.pattern === 'P9 = 1' && state.pillarScores.P9 === 1) matched = true;
    if (pat.pattern.indexOf('Any pillar = 1') !== -1 && state.riskTier === 3) {
      PILLARS.forEach(function(p) { if (state.pillarScores[p.id] === 1) matched = true; });
    }
    if (pat.pattern.indexOf('Multiple pillars = 2') !== -1) {
      var twos = 0;
      PILLARS.forEach(function(p) { if (state.pillarScores[p.id] === 2) twos++; });
      if (twos >= 3) matched = true;
    }
    if (pat.pattern.indexOf('All pillars') !== -1 && pat.pattern.indexOf('2') !== -1) {
      var allGe2 = true;
      PILLARS.forEach(function(p) { if (state.pillarScores[p.id] && state.pillarScores[p.id] < 2) allGe2 = false; });
      var scored = PILLARS.filter(function(p) { return state.pillarScores[p.id]; }).length;
      if (allGe2 && scored >= 5) matched = true;
    }
    if (pat.pattern.indexOf('Strong P6 & P8') !== -1) {
      if (state.pillarScores.P6 >= 3 && state.pillarScores.P8 >= 3 && (state.pillarScores.P4 <= 1 || state.pillarScores.P7 <= 1)) matched = true;
    }
    if (pat.pattern.indexOf('Strong P4 & P7') !== -1) {
      if (state.pillarScores.P4 >= 3 && state.pillarScores.P7 >= 3 && state.pillarScores.P6 <= 1) matched = true;
    }
    /* Dependency-aware patterns */
    if (pat.pattern.indexOf('High Dependency + Tier 3') !== -1) {
      if (state.dependencyProfile.profile === 'high' && state.riskTier === 3) matched = true;
    }
    if (pat.pattern.indexOf('High Dependency + weak P4') !== -1) {
      if (state.dependencyProfile.profile === 'high' && state.pillarScores.P4 && state.pillarScores.P4 <= 1) matched = true;
    }
    if (pat.pattern.indexOf('Medium/High Dependency + P8 = 1') !== -1) {
      if ((state.dependencyProfile.profile === 'medium' || state.dependencyProfile.profile === 'high') && state.pillarScores.P8 === 1) matched = true;
    }
    if (matched) matches.push(pat);
  });
  return matches;
}

/* ============================================================
   RENDER: ROADMAP (View 6)
   ============================================================ */
function generateRoadmap() {
  navigate('loading');
  setTimeout(function() {
    renderRoadmap();
    navigate('roadmap');
  }, 1200);
}

function renderRoadmap() {
  var RC = CONTENT.roadmap_content || {};
  var tier = state.riskTier;
  var tierKey = 'tier_' + tier;
  var archetype = state.archetype || 'building';

  var html = '';

  /* Hero */
  html += '<div class="profile-hero"><div class="profile-hero-inner">';
  html += '<div class="label" style="color: var(--signal); margin-bottom: 2.4rem;">Your Governance Roadmap</div>';
  html += '<div class="display-lg" style="margin-bottom: 1.6rem;">' + (state.useCase ? state.useCase.name : 'Assessment') + '</div>';
  html += '<div style="display: flex; gap: 1.6rem; align-items: center; flex-wrap: wrap;">';
  html += tierBadge(tier);
  if (state.dependencyProfile.profile) html += depBadge(state.dependencyProfile.profile);
  var arch = ARCHETYPES.find(function(a) { return a.id === archetype; });
  if (arch) html += '<span style="font-family: var(--display); font-size: 1.3rem; font-weight: 600; color: var(--dark-muted);">' + arch.name + ' Institution</span>';
  html += '<span style="font-size: 1.2rem; color: var(--dark-muted);">' + state.assessmentDate + '</span>';
  html += '</div>';
  html += '</div></div>';

  html += '<div class="section" style="padding: 4rem 6rem;"><div class="section-inner" style="max-width: 80rem;">';

  /* Intro */
  if (RC.intro_text) {
    html += '<div style="font-size: 1.5rem; color: var(--ink-soft); line-height: 1.6; margin-bottom: 4rem; border-left: 4px solid var(--signal); padding-left: 2rem;">' + RC.intro_text + '</div>';
  }

  /* Executive Summary */
  html += '<div class="roadmap-section">';
  html += '<div class="roadmap-section-title">Executive Summary</div>';
  var totalScore = 0; var scoredCount = 0;
  PILLARS.forEach(function(p) { if (state.pillarScores[p.id]) { totalScore += state.pillarScores[p.id]; scoredCount++; } });
  var rec = state.noGoFlags.length > 0 ? 'Do not deploy until no-go conditions are resolved.' : totalScore / scoredCount >= 2.5 ? 'Proceed with standard governance.' : 'Proceed with conditions. Document mitigation plans.';
  html += '<div style="font-size: 1.5rem; line-height: 1.7;">';
  html += 'This assessment evaluated <strong>' + (state.useCase ? state.useCase.name : 'the selected tool') + '</strong>';
  html += ' classified as <strong>Risk Tier ' + tier + ' (' + RISK_TIERS[tier].name + ')</strong>';
  if (state.dependencyProfile.profile) {
    var depLabels = { low: 'Low', medium: 'Medium', high: 'High' };
    html += ' with a <strong>' + depLabels[state.dependencyProfile.profile] + ' Dependency</strong> profile (' + state.dependencyProfile.totalScore + '/12)';
  }
  if (arch) html += ', evaluated by a <strong>' + arch.name + '</strong> institution';
  html += '. Total governance score: <strong>' + totalScore + '/' + (scoredCount * 3) + '</strong> across ' + scoredCount + ' pillars.';
  html += ' <strong>' + state.noGoFlags.length + '</strong> no-go criteria triggered.';
  html += ' <strong>Recommendation: ' + rec + '</strong>';
  html += '</div></div>';

  /* No-go flags if any */
  if (state.noGoFlags.length > 0) {
    html += '<div class="roadmap-section">';
    html += '<div class="roadmap-section-title" style="color: var(--critical);">No-Go Conditions to Resolve</div>';
    state.noGoFlags.forEach(function(fid) {
      var ng = NO_GO_CRITERIA.find(function(n) { return n.id === fid; });
      if (ng) {
        html += '<div class="nogo-banner"><div class="nogo-banner-title">' + ng.statement + '</div>' +
          '<div style="font-size: 1.4rem;">' + ng.what_to_do + '</div></div>';
      }
    });
    html += '</div>';
  }

  /* Before You Deploy */
  html += '<div class="roadmap-section">';
  html += '<div class="roadmap-section-title">Before You Deploy</div>';
  var bdItems = RC.before_deployment ? RC.before_deployment[tierKey] || RC.before_deployment.tier_2 : [];
  html += '<ul class="roadmap-list">';
  bdItems.forEach(function(item) { html += '<li>' + item + '</li>'; });
  html += '</ul></div>';

  /* Pillar-Specific Remediation (for pillars scoring 1) */
  var lowPillars = PILLARS.filter(function(p) { return state.pillarScores[p.id] === 1; });
  if (lowPillars.length > 0) {
    html += '<div class="roadmap-section">';
    html += '<div class="roadmap-section-title">Pillar-Specific Remediation</div>';
    lowPillars.forEach(function(p) {
      var actionKey = p.id + '_low';
      var action = RC.pillar_specific_actions ? RC.pillar_specific_actions[actionKey] : '';
      html += '<div style="margin-bottom: 2rem; padding: 2rem; border-left: 4px solid ' + p.color + '; background: var(--surface);">';
      html += '<div style="font-family: var(--display); font-weight: 700; margin-bottom: 0.8rem;">' + p.id + ': ' + p.name + ' (Score: 1)</div>';
      html += '<div style="font-size: 1.4rem; line-height: 1.6;">' + action + '</div>';
      html += '</div>';
    });
    html += '</div>';
  }

  /* Who's Involved (RACI) */
  html += '<div class="roadmap-section">';
  html += '<div class="roadmap-section-title">Who\u2019s Involved (RACI)</div>';
  var raciData = RC.raci_sketches ? RC.raci_sketches[archetype] || RC.raci_sketches.building : null;
  if (raciData) {
    if (raciData.description) html += '<div style="font-size: 1.4rem; color: var(--ink-muted); margin-bottom: 1.6rem;">' + raciData.description + '</div>';
    html += '<table class="raci-table"><thead><tr><th>Role</th><th>Responsible</th><th>Accountable</th><th>Consulted</th><th>Informed</th></tr></thead><tbody>';
    raciData.roles.forEach(function(r) {
      html += '<tr><td style="font-weight: 600;">' + r.role + '</td><td>' + r.responsible + '</td><td>' + r.accountable + '</td><td>' + r.consulted + '</td><td>' + r.informed + '</td></tr>';
    });
    html += '</tbody></table>';
  }
  html += '</div>';

  /* What to Track (90-day metrics) */
  html += '<div class="roadmap-section">';
  html += '<div class="roadmap-section-title">What to Track \u2014 First 90 Days</div>';
  var metrics = RC.ninety_day_metrics ? RC.ninety_day_metrics[tierKey] || RC.ninety_day_metrics.tier_2 : [];
  html += '<ul class="roadmap-list">';
  metrics.forEach(function(m) { html += '<li>' + m + '</li>'; });
  html += '</ul></div>';

  /* Review Cadence */
  html += '<div class="roadmap-section">';
  html += '<div class="roadmap-section-title">Review Cadence</div>';
  var cadence = RC.review_cadence ? RC.review_cadence[tierKey] || 'Annual' : 'Annual';
  html += '<div style="font-size: 1.5rem; padding: 2rem; background: var(--signal-10); border-left: 4px solid var(--signal);">' + cadence + '</div>';
  html += '</div>';

  /* Dependency Governance (conditionally inserted for Medium/High) */
  var depReqs = getDependencyGovernanceReqs();
  if (depReqs.length > 0 && state.dependencyProfile.profile) {
    html += '<div class="roadmap-section">';
    html += '<div class="roadmap-section-title" style="display: flex; align-items: center; gap: 1.2rem;">Dependency Governance ' + depBadge(state.dependencyProfile.profile) + '</div>';
    var depProfileData = DEP_DATA && DEP_DATA.profiles ? DEP_DATA.profiles[state.dependencyProfile.profile] : null;
    if (depProfileData) {
      html += '<div style="font-size: 1.5rem; color: var(--ink-soft); line-height: 1.6; margin-bottom: 2.4rem; border-left: 4px solid var(--accent); padding-left: 2rem;">' + depProfileData.what_this_means + '</div>';
    }
    depReqs.forEach(function(r) {
      html += '<div class="dep-gov-section">';
      html += '<div style="display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 0.6rem;">';
      html += '<div style="font-family: var(--display); font-weight: 700; font-size: 1.5rem;">' + r.requirement + '</div>';
      html += '<div style="font-size: 1.2rem; color: var(--accent); font-weight: 600; white-space: nowrap; margin-left: 1.6rem;">' + r.timing + '</div>';
      html += '</div>';
      html += '<div style="font-size: 1.4rem; color: var(--ink-soft); line-height: 1.6;">' + r.description + '</div>';
      if (r.conditional) html += '<div style="font-size: 1.2rem; color: var(--critical); font-weight: 600; margin-top: 0.6rem;">Applies to Tier 3 (High Risk) only</div>';
      html += '</div>';
    });
    /* Design principles note */
    html += '<div style="margin-top: 2rem; padding: 1.6rem; background: var(--white); border: 1px solid var(--border); font-size: 1.3rem; color: var(--ink-muted); line-height: 1.6;">';
    html += '<strong>Note:</strong> Dependency is not risk. A high-dependency, low-risk tool requires different governance than a high-risk, low-dependency tool. ';
    html += 'High dependency is a finding, not a failure. Some tools are permanent infrastructure and that\'s appropriate. What matters is that the choice is conscious.';
    html += '</div>';
    html += '</div>';
  }

  /* Escalation Triggers */
  if (RC.escalation_triggers) {
    html += '<div class="roadmap-section">';
    html += '<div class="roadmap-section-title">Escalation Triggers</div>';
    html += '<ul class="roadmap-list">';
    RC.escalation_triggers.forEach(function(t) { html += '<li>' + t + '</li>'; });
    html += '</ul></div>';
  }

  /* Decision Rules */
  if (RC.decision_rules) {
    html += '<div class="roadmap-section">';
    html += '<div class="roadmap-section-title">Decision Rules</div>';
    html += '<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem;">';

    html += '<div style="padding: 2rem; background: var(--risk-medium-bg); border-top: 4px solid var(--caution);">';
    html += '<div style="font-family: var(--display); font-weight: 700; margin-bottom: 1rem;">Pause When</div>';
    RC.decision_rules.pause_when.forEach(function(r) { html += '<div style="font-size: 1.3rem; padding: 0.4rem 0; color: var(--ink-soft);">\u2022 ' + r + '</div>'; });
    html += '</div>';

    html += '<div style="padding: 2rem; background: var(--signal-light); border-top: 4px solid var(--signal);">';
    html += '<div style="font-family: var(--display); font-weight: 700; margin-bottom: 1rem;">Investigate When</div>';
    RC.decision_rules.investigate_when.forEach(function(r) { html += '<div style="font-size: 1.3rem; padding: 0.4rem 0; color: var(--ink-soft);">\u2022 ' + r + '</div>'; });
    html += '</div>';

    html += '<div style="padding: 2rem; background: var(--risk-high-bg); border-top: 4px solid var(--critical);">';
    html += '<div style="font-family: var(--display); font-weight: 700; margin-bottom: 1rem;">Stop When</div>';
    RC.decision_rules.stop_when.forEach(function(r) { html += '<div style="font-size: 1.3rem; padding: 0.4rem 0; color: var(--ink-soft);">\u2022 ' + r + '</div>'; });
    html += '</div>';

    html += '</div></div>';
  }

  /* Toolkit References */
  if (RC.toolkit_references) {
    html += '<div class="roadmap-section">';
    html += '<div class="roadmap-section-title">Toolkit References</div>';
    var refs = RC.toolkit_references[tierKey] || RC.toolkit_references.tier_2 || [];
    html += '<ul class="roadmap-list">';
    refs.forEach(function(r) { html += '<li>' + r + '</li>'; });
    html += '</ul></div>';
  }

  /* HUMANS Alignment (CA only) */
  if (state.isCalifornia && RC.humans_alignment) {
    html += '<div class="roadmap-section">';
    html += '<div class="roadmap-section-title">CCCCO HUMANS Framework Alignment</div>';
    Object.keys(RC.humans_alignment).forEach(function(letter) {
      html += '<div style="padding: 1.2rem 0; border-bottom: 1px solid var(--border);">';
      html += '<span style="font-family: var(--display); font-weight: 800; font-size: 2rem; color: var(--signal); margin-right: 1rem;">' + letter + '</span>';
      html += '<span style="font-size: 1.4rem;">' + RC.humans_alignment[letter] + '</span></div>';
    });
    if (RC.humans_gap_note) {
      html += '<div class="alert alert-pause" style="margin-top: 1.6rem;"><div class="alert-title">HUMANS Gap Note</div>' + RC.humans_gap_note + '</div>';
    }
    html += '</div>';
  }

  /* Next Steps Checklist */
  if (RC.next_steps_checklist_template) {
    html += '<div class="roadmap-section">';
    html += '<div class="roadmap-section-title">Next Steps Checklist</div>';
    html += '<div style="font-size: 1.5rem; line-height: 2; white-space: pre-line;">' + RC.next_steps_checklist_template + '</div>';
    html += '</div>';
  }

  /* Action buttons */
  html += '<div style="display: flex; gap: 1.6rem; flex-wrap: wrap; margin-top: 4rem; padding-top: 3.2rem; border-top: 2px solid var(--border);">';
  html += '<button class="btn btn-primary btn-lg" onclick="saveAssessment()">Save Assessment</button>';
  html += '<button class="btn btn-outline" onclick="printView()">Print / Export</button>';
  html += '<button class="btn btn-outline" onclick="navigate(\'profile\')">Back to Profile</button>';
  html += '<button class="btn btn-outline" onclick="startNewAssessment()">Start Another Assessment</button>';
  html += '</div>';

  /* Footer */
  html += '<div style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border); font-size: 1.2rem; color: var(--ink-muted); text-align: center;">';
  html += (CONTENT.about ? CONTENT.about.footer_text : 'Generated by the AI Governance Navigator \u2014 AQL Labs / FutureObjects Research / College Futures Foundation');
  html += '</div>';

  html += '</div></div>';

  document.getElementById('roadmap-content').innerHTML = html;
}

/* ============================================================
   RENDER: ABOUT (View 7)
   ============================================================ */
function renderAbout() {
  var A = CONTENT.about || {};
  var html = '';

  html += '<div class="about-section">';
  html += '<div class="about-section-title">Framework Architecture</div>';
  html += '<div style="font-size: 1.5rem; line-height: 1.8; white-space: pre-line;">' + (A.framework_description || '') + '</div>';
  html += '</div>';

  html += '<div class="about-section">';
  html += '<div class="about-section-title">Nine Governance Pillars</div>';
  PILLARS.forEach(function(p) {
    html += '<div style="display: flex; align-items: flex-start; gap: 1.6rem; padding: 1.6rem 0; border-bottom: 1px solid var(--border);">';
    html += '<div style="width: 6px; height: 4rem; background: ' + p.color + '; flex-shrink: 0;"></div>';
    html += '<div><div style="font-family: var(--display); font-weight: 700; font-size: 1.5rem;">' + p.id + ': ' + p.name + '</div>';
    html += '<div style="font-size: 1.3rem; color: var(--ink-muted); font-style: italic;">' + p.principle_statement + '</div>';
    html += '<div style="font-size: 1.3rem; color: var(--ink-soft); margin-top: 0.4rem;">' + p.questions.length + ' questions</div></div>';
    html += '</div>';
  });
  html += '</div>';

  html += '<div class="about-section">';
  html += '<div class="about-section-title">Research Base</div>';
  html += '<div style="font-size: 1.5rem; line-height: 1.8; white-space: pre-line;">' + (A.research_base || '') + '</div>';
  html += '</div>';

  if (A.source_citations) {
    html += '<div class="about-section">';
    html += '<div class="about-section-title">Sources (' + A.source_citations.length + ')</div>';
    html += '<ul class="source-list">';
    A.source_citations.forEach(function(s) { html += '<li>' + s + '</li>'; });
    html += '</ul></div>';
  }

  html += '<div class="about-section">';
  html += '<div style="font-size: 1.4rem; color: var(--ink-muted);">' + (A.built_by || '') + '</div>';
  html += '</div>';

  document.getElementById('about-content').innerHTML = html;
}

/* ============================================================
   ROUTING QUESTIONNAIRE (Step 0)
   ============================================================ */

function renderRouting() {
  var q = ROUTING_QUESTIONS[state.currentRoutingQ];
  if (!q) return;
  var total = ROUTING_QUESTIONS.length;
  var pct = Math.round(((state.currentRoutingQ + 1) / total) * 100);
  document.getElementById('routing-step').textContent = 'Question ' + (state.currentRoutingQ + 1) + ' of ' + total;
  document.getElementById('routing-pct').textContent = pct + '%';
  document.getElementById('routing-fill').style.width = pct + '%';

  var html = '<div class="display-sm" style="margin-bottom: 1.2rem;">' + q.question + '</div>';
  html += '<div style="color: var(--ink-muted); font-size: 1.4rem; margin-bottom: 2.4rem;">' + q.subtitle + '</div>';

  if (q.type === 'multi') {
    var selected = state.routingAnswers[q.id] || [];
    html += '<div class="routing-multi-hint">' + selected.length + ' of ' + q.maxSelections + ' selected</div>';
    q.options.forEach(function(opt) {
      var isSel = selected.indexOf(opt.id) !== -1;
      var isDisabled = !isSel && selected.length >= q.maxSelections;
      var cls = 'routing-option';
      if (isSel) cls += ' selected';
      if (isDisabled) cls += ' disabled';
      html += '<div class="' + cls + '" onclick="toggleRoutingOption(\'' + q.id + '\',\'' + opt.id + '\',' + q.maxSelections + ')">' + opt.label + '</div>';
    });
  } else {
    var current = state.routingAnswers[q.id];
    q.options.forEach(function(opt) {
      var sel = current === opt.id ? ' selected' : '';
      html += '<div class="routing-option' + sel + '" onclick="pickRoutingAnswer(\'' + q.id + '\',\'' + opt.id + '\')">' + opt.label + '</div>';
    });
  }

  document.getElementById('routing-content').innerHTML = html;
  document.getElementById('routing-back').style.visibility = state.currentRoutingQ === 0 ? 'hidden' : 'visible';

  /* Enable next if answer given */
  var hasAnswer = false;
  if (q.type === 'multi') {
    hasAnswer = (state.routingAnswers[q.id] || []).length > 0;
  } else {
    hasAnswer = !!state.routingAnswers[q.id];
  }
  document.getElementById('routing-next').disabled = !hasAnswer;
  document.getElementById('routing-next').textContent = state.currentRoutingQ === total - 1 ? 'See Results' : 'Next';
}

function toggleRoutingOption(qId, optId, max) {
  var arr = state.routingAnswers[qId] || [];
  var idx = arr.indexOf(optId);
  if (idx !== -1) {
    arr.splice(idx, 1);
  } else if (arr.length < max) {
    arr.push(optId);
  }
  state.routingAnswers[qId] = arr;
  renderRouting();
}

function pickRoutingAnswer(qId, val) {
  state.routingAnswers[qId] = val;
  renderRouting();
}

function routingBack() {
  if (state.currentRoutingQ > 0) {
    state.currentRoutingQ--;
    renderRouting();
  } else {
    navigate('landing');
  }
}

function routingNext() {
  var q = ROUTING_QUESTIONS[state.currentRoutingQ];
  if (q.type === 'multi') {
    if ((state.routingAnswers[q.id] || []).length === 0) return;
  } else {
    if (!state.routingAnswers[q.id]) return;
  }

  if (state.currentRoutingQ < ROUTING_QUESTIONS.length - 1) {
    state.currentRoutingQ++;
    renderRouting();
  } else {
    computeRoutingResults();
    renderRoutingResults();
    navigate('routing-results');
  }
}

/* --- Scoring Engine --- */

function deriveArchetype(q4Answer, q7Answer) {
  /* Q4 is primary signal */
  var archetypeOrder = ['lightweight', 'building', 'scaling'];
  var q4Opt = ROUTING_QUESTIONS[3].options.find(function(o) { return o.id === q4Answer; });
  var primary = q4Opt ? q4Opt.archetype : 'building';
  var primaryIdx = archetypeOrder.indexOf(primary);

  /* Q7 adjusts +/-1 */
  var q7Opt = ROUTING_QUESTIONS[6].options.find(function(o) { return o.id === q7Answer; });
  var q7Arch = q7Opt ? q7Opt.archetype : 'building';
  var q7Idx = archetypeOrder.indexOf(q7Arch);

  var finalIdx = primaryIdx;
  if (q7Idx > primaryIdx) {
    finalIdx = Math.min(primaryIdx + 1, 2); /* upgrade one step */
  } else if (q7Idx < primaryIdx) {
    finalIdx = Math.max(primaryIdx - 1, 0); /* downgrade one step */
  }
  return archetypeOrder[finalIdx];
}

function getArchetypeMaxTier(archetype) {
  if (archetype === 'scaling') return 3;
  if (archetype === 'building') return 2;
  return 1; /* lightweight */
}

function computeRoutingResults() {
  var scores = {};
  var dataReady = {};
  var whyFits = {};

  /* Initialize all use cases */
  USE_CASES.forEach(function(uc) {
    if (uc.id === 'SS-XX') return;
    scores[uc.id] = 0;
    whyFits[uc.id] = [];
  });

  /* Q1: Bottleneck points (3 pts each) */
  var q1 = state.routingAnswers.q1 || [];
  q1.forEach(function(selId) {
    var opt = ROUTING_QUESTIONS[0].options.find(function(o) { return o.id === selId; });
    if (opt && opt.useCasePoints) {
      Object.keys(opt.useCasePoints).forEach(function(ucId) {
        if (scores[ucId] !== undefined) {
          scores[ucId] += opt.useCasePoints[ucId];
          whyFits[ucId] = whyFits[ucId] || [];
          whyFits[ucId].push('bottleneck:' + opt.label);
        }
      });
    }
  });

  /* Q2: Scale effects */
  var q2 = state.routingAnswers.q2;
  if (q2 === 'under5k') {
    /* Boost Tier 1 */
    ['SS-04','SS-07','SS-08'].forEach(function(id) { if (scores[id] !== undefined) scores[id] += 2; });
  } else if (q2 === '15k-30k') {
    /* Weight toward scale payoff */
    ['SS-01','SS-02','SS-04'].forEach(function(id) { if (scores[id] !== undefined) scores[id] += 2; });
  } else if (q2 === 'over30k') {
    /* Strong case for SS-02, SS-01 */
    ['SS-01','SS-02'].forEach(function(id) { if (scores[id] !== undefined) scores[id] += 3; });
  }

  /* Q3: Data feasibility gate */
  var q3 = state.routingAnswers.q3;
  if (q3 && DATA_READINESS_MAP[q3]) {
    var map = DATA_READINESS_MAP[q3];
    Object.keys(map).forEach(function(ucId) {
      dataReady[ucId] = map[ucId];
      if (map[ucId] === 'red' && scores[ucId] !== undefined) {
        scores[ucId] -= 3; /* downrank data-heavy use cases */
      } else if (map[ucId] === 'yellow' && scores[ucId] !== undefined) {
        scores[ucId] -= 1;
      }
    });
  }

  /* Q4: Staffing / archetype signal */
  var q4 = state.routingAnswers.q4;
  var q4Opt = ROUTING_QUESTIONS[3].options.find(function(o) { return o.id === q4; });
  if (q4Opt) {
    if (q4Opt.archetype === 'lightweight') {
      /* Penalize higher tiers */
      USE_CASES.forEach(function(uc) {
        if (uc.id === 'SS-XX') return;
        if (uc.default_risk_tier === 2 && scores[uc.id] !== undefined) scores[uc.id] -= 3;
        if (uc.default_risk_tier === 3 && scores[uc.id] !== undefined) scores[uc.id] -= 5;
      });
    }
  }

  /* Q5: Equity gap points (2 pts each) */
  var q5 = state.routingAnswers.q5 || [];
  q5.forEach(function(selId) {
    var opt = ROUTING_QUESTIONS[4].options.find(function(o) { return o.id === selId; });
    if (opt && opt.useCasePoints) {
      Object.keys(opt.useCasePoints).forEach(function(ucId) {
        if (scores[ucId] !== undefined) {
          scores[ucId] += opt.useCasePoints[ucId];
          whyFits[ucId] = whyFits[ucId] || [];
          whyFits[ucId].push('equity:' + opt.label);
        }
      });
    }
  });

  /* Q6: AI use urgency */
  var q6 = state.routingAnswers.q6;
  if (q6 === 'yes_already') {
    if (scores['SS-04'] !== undefined) scores['SS-04'] += 3;
  } else if (q6 === 'dont_know') {
    if (scores['SS-04'] !== undefined) scores['SS-04'] += 2;
    if (scores['SS-07'] !== undefined) scores['SS-07'] += 1;
  }

  /* Q7: governance â€” archetype adjustment handled in deriveArchetype */

  /* Q8: Motivation weighting */
  var q8 = state.routingAnswers.q8;
  if (q8 === 'leadership') {
    if (scores['SS-04'] !== undefined) scores['SS-04'] += 2;
  } else if (q8 === 'student_demand') {
    ['SS-04','SS-05','SS-06'].forEach(function(id) { if (scores[id] !== undefined) scores[id] += 2; });
  } else if (q8 === 'enrollment') {
    ['SS-01','SS-02','SS-10'].forEach(function(id) { if (scores[id] !== undefined) scores[id] += 2; });
  } else if (q8 === 'equity') {
    /* Amplify Q5 scores */
    q5.forEach(function(selId) {
      var opt = ROUTING_QUESTIONS[4].options.find(function(o) { return o.id === selId; });
      if (opt && opt.useCasePoints) {
        Object.keys(opt.useCasePoints).forEach(function(ucId) {
          if (scores[ucId] !== undefined) scores[ucId] += 1;
        });
      }
    });
  }

  /* Derive archetype */
  var archetype = deriveArchetype(state.routingAnswers.q4, state.routingAnswers.q7);
  var maxTier = getArchetypeMaxTier(archetype);

  /* Derive urgency label */
  var urgencyLabels = {
    'yes_already': 'High \u2014 AI already in use without governance',
    'somewhat': 'Moderate \u2014 experimentation underway',
    'not_yet': 'Low \u2014 opportunity to plan ahead',
    'dont_know': 'Unknown \u2014 inventory needed'
  };
  var urgency = urgencyLabels[q6] || 'Not assessed';

  /* Derive data readiness label */
  var dataLabels = {
    'basic_sis': 'Basic SIS \u2014 clean enrollment and demographics',
    'sis_plus': 'Good \u2014 SIS plus advising, financial aid, analytics',
    'rich_siloed': 'Rich but siloed \u2014 integration needed',
    'working_on_it': 'Minimal \u2014 still building reliable data'
  };
  var dataLabel = dataLabels[q3] || 'Not assessed';

  /* Derive equity priority */
  var equityPriority = q5.map(function(selId) {
    var opt = ROUTING_QUESTIONS[4].options.find(function(o) { return o.id === selId; });
    return opt ? opt.label : selId;
  });

  /* Sort use cases by score descending */
  var ranked = Object.keys(scores).map(function(ucId) {
    return { id: ucId, score: scores[ucId], dataReady: dataReady[ucId] || 'green' };
  }).sort(function(a, b) { return b.score - a.score; });

  /* Partition: recommended vs consider later */
  var recommended = [];
  var considerLater = [];

  ranked.forEach(function(item) {
    var uc = USE_CASES.find(function(u) { return u.id === item.id; });
    if (!uc || uc.id === 'SS-XX') return;

    var tier = uc.default_risk_tier || 2;
    var isBeyondCapacity = tier > maxTier;
    var isDataRed = item.dataReady === 'red';

    if (item.score <= 0) return; /* Skip negative/zero scores */

    if ((isBeyondCapacity || isDataRed) && recommended.length > 0) {
      considerLater.push(item);
    } else if (recommended.length < 3) {
      recommended.push(item);
    } else {
      considerLater.push(item);
    }
  });

  /* Limit consider later to top 3 */
  considerLater = considerLater.slice(0, 3);

  /* Generate "why it fits" text */
  function generateWhyFits(ucId) {
    var reasons = whyFits[ucId] || [];
    var parts = [];
    var bottlenecks = reasons.filter(function(r) { return r.indexOf('bottleneck:') === 0; });
    var equities = reasons.filter(function(r) { return r.indexOf('equity:') === 0; });

    if (bottlenecks.length > 0) {
      var bLabels = bottlenecks.map(function(r) { return r.replace('bottleneck:', '').toLowerCase(); });
      parts.push('You told us ' + bLabels.join(' and ') + '.');
    }
    if (equities.length > 0) {
      var eLabels = equities.map(function(r) { return r.replace('equity:', '').toLowerCase(); });
      parts.push('Your equity priorities include ' + eLabels.join(' and ') + '.');
    }

    var uc = USE_CASES.find(function(u) { return u.id === ucId; });
    if (uc) {
      parts.push('This use case \u2014 ' + uc.one_liner.toLowerCase().replace(/\.$/, '') + ' \u2014 directly addresses these needs.');
    }

    /* Add tier context */
    if (uc) {
      var tierInfo = RISK_TIERS[uc.default_risk_tier];
      if (tierInfo && archetype === 'lightweight' && uc.default_risk_tier === 1) {
        parts.push('At Tier 1, it\u2019s governance-light enough to match your current capacity.');
      }
    }

    return parts.join(' ') || 'This use case matches your institutional profile.';
  }

  /* Build final results */
  state.routingResults = {
    recommended: recommended.map(function(item) {
      return {
        id: item.id,
        score: item.score,
        dataReady: item.dataReady,
        whyFits: generateWhyFits(item.id)
      };
    }),
    considerLater: considerLater.map(function(item) {
      var uc = USE_CASES.find(function(u) { return u.id === item.id; });
      var tier = uc ? uc.default_risk_tier : 2;
      var reason = '';
      if (item.dataReady === 'red') {
        reason = 'Your data situation suggests starting with lower data requirements first.';
      } else if (tier > maxTier) {
        reason = 'This use case exceeds your current governance capacity. Build capacity through your first use case, then revisit.';
      }
      return {
        id: item.id,
        score: item.score,
        dataReady: item.dataReady,
        whyFits: generateWhyFits(item.id),
        reason: reason
      };
    }),
    profile: {
      archetype: archetype,
      equityPriority: equityPriority,
      urgency: urgency,
      dataReadiness: dataLabel
    }
  };
}

/* --- Rendering --- */

function renderRoutingResults() {
  var results = state.routingResults;
  if (!results) return;

  var html = '<div class="label" style="color: var(--signal); margin-bottom: 1.6rem;">Your Recommended Starting Points</div>';
  html += '<div class="display-md" style="margin-bottom: 1.2rem;">Based on your answers, start here.</div>';
  html += '<div style="color: var(--ink-muted); margin-bottom: 4rem;">We matched your institutional context \u2014 bottlenecks, data readiness, staffing, and equity priorities \u2014 to find the best starting points.</div>';

  /* Recommended cards */
  results.recommended.forEach(function(item, idx) {
    var uc = USE_CASES.find(function(u) { return u.id === item.id; });
    if (!uc) return;
    var tier = uc.default_risk_tier || 2;
    var tierInfo = RISK_TIERS[tier];

    html += '<div class="routing-result-card">';
    html += '<div class="routing-result-rank">Recommended #' + (idx + 1) + '</div>';
    html += '<div class="routing-result-name">' + uc.name + '</div>';
    html += '<div class="routing-result-oneliner">' + uc.one_liner + '</div>';
    html += '<div class="routing-result-meta">';
    html += '<span class="tier-badge ' + tierInfo.cls + '">' + tierInfo.label + ' (' + tierInfo.name + ')</span>';
    html += '<span class="data-readiness data-readiness-' + item.dataReady + '">Data: ' + item.dataReady + '</span>';
    html += '</div>';
    html += '<div class="routing-why-fits">' + item.whyFits + '</div>';
    html += '<button class="btn btn-primary" onclick="selectRoutingUseCase(\'' + uc.id + '\')">Evaluate This Use Case \u2192</button>';
    html += '</div>';
  });

  /* Consider Later */
  if (results.considerLater.length > 0) {
    html += '<div class="routing-consider-later" style="margin-top: 4rem;">';
    html += '<div class="display-sm" style="margin-bottom: 0.8rem; color: var(--ink-muted);">Consider Later</div>';
    html += '<div style="color: var(--ink-muted); font-size: 1.4rem; margin-bottom: 2rem;">These use cases could be a good fit, but your current context suggests starting elsewhere.</div>';
    results.considerLater.forEach(function(item) {
      var uc = USE_CASES.find(function(u) { return u.id === item.id; });
      if (!uc) return;
      var tier = uc.default_risk_tier || 2;
      var tierInfo = RISK_TIERS[tier];

      html += '<div class="routing-result-card">';
      html += '<div class="routing-result-rank">Consider Later</div>';
      html += '<div class="routing-result-name">' + uc.name + '</div>';
      html += '<div class="routing-result-oneliner">' + uc.one_liner + '</div>';
      html += '<div class="routing-result-meta">';
      html += '<span class="tier-badge ' + tierInfo.cls + '">' + tierInfo.label + ' (' + tierInfo.name + ')</span>';
      html += '<span class="data-readiness data-readiness-' + item.dataReady + '">Data: ' + item.dataReady + '</span>';
      html += '</div>';
      if (item.reason) {
        html += '<div class="routing-why-fits">' + item.reason + '</div>';
      }
      html += '</div>';
    });
    html += '</div>';
  }

  /* Institutional Profile */
  var p = results.profile;
  html += '<div class="routing-profile">';
  html += '<div class="routing-profile-title">Your Institutional Profile</div>';
  html += '<div class="routing-profile-grid">';
  html += '<div class="routing-profile-item"><div class="routing-profile-label">Archetype</div><div class="routing-profile-value" style="text-transform: capitalize;">' + p.archetype + '</div></div>';
  html += '<div class="routing-profile-item"><div class="routing-profile-label">Urgency</div><div class="routing-profile-value">' + p.urgency + '</div></div>';
  html += '<div class="routing-profile-item"><div class="routing-profile-label">Data Readiness</div><div class="routing-profile-value">' + p.dataReadiness + '</div></div>';
  if (p.equityPriority.length > 0) {
    html += '<div class="routing-profile-item" style="grid-column: 1 / -1;"><div class="routing-profile-label">Equity Priorities</div><div class="routing-profile-value" style="font-size: 1.4rem; font-weight: 500;">' + p.equityPriority.join('<br>') + '</div></div>';
  }
  html += '</div></div>';

  /* Action buttons */
  html += '<div class="assess-nav" style="margin-top: 4rem;">';
  html += '<button class="btn btn-outline" onclick="retakeRouting()">Retake Questionnaire</button>';
  html += '<button class="btn btn-outline" onclick="navigate(\'use-case\')">Browse All Use Cases</button>';
  html += '</div>';

  document.getElementById('routing-results-content').innerHTML = html;
}

function selectRoutingUseCase(ucId) {
  var uc = USE_CASES.find(function(u) { return u.id === ucId; });
  if (!uc) return;
  state.useCase = uc;
  state.entryPath = 'routing';
  /* Pre-populate archetype from routing profile */
  if (state.routingResults && state.routingResults.profile) {
    state.archetype = state.routingResults.profile.archetype;
  }
  /* Go directly to screening */
  state.riskTier = uc.default_risk_tier || 2;
  state.screeningAnswers = {};
  state.currentScreenQ = 0;
  state.screeningResult = null;
  state.screeningFlags = [];
  renderScreening();
  navigate('screening');
}

function startRouting() {
  state.currentRoutingQ = 0;
  renderRouting();
  navigate('routing');
}

function retakeRouting() {
  state.routingAnswers = { q1: [], q2: null, q3: null, q4: null, q5: [], q6: null, q7: null, q8: null };
  state.routingResults = null;
  state.currentRoutingQ = 0;
  renderRouting();
  navigate('routing');
}

/* ============================================================
   UTILITY FUNCTIONS
   ============================================================ */
function toggleCalifornia(checked) {
  state.isCalifornia = checked;
}

function printView() {
  var active = document.querySelector('.view.active');
  if (active) active.classList.add('print-target');
  window.print();
  if (active) active.classList.remove('print-target');
}

function saveAssessment() {
  var name = state.toolName || prompt('Enter a name for this tool (e.g., "Nectir", "EAB Navigate"):') || 'Unnamed';
  state.toolName = name;
  var key = 'nav2_' + name.replace(/\s+/g, '_') + '_' + Date.now();
  try {
    localStorage.setItem(key, JSON.stringify(state));
    alert('Assessment saved as "' + name + '". You can return anytime to review or update.');
  } catch (e) {
    alert('Could not save. Your browser may have localStorage disabled.');
  }
}

function startNewAssessment() {
  state.useCase = null;
  state.screeningAnswers = {};
  state.screeningResult = null;
  state.screeningFlags = [];
  state.currentScreenQ = 0;
  state.dependencyProfile = { answers: { D1: null, D2: null, D3: null, D4: null }, totalScore: null, profile: null };
  state.riskTier = null;
  state.riskTierOverride = false;
  state.riskTierOverrideReason = '';
  state.currentPillar = 0;
  state.pillarScores = {};
  state.pillarNotes = {};
  state.noGoAnswers = {};
  state.noGoFlags = [];
  state.toolName = '';
  state.assessmentDate = new Date().toISOString().split('T')[0];
  state.entryPath = 'full';
  state.routingAnswers = { q1: [], q2: null, q3: null, q4: null, q5: [], q6: null, q7: null, q8: null };
  state.routingResults = null;
  state.currentRoutingQ = 0;
  navigate('use-case');
}

/* ============================================================
   INIT
   ============================================================ */
function init() {
  loadContent(function() {
    populateDataFromContent();
    renderLanding();
    renderArchetypeSelector();
    renderUseCaseSelector();
    renderAbout();

    /* Check URL hash */
    var hash = window.location.hash.replace('#', '');
    if (hash === 'routing') {
      state.currentRoutingQ = 0;
      renderRouting();
      navigate('routing');
    } else if (hash === 'routing-results') {
      /* Guard: don't deep-link to results without data */
      if (!state.routingResults) {
        state.currentRoutingQ = 0;
        renderRouting();
        navigate('routing');
      } else {
        renderRoutingResults();
        navigate('routing-results');
      }
    } else if (hash && document.getElementById('view-' + hash)) {
      navigate(hash);
    }
  });
}

document.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
